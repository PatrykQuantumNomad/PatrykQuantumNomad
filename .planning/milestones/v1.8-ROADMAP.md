# Milestone v1.8: EDA Visual Encyclopedia

**Status:** SHIPPED 2026-02-25
**Phases:** 48-55
**Total Plans:** 24

## Overview

Modernized the NIST/SEMATECH Engineering Statistics Handbook Chapter 1 (Exploratory Data Analysis) as a complete interactive pillar section with 90+ pages, build-time SVG plots, Python code examples, KaTeX formulas, and D3.js distribution parameter explorers.

## Phases

### Phase 48: Infrastructure Foundation

**Goal**: KaTeX pipeline, D3 isolation, OG caching, Zod schemas, EDA layout, content collections, technique template, breadcrumbs
**Depends on**: Phase 47 (v1.7 complete)
**Plans**: 3 plans

Plans:
- [x] 48-01: KaTeX pipeline, EDA layout, technique template, breadcrumbs, and formula test page
- [x] 48-02: Zod schemas, content collections, sample data, and OG image caching
- [x] 48-03: D3 micro-modules, bundle isolation verification, and navigation lifecycle check

**Details:**
- Installed remark-math@6.0.0 + rehype-katex for build-time formula rendering
- Created EDALayout.astro with isolated animation lifecycle
- Built TechniquePage.astro template with slots for plots, formulas, code, interpretation
- Breadcrumb component for EDA pages (EDA > Section > Technique)
- Zod schemas for EdaTechnique and EdaDistribution content types
- Three content collections: edaTechniques (JSON), edaDistributions (JSON), edaPages (MDX)
- OG image caching with content-hash (md5 truncated to 12 hex chars)
- D3 micro-modules (16.7KB gzipped) isolated to distribution page chunks only
- KaTeX test page validated 10+ NIST formula categories

### Phase 49: Data Model + Schema Population

**Goal**: Complete data model for all 90+ EDA pages with validated JSON and MDX stubs
**Depends on**: Phase 48
**Plans**: 3 plans

Plans:
- [x] 49-01: Populate techniques.json with 47 entries (29 graphical + 18 quantitative)
- [x] 49-02: Populate distributions.json with 19 probability distribution entries
- [x] 49-03: MDX stubs (19 files), sample datasets, route map, and cross-link validation script

**Details:**
- 29 graphical technique entries with tier assignments (A/B) and cross-links
- 18 quantitative technique entries with KaTeX formula references
- 19 distribution entries with PDF/CDF formulas and parameter definitions
- 6 foundation + 9 case study + 4 reference MDX stub files
- NIST reference datasets in datasets.ts
- Cross-link validation script with node:fs direct I/O

### Phase 50: SVG Generator Library

**Goal**: Complete library of build-time TypeScript SVG generators for all chart types
**Depends on**: Phase 49
**Plans**: 3 plans

Plans:
- [x] 50-01: Plot base foundation, statistics math module, dark mode CSS, histogram, box plot, and bar plot generators
- [x] 50-02: Scatter plot, line plot, lag plot, probability plot, spectral plot, and star plot generators
- [x] 50-03: Contour plot, distribution curves, composite 4-plot/6-plot layouts, and barrel export index

**Details:**
- plot-base.ts with shared axes, grid, viewBox responsiveness, Quantum Explorer palette
- statistics.ts pure TypeScript math (~200 lines): KDE, FFT, regression, normal quantile, autocorrelation
- 13 SVG generators total covering all statistical chart types
- CSS custom property references for automatic dark/light theme support
- Abramowitz & Stegun erf approximation, Lanczos gamma for distribution math
- Composite plots use SVG wrapper strip-and-translate composition

### Phase 51: Graphical Technique Pages

**Goal**: All 29 graphical technique pages live with SVG plots, interpretation prose, and Tier B interactive variant switching
**Depends on**: Phase 50
**Plans**: 3 plans

Plans:
- [x] 51-01: PlotVariantSwap component and technique-renderer slug-to-generator mapping
- [x] 51-02: Prose content module with 200+ words per technique for all 29 graphical techniques
- [x] 51-03: Dynamic [slug].astro route, TechniquePage cross-link fix, and SVG thumbnail utility

**Details:**
- PlotVariantSwap.astro with CSS attribute selectors and vanilla JS (~3KB)
- technique-renderer.ts mapping 29 slugs to SVG generators with variant datasets
- technique-content.ts with Record<string, TechniqueContent> prose module
- Dynamic [slug].astro route with breadcrumbs, cross-links, and thumbnail generation
- Seeded PRNG for reproducible variant datasets across builds

### Phase 52: Quantitative Techniques + Foundations

**Goal**: All 18 quantitative technique pages with KaTeX formulas and Python code, plus 6 foundation pages
**Depends on**: Phase 50, Phase 48 (KaTeX pipeline)
**Plans**: 3 plans

Plans:
- [x] 52-01: Quantitative content module and dynamic route for 18 KaTeX + Python technique pages
- [x] 52-02: Populate 6 foundation MDX stubs and create foundation dynamic route
- [x] 52-03: Cross-link validation, build verification, and visual review

**Details:**
- quantitative-content.ts with prose, KaTeX formulas, and Python code for 18 techniques
- [slug].astro dynamic route using katex.renderToString() at build time
- 6 foundation MDX pages with NIST section references
- Astro 5 render() from astro:content for MDX collection rendering
- Code component from astro-expressive-code for Python syntax highlighting with copy buttons
- Build verified: 912 pages, 17/17 cross-link checks passed

### Phase 53: Distribution Pages with D3 Explorers

**Goal**: All 19 distribution pages with static SVG fallbacks and interactive D3 parameter explorers
**Depends on**: Phase 50, Phase 48 (D3 isolation)
**Plans**: 3 plans

Plans:
- [x] 53-01: Shared distribution-math.ts module (19 distributions) and refactored SVG generator
- [x] 53-02: DistributionExplorer.tsx React island, DistributionPage template, and [slug].astro
- [x] 53-03: Distribution landing page with thumbnail grid and visual verification

**Details:**
- distribution-math.ts with PDF/CDF implementations for all 19 distributions
- Gamma scale parameterization, fixed Lentz algorithm for incomplete gamma
- Tukey-Lambda via Newton inversion, discrete bar-stem PMF rendering
- DistributionExplorer.tsx React island with D3 dual PDF+CDF charts
- CSS :has() selector for static SVG fallback hiding when explorer mounts
- Distribution landing at /eda/distributions/ with compact 200x140 SVG thumbnails

### Phase 54: Case Studies + Reference + Landing Page

**Goal**: Content-complete encyclopedia with 9 case studies, 4 reference pages, and filterable landing page
**Depends on**: Phase 51, Phase 52, Phase 53
**Plans**: 3 plans

Plans:
- [x] 54-01: Case study dynamic route and 9 NIST walkthrough MDX pages
- [x] 54-02: Reference dynamic route and 4 cross-linked reference MDX pages
- [x] 54-03: EDA landing page with CategoryFilter React island and filterable card grid

**Details:**
- 9 case study pages with sequential analysis walkthroughs and embedded SVG plots
- 4 reference pages with tables, cross-links, and Unicode entities for MDX-safe content
- Landing page at /eda/ with 85 cards across 6 categories
- CategoryFilter React island with single-select category pills
- DOM-based data-category toggling on cards and sections
- Responsive card grid (3-col desktop, 2-col tablet, 1-col mobile)

### Phase 55: Site Integration + SEO + Polish

**Goal**: Full site integration with navigation, structured data, OG images, blog post, and quality verification
**Depends on**: Phase 54
**Plans**: 3 plans

Plans:
- [x] 55-01: Navigation, homepage callout, JSON-LD structured data, and LLMs.txt integration
- [x] 55-02: Build-time OG images, companion blog post, and bidirectional cross-links
- [x] 55-03: Quality audits, accessibility fixes, and Lighthouse 90+ verification

**Details:**
- EDA header nav link and homepage callout with inline SVG composite
- EDAJsonLd with conditional isOverview prop for Dataset vs TechArticle
- OG overview with 2x2 chart silhouettes, section images with bar motif
- Companion blog post with 28 cross-links across all 6 categories
- SVG accessibility (role="img" + aria-label) on all EDA template components
- Lighthouse scores: Tier A 99/96, Tier B 99/96, Tier C 98/95
- Formula audit passed with 0 issues, cross-link validation 0 broken links

---

## Milestone Summary

**Key Decisions:**
- remark-math@6.0.0 for KaTeX (works with Astro 5, no fallback needed)
- D3 micro-modules only (17KB gzipped), never full d3 package (280KB)
- OG caching with content-hash to prevent build time regression at 90+ pages
- CSS custom property references for SVG dark/light theme without regeneration
- Lanczos gamma (g=7) and Abramowitz & Stegun erf for distribution math
- PlotVariantSwap with CSS attribute selectors (JIT purge workaround)
- Content module pattern (prose in TypeScript, separate from routing)
- Single-select category filter on landing page (categories are mutually exclusive)
- katex.renderToString() at build time for .astro pages (remark-math only for MDX)

**Issues Resolved:**
- KaTeX + MDX formula parsing version conflicts (remark-math@6.0.0 works)
- D3 bundle leak prevention (verified isolated to 1 chunk, distribution pages only)
- OG image build time regression at scale (content-hash caching)
- GSAP/D3 animation lifecycle conflicts (EDALayout slot composition)
- Formula accuracy (character-by-character audit passed with 0 issues)

**Issues Deferred:**
- Bulk publishing 90+ template-similar pages risks SpamBrain classification (monitor)

**Technical Debt Incurred:**
- DIST-16 duplicates DIST-05 (both Lognormal) â€” single page covers both requirement IDs

---

_For current project status, see .planning/ROADMAP.md_
