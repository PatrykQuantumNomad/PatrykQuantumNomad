---
phase: 09-external-blog-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/data/blog/ext-ollama-kubernetes-deployment.md
  - src/data/blog/ext-open-source-kubernetes-ai-assistant.md
  - src/data/blog/ext-custom-ai-agent-sql-server.md
  - src/data/blog/ext-red-teaming-llms-ai-agents.md
  - src/data/blog/ext-golden-paths-agentic-ai.md
  - src/data/blog/ext-devops-handbook-ai-agents.md
  - src/data/blog/ext-kubernetes-cloud-costs.md
  - src/data/blog/ext-apache-airflow-data-pipeline.md
  - src/data/blog/ext-cloud-composer-terraform.md
  - src/data/blog/ext-kubernetes-elasticsearch-python.md
  - src/pages/blog/[slug].astro
  - src/pages/open-graph/[...slug].png.ts
autonomous: true

must_haves:
  truths:
    - "10 external blog post stub files exist in src/data/blog/ with ext- prefix"
    - "External posts have externalUrl, source, tags, and publishedDate in frontmatter with no body content"
    - "getStaticPaths in [slug].astro excludes posts with externalUrl (no detail pages generated)"
    - "getStaticPaths in [...slug].png.ts excludes posts with externalUrl (no OG images generated)"
    - "astro build produces no /blog/ext-* routes and no /open-graph/blog/ext-* images"
  artifacts:
    - path: "src/data/blog/ext-ollama-kubernetes-deployment.md"
      provides: "Kubert AI external post stub"
      contains: "externalUrl"
    - path: "src/data/blog/ext-golden-paths-agentic-ai.md"
      provides: "Kubert AI external post stub"
      contains: "source: \"Kubert AI\""
    - path: "src/data/blog/ext-kubernetes-cloud-costs.md"
      provides: "Translucent Computing external post stub"
      contains: "source: \"Translucent Computing\""
    - path: "src/pages/blog/[slug].astro"
      provides: "Blog detail page with external post filter"
      contains: "!data.externalUrl"
    - path: "src/pages/open-graph/[...slug].png.ts"
      provides: "OG image generator with external post filter"
      contains: "!data.externalUrl"
  key_links:
    - from: "src/data/blog/ext-*.md"
      to: "src/content.config.ts"
      via: "content collection schema validation"
      pattern: "externalUrl.*source"
    - from: "src/pages/blog/[slug].astro"
      to: "getCollection filter"
      via: "!data.externalUrl guard in getStaticPaths"
      pattern: "!data\\.externalUrl"
---

<objective>
Create 10 external blog post content files and add getStaticPaths guards to prevent external posts from generating slug pages or OG images.

Purpose: Establishes the data layer for external blog integration. The 10 frontmatter-only markdown files are the content that blog listing and RSS will surface. The getStaticPaths guards ensure external posts only appear in listings, never as standalone pages.

Output: 10 external blog post stub files in src/data/blog/, updated [slug].astro and [...slug].png.ts with external post filters.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-external-blog-integration/09-RESEARCH.md
@src/content.config.ts
@src/data/blog/building-kubernetes-observability-stack.md
@src/pages/blog/[slug].astro
@src/pages/open-graph/[...slug].png.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create 10 external blog post stub files</name>
  <files>
    src/data/blog/ext-ollama-kubernetes-deployment.md
    src/data/blog/ext-open-source-kubernetes-ai-assistant.md
    src/data/blog/ext-custom-ai-agent-sql-server.md
    src/data/blog/ext-red-teaming-llms-ai-agents.md
    src/data/blog/ext-golden-paths-agentic-ai.md
    src/data/blog/ext-devops-handbook-ai-agents.md
    src/data/blog/ext-kubernetes-cloud-costs.md
    src/data/blog/ext-apache-airflow-data-pipeline.md
    src/data/blog/ext-cloud-composer-terraform.md
    src/data/blog/ext-kubernetes-elasticsearch-python.md
  </files>
  <action>
    Create 10 frontmatter-only markdown files in src/data/blog/. Each file has ONLY frontmatter (opening and closing `---` fences) with NO body content after the closing fence.

    Each file must contain these frontmatter fields:
    - title: Exact title from the research table below
    - description: 1-2 sentence description of the post content
    - publishedDate: Exact date from the research table (YYYY-MM-DD format)
    - tags: Lowercase array matching existing tag conventions (see research table)
    - draft: false
    - externalUrl: Full canonical URL to the external blog post
    - source: Either "Kubert AI" or "Translucent Computing" (must match z.enum values in content.config.ts)

    **Kubert AI posts (source: "Kubert AI"):**

    1. ext-ollama-kubernetes-deployment.md
       title: "Ollama Kubernetes Deployment: Cost-Effective and Secure"
       description: "Deploy Ollama AI models in Kubernetes with scalable, secure, and cost-effective infrastructure using Terraform, GPU optimization, and security best practices."
       publishedDate: 2024-09-06
       tags: ["kubernetes", "ai", "ollama", "llm"]
       externalUrl: "https://mykubert.com/blog/ollama-kubernetes-deployment-cost-effective-and-secure/"

    2. ext-open-source-kubernetes-ai-assistant.md
       title: "Introducing Open Source Kubernetes AI Assistant"
       description: "An open-source AI assistant for Kubernetes that helps engineers manage clusters, troubleshoot issues, and optimize workloads using natural language."
       publishedDate: 2024-08-22
       tags: ["kubernetes", "ai", "open-source"]
       externalUrl: "https://mykubert.com/blog/introducing-open-source-kubernetes-ai-assistant/"

    3. ext-custom-ai-agent-sql-server.md
       title: "Building a Custom AI Agent for SQL Server: DevOps Practices"
       description: "Build a custom AI agent for SQL Server management using DevOps practices, integrating Kubernetes orchestration with intelligent database automation."
       publishedDate: 2024-08-28
       tags: ["ai", "devops", "kubernetes", "cloud-native"]
       externalUrl: "https://mykubert.com/blog/building-a-custom-ai-agent-for-sql-server-devops-practices/"

    4. ext-red-teaming-llms-ai-agents.md
       title: "Red Teaming LLMs to AI Agents: Beyond One-shot Prompts"
       description: "Explore red teaming techniques for LLMs and AI agents, moving beyond one-shot prompt attacks to systematic adversarial evaluation of agentic systems."
       publishedDate: 2024-09-26
       tags: ["ai", "llm", "security"]
       externalUrl: "https://mykubert.com/blog/red-teaming-llms-to-ai-agents-beyond-one-shot-prompts/"

    5. ext-golden-paths-agentic-ai.md
       title: "From Golden Paths to Agentic AI: A New Era of Kubernetes Management"
       description: "How agentic AI transforms Kubernetes management by evolving golden paths into intelligent, autonomous platform engineering workflows."
       publishedDate: 2025-01-16
       tags: ["kubernetes", "ai", "platform-engineering"]
       externalUrl: "https://mykubert.com/blog/from-golden-paths-to-agentic-ai-a-new-era-of-kubernetes-management/"

    6. ext-devops-handbook-ai-agents.md
       title: "DevOps Handbook with AI Agents"
       description: "A practical guide to integrating AI agents into DevOps workflows for automated incident response, infrastructure management, and continuous delivery."
       publishedDate: 2024-11-05
       tags: ["ai", "devops", "kubernetes", "platform-engineering"]
       externalUrl: "https://mykubert.com/blog/devops-handbook-with-ai-agents/"

    **Translucent Computing posts (source: "Translucent Computing"):**

    7. ext-kubernetes-cloud-costs.md
       title: "What is Kubernetes, and Why are My Cloud Costs So High?! -- Part 1"
       description: "Demystifying Kubernetes and understanding why cloud costs spiral when running containerized workloads without proper resource management."
       publishedDate: 2025-03-20
       tags: ["kubernetes", "cloud-native"]
       externalUrl: "https://translucentcomputing.com/2025/03/what-is-kubernetes-and-why-are-my-cloud-costs-so-high-part-1/"

    8. ext-apache-airflow-data-pipeline.md
       title: "Apache Airflow -- Data Pipeline"
       description: "Build and orchestrate data pipelines with Apache Airflow on Kubernetes, from DAG design to production deployment."
       publishedDate: 2025-03-22
       tags: ["data-engineering", "cloud-native"]
       externalUrl: "https://translucentcomputing.com/2025/03/apache-airflow-data-pipeline/"

    9. ext-cloud-composer-terraform.md
       title: "Cloud Composer -- Terraform Deployment"
       description: "Deploy Google Cloud Composer environments using Terraform for reproducible, version-controlled data pipeline infrastructure."
       publishedDate: 2021-12-10
       tags: ["cloud-native", "devops", "terraform"]
       externalUrl: "https://translucentcomputing.com/2021/12/cloud-composer-terraform-deployment/"

    10. ext-kubernetes-elasticsearch-python.md
        title: "Kubernetes, Elasticsearch, Python Importer"
        description: "Deploy Elasticsearch on Kubernetes with a Python-based data importer for scalable search and analytics infrastructure."
        publishedDate: 2019-05-11
        tags: ["kubernetes", "python", "data-engineering"]
        externalUrl: "https://translucentcomputing.com/2019/05/kubernetes-elasticsearch-python-importer/"

    IMPORTANT:
    - No blank lines or content after the closing `---` fence
    - Tags must be lowercase and hyphenated (matching existing convention)
    - The source field value must be exactly "Kubert AI" or "Translucent Computing" (matches z.enum in content.config.ts)
    - publishedDate must be a bare date (YYYY-MM-DD), not quoted, to match existing post format
  </action>
  <verify>
    Run `npx astro build` -- should complete with zero errors and output 10 additional content collection entries (11 blog posts total: 1 local + 10 external). Verify with `ls src/data/blog/ext-*.md | wc -l` showing 10.
  </verify>
  <done>10 external blog post stub files exist in src/data/blog/ with valid frontmatter that passes Zod schema validation during astro build.</done>
</task>

<task type="auto">
  <name>Task 2: Add getStaticPaths guards to exclude external posts from slug pages and OG images</name>
  <files>
    src/pages/blog/[slug].astro
    src/pages/open-graph/[...slug].png.ts
  </files>
  <action>
    Modify the getStaticPaths filter in BOTH files to exclude posts where externalUrl is set.

    **In src/pages/blog/[slug].astro:**
    Change the getCollection filter from:
    ```
    return import.meta.env.PROD ? data.draft !== true : true;
    ```
    To:
    ```
    const isPublished = import.meta.env.PROD ? data.draft !== true : true;
    return isPublished && !data.externalUrl;
    ```
    This ensures external posts NEVER generate detail pages (not even in dev mode).

    **In src/pages/open-graph/[...slug].png.ts:**
    Apply the identical filter change to getStaticPaths:
    ```
    const isPublished = import.meta.env.PROD ? data.draft !== true : true;
    return isPublished && !data.externalUrl;
    ```
    This ensures no OG images are generated for external posts.

    Do NOT modify any other part of these files -- only the getCollection filter callback.
  </action>
  <verify>
    Run `npx astro build` and inspect the build output. Verify:
    1. Only 1 blog detail page is generated (building-kubernetes-observability-stack), not 11
    2. No routes containing "ext-" appear in the build output
    3. Build completes with zero errors

    Check the dist output: `find dist -path "*/blog/ext-*" -type f` should return nothing. `find dist -path "*/open-graph/blog/ext-*" -type f` should return nothing.
  </verify>
  <done>
    getStaticPaths in both [slug].astro and [...slug].png.ts filters out external posts. Build output contains zero /blog/ext-* pages and zero /open-graph/blog/ext-* images.
  </done>
</task>

</tasks>

<verification>
1. `ls src/data/blog/ext-*.md | wc -l` returns 10
2. `npx astro build` completes with zero errors
3. Build output shows only 1 blog detail page route (not 11)
4. `find dist -path "*/blog/ext-*"` returns empty
5. `find dist -path "*/open-graph/blog/ext-*"` returns empty
</verification>

<success_criteria>
- 10 external blog post files exist with valid frontmatter (title, description, publishedDate, tags, externalUrl, source)
- Blog schema validation passes for all 10 files during build
- No /blog/ext-* detail pages in build output
- No /open-graph/blog/ext-* images in build output
- Existing local blog post (building-kubernetes-observability-stack) still generates its detail page and OG image
</success_criteria>

<output>
After completion, create `.planning/phases/09-external-blog-integration/09-01-SUMMARY.md`
</output>
