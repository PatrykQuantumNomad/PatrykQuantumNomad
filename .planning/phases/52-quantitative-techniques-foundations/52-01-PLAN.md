---
phase: 52-quantitative-techniques-foundations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/eda/quantitative-content.ts
  - src/pages/eda/quantitative/[slug].astro
autonomous: true
requirements: [QUANT-01, QUANT-02, QUANT-03, QUANT-04, QUANT-05, QUANT-06, QUANT-07, QUANT-08, QUANT-09, QUANT-10, QUANT-11, QUANT-12, QUANT-13, QUANT-14, QUANT-15, QUANT-16, QUANT-17, QUANT-18, SITE-13]

must_haves:
  truths:
    - "All 18 quantitative technique pages render at /eda/quantitative/{slug}/"
    - "KaTeX formulas display correctly as typeset math, not raw LaTeX"
    - "Python code examples on 8 pages have syntax highlighting and copy buttons"
    - "Each page has 200+ words of explanatory prose with NIST section references"
    - "Related technique links navigate to correct graphical and quantitative pages"
  artifacts:
    - path: "src/lib/eda/quantitative-content.ts"
      provides: "Prose, KaTeX formulas, and Python code for all 18 quantitative techniques"
      exports: ["getQuantitativeContent", "QuantitativeContent"]
    - path: "src/pages/eda/quantitative/[slug].astro"
      provides: "Dynamic route generating 18 quantitative technique pages"
      contains: "getStaticPaths"
  key_links:
    - from: "src/pages/eda/quantitative/[slug].astro"
      to: "src/lib/eda/quantitative-content.ts"
      via: "getQuantitativeContent(slug)"
      pattern: "getQuantitativeContent"
    - from: "src/pages/eda/quantitative/[slug].astro"
      to: "src/components/eda/TechniquePage.astro"
      via: "TechniquePage component with useKatex=true"
      pattern: "useKatex.*true"
    - from: "src/pages/eda/quantitative/[slug].astro"
      to: "edaTechniques collection"
      via: "getCollection filtered by category=quantitative"
      pattern: "category.*quantitative"
---

<objective>
Create all 18 quantitative technique pages with KaTeX formulas, Python code examples, and NIST-referenced prose content.

Purpose: Delivers the quantitative analysis section of the EDA Visual Encyclopedia -- statistical tests, measures, and methods with properly typeset formulas and runnable Python examples.
Output: quantitative-content.ts content module + [slug].astro dynamic route producing 18 live pages.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/52-quantitative-techniques-foundations/52-RESEARCH.md
@.planning/phases/51-graphical-technique-pages/51-03-SUMMARY.md
@src/pages/eda/techniques/[slug].astro
@src/lib/eda/technique-content.ts
@src/lib/eda/routes.ts
@src/components/eda/TechniquePage.astro
@src/layouts/EDALayout.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create quantitative-content.ts with prose, formulas, and Python code for all 18 techniques</name>
  <files>src/lib/eda/quantitative-content.ts</files>
  <action>
Create a TypeScript content module following the technique-content.ts pattern from Phase 51 but extended for quantitative pages. Define:

```typescript
export interface QuantitativeContent {
  definition: string;       // 2-3 sentences: what this technique is
  purpose: string;          // 2-3 sentences: when and why to use it
  formulas: Array<{
    label: string;          // e.g. "Sample Mean", "t-Statistic"
    tex: string;            // KaTeX display-mode formula (use String.raw)
    explanation: string;    // 1-2 sentences explaining the formula
  }>;
  interpretation: string;   // 3-5 sentences: how to interpret results
  assumptions: string;      // 2-3 sentences: assumptions and limitations
  pythonCode?: string;      // Python code example (for 8 pages that need it)
  nistReference: string;    // NIST section reference
}
```

Create entries for all 18 slugs from techniques.json (category: 'quantitative'):
1. measures-of-location (QUANT-01): mean, median, mode formulas
2. confidence-limits (QUANT-02): confidence interval with t-distribution
3. two-sample-t-test (QUANT-03): t-statistic, pooled SD + Python scipy.stats.ttest_ind
4. one-factor-anova (QUANT-04): F-statistic, SS decomposition + Python scipy.stats.f_oneway
5. multi-factor-anova (QUANT-05): F-statistics for multiple factors, interaction terms
6. measures-of-scale (QUANT-06): variance, standard deviation, range, IQR formulas
7. bartletts-test (QUANT-07): Bartlett chi-square statistic + Python scipy.stats.bartlett
8. chi-square-sd-test (QUANT-08): chi-square test statistic for variance
9. f-test (QUANT-09): F = s1^2/s2^2 + Python scipy.stats.f.sf for p-value
10. levene-test (QUANT-10): Levene W statistic + Python scipy.stats.levene
11. skewness-kurtosis (QUANT-11): g1 (skewness), g2 (kurtosis) formulas
12. autocorrelation (QUANT-12): autocorrelation coefficient r_k formula
13. runs-test (QUANT-13): expected runs, z-statistic formulas
14. anderson-darling (QUANT-14): A^2 statistic + Python scipy.stats.anderson
15. chi-square-gof (QUANT-15): chi-square goodness-of-fit statistic
16. kolmogorov-smirnov (QUANT-16): D_n supremum statistic + Python scipy.stats.kstest
17. grubbs-test (QUANT-17): Grubbs G statistic + Python numpy manual computation
18. yates-analysis (QUANT-18): Yates algorithm contrast and effect formulas

CRITICAL FORMULA GUIDELINES:
- Use String.raw template literals for ALL tex strings to prevent backslash escaping issues
- Example: tex: String.raw`\bar{x} = \frac{1}{n}\sum_{i=1}^{n} x_i`
- Each technique needs 2-5 formulas covering the test statistic and key related expressions
- Formulas must be NIST-faithful (reference Section 1.3.5 for quantitative techniques)

PYTHON CODE GUIDELINES (8 pages: QUANT-03, 04, 07, 09, 10, 14, 16, 17):
- Use scipy.stats for all tests with built-in functions
- Include proper imports: `import numpy as np` and `from scipy import stats`
- Include sample data arrays and print statements showing output
- For Grubbs' test (no scipy builtin): implement manually with numpy
- All code must be syntactically valid and use correct scipy function signatures
- Store as multi-line template strings in the pythonCode field

PROSE GUIDELINES:
- Each definition: 2-3 sentences, 40-60 words
- Each purpose: 2-3 sentences, 60-100 words
- Each interpretation: 3-5 sentences, 100-150 words
- Each assumptions: 2-3 sentences, 40-80 words
- Total per entry: 200+ words minimum

Export function: `export function getQuantitativeContent(slug: string): QuantitativeContent | undefined`
  </action>
  <verify>
    <automated>cd /Users/patrykattc/work/git/PatrykQuantumNomad && node -e "
      const m = await import('./src/lib/eda/quantitative-content.ts');
      const slugs = ['measures-of-location','confidence-limits','two-sample-t-test','one-factor-anova','multi-factor-anova','measures-of-scale','bartletts-test','chi-square-sd-test','f-test','levene-test','skewness-kurtosis','autocorrelation','runs-test','anderson-darling','chi-square-gof','kolmogorov-smirnov','grubbs-test','yates-analysis'];
      let ok = true;
      for (const s of slugs) {
        const c = m.getQuantitativeContent(s);
        if (!c) { console.error('MISSING: ' + s); ok = false; continue; }
        if (!c.formulas?.length) { console.error('NO FORMULAS: ' + s); ok = false; }
        if (!c.definition || !c.purpose || !c.interpretation || !c.assumptions) { console.error('MISSING PROSE: ' + s); ok = false; }
      }
      const withCode = ['two-sample-t-test','one-factor-anova','bartletts-test','f-test','levene-test','anderson-darling','kolmogorov-smirnov','grubbs-test'];
      for (const s of withCode) {
        const c = m.getQuantitativeContent(s);
        if (!c?.pythonCode) { console.error('MISSING PYTHON: ' + s); ok = false; }
      }
      console.log(ok ? 'ALL 18 ENTRIES VALID' : 'VALIDATION FAILED');
      process.exit(ok ? 0 : 1);
    " --input-type=module</automated>
  </verify>
  <done>All 18 quantitative techniques have complete prose (200+ words each), KaTeX formula arrays with String.raw tex strings, Python code for 8 applicable pages, and NIST section references.</done>
</task>

<task type="auto">
  <name>Task 2: Create [slug].astro dynamic route rendering 18 quantitative pages with KaTeX and Python code</name>
  <files>src/pages/eda/quantitative/[slug].astro</files>
  <action>
Create the dynamic route file mirroring src/pages/eda/techniques/[slug].astro pattern but adapted for quantitative content. Key differences from graphical route:

1. **getStaticPaths:** Filter edaTechniques collection by `category === 'quantitative'` (not 'graphical'). Build allTechMap including BOTH graphical and quantitative for cross-category related links (same pattern as Phase 51).

2. **KaTeX rendering:** Since this is a .astro file, remark-math will NOT process template expressions. Use the `katex` npm package (available as transitive dep of rehype-katex) to render formulas at build time:
```typescript
import katex from 'katex';
// In frontmatter, for each formula:
const renderedFormulas = content.formulas.map(f => ({
  ...f,
  html: katex.renderToString(f.tex, { displayMode: true, throwOnError: false }),
}));
```
Then render with `set:html={formula.html}` in the template.

3. **Python code blocks:** Use the Astro `Code` component from `astro:components` for syntax-highlighted code with copy button support:
```typescript
import { Code } from 'astro:components';
// In template:
<Code code={content.pythonCode} lang="python" />
```
This leverages astro-expressive-code which is already configured.

4. **TechniquePage usage:** Pass `useKatex={true}` and `category="Quantitative Techniques"`. Use the formula slot for rendered KaTeX HTML and the code slot for Python examples.

5. **Template structure:**
- Fragment slot="description": definition, purpose, interpretation, assumptions sections (same layout as graphical)
- Fragment slot="formula": rendered KaTeX formulas with labels and explanations
- Fragment slot="code": Python code block (only if pythonCode exists)
- NIST reference at bottom of description

6. **BreadcrumbJsonLd:** Uses `/eda/quantitative/{slug}/` URL pattern via the slug prop on TechniquePage.

IMPORTANT: The category in BreadcrumbJsonLd within TechniquePage.astro uses categorySlug = category.toLowerCase().replace(/\s+/g, '-') which produces "quantitative-techniques". But the actual route prefix is /eda/quantitative/. The BreadcrumbJsonLd URL for the technique itself uses the slug prop, which is correct. The category breadcrumb URL will point to /eda/quantitative-techniques/ which doesn't exist yet -- this is acceptable for now and will be fixed in Phase 55 site integration.
  </action>
  <verify>
    <automated>cd /Users/patrykattc/work/git/PatrykQuantumNomad && npx astro build 2>&1 | tail -5</automated>
    <manual>Verify build succeeds and page count increases by 18. Spot-check /eda/quantitative/two-sample-t-test/ in dev server for KaTeX rendering and Python code block with copy button.</manual>
  </verify>
  <done>All 18 quantitative technique pages build successfully at /eda/quantitative/{slug}/ with typeset KaTeX formulas (not raw LaTeX), Python code blocks with syntax highlighting and copy buttons on 8 pages, and related technique cross-links to both graphical and quantitative pages.</done>
</task>

</tasks>

<verification>
1. `npx astro build` succeeds without errors
2. Page count increases by 18 from baseline
3. Spot-check at least 3 quantitative pages for correct KaTeX rendering
4. Verify Python code blocks have copy buttons via astro-expressive-code
5. Verify related technique links resolve correctly across categories
</verification>

<success_criteria>
- 18 quantitative technique pages live at /eda/quantitative/{slug}/
- KaTeX formulas render as typeset math (not raw $$...$$ text)
- 8 pages have Python code examples with syntax highlighting and copy buttons
- Each page has 200+ words of prose content
- Related technique links work across graphical and quantitative categories
</success_criteria>

<output>
After completion, create `.planning/phases/52-quantitative-techniques-foundations/52-01-SUMMARY.md`
</output>
