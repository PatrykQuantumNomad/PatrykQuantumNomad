---
phase: 21-seo-launch-readiness
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Header.astro
  - src/components/BeautyIndexJsonLd.astro
  - src/pages/beauty-index/index.astro
  - src/pages/beauty-index/[slug].astro
  - src/pages/beauty-index/code/index.astro
autonomous: true
requirements: [SEO-01, SEO-02, SEO-03, SEO-05]

must_haves:
  truths:
    - "Site header navigation includes a 'Beauty Index' link between Blog and Projects"
    - "Overview page includes Dataset+ItemList JSON-LD structured data with all 25 languages"
    - "All 3 Beauty Index page templates have BreadcrumbJsonLd with correct hierarchy"
    - "All 3 Beauty Index page templates have visible breadcrumb navigation"
    - "Radar charts on detail pages have sr-only data alternatives for screen readers"
    - "Bar chart on overview page has descriptive aria-label with score range"
    - "All Beauty Index pages appear in the sitemap after build"
  artifacts:
    - path: "src/components/Header.astro"
      provides: "Beauty Index nav link in navLinks array"
      contains: "Beauty Index"
    - path: "src/components/BeautyIndexJsonLd.astro"
      provides: "Dataset + ItemList JSON-LD for overview page"
      exports: []
    - path: "src/pages/beauty-index/index.astro"
      provides: "BreadcrumbJsonLd + BeautyIndexJsonLd + visual breadcrumbs + sr-only bar chart data"
      contains: "BreadcrumbJsonLd"
    - path: "src/pages/beauty-index/[slug].astro"
      provides: "BreadcrumbJsonLd + visual breadcrumbs + sr-only radar chart data"
      contains: "BreadcrumbJsonLd"
    - path: "src/pages/beauty-index/code/index.astro"
      provides: "BreadcrumbJsonLd + visual breadcrumbs"
      contains: "BreadcrumbJsonLd"
  key_links:
    - from: "src/components/Header.astro"
      to: "/beauty-index/"
      via: "navLinks array entry"
      pattern: "href.*beauty-index"
    - from: "src/pages/beauty-index/index.astro"
      to: "src/components/BeautyIndexJsonLd.astro"
      via: "component import and render"
      pattern: "BeautyIndexJsonLd"
    - from: "src/pages/beauty-index/index.astro"
      to: "src/components/BreadcrumbJsonLd.astro"
      via: "component import with crumbs prop"
      pattern: "BreadcrumbJsonLd.*crumbs"
---

<objective>
Add Beauty Index to site navigation, create structured data for search engines, add breadcrumb navigation to all Beauty Index pages, add screen reader accessible alternatives for chart data, and verify sitemap inclusion.

Purpose: Make the Beauty Index discoverable via site navigation and search engines, with proper structured data (Dataset/ItemList JSON-LD, BreadcrumbList JSON-LD) and accessible chart alternatives for screen readers.
Output: Navigation link, BeautyIndexJsonLd component, breadcrumbs (JSON-LD + visual) on 3 page templates, sr-only chart data, sitemap verification.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-seo-launch-readiness/21-RESEARCH.md
@src/components/Header.astro
@src/components/BreadcrumbJsonLd.astro
@src/components/ProjectsJsonLd.astro
@src/pages/beauty-index/index.astro
@src/pages/beauty-index/[slug].astro
@src/pages/beauty-index/code/index.astro
@src/components/beauty-index/RadarChart.astro
@src/components/beauty-index/RankingBarChart.astro
@src/lib/beauty-index/dimensions.ts
@src/lib/beauty-index/schema.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add navigation link and create BeautyIndexJsonLd component</name>
  <files>src/components/Header.astro, src/components/BeautyIndexJsonLd.astro</files>
  <action>
  1. In `src/components/Header.astro`, add a Beauty Index entry to the `navLinks` array. Place it after Blog and before Projects:
     ```
     { href: '/beauty-index/', label: 'Beauty Index' },
     ```
     The final order should be: Home, Blog, Beauty Index, Projects, About, Contact. The existing `isActive` logic (`currentPath.startsWith(link.href)`) already handles sub-page highlighting for paths like `/beauty-index/python/`.

  2. Create `src/components/BeautyIndexJsonLd.astro` following the existing `ProjectsJsonLd.astro` pattern. The component accepts `languages: Language[]` as a prop. It should:
     - Import `{ type Language, totalScore }` from `../lib/beauty-index/schema`
     - Sort languages by totalScore descending
     - Build a JSON-LD object with:
       - `@type: "Dataset"`
       - `name: "The Beauty Index"`
       - `description: "Ranking 25 programming languages across 6 aesthetic dimensions: Aesthetic Geometry, Mathematical Elegance, Linguistic Clarity, Practitioner Happiness, Organic Habitability, and Conceptual Integrity."`
       - `url: "https://patrykgolabek.dev/beauty-index/"`
       - `creator` referencing `@id: "https://patrykgolabek.dev/#person"` (matching PersonJsonLd)
       - `keywords` array: "programming languages", "code aesthetics", "language ranking", "software aesthetics", "beauty index"
       - `variableMeasured` array listing the 6 dimension names
       - `measurementTechnique: "Editorial scoring: each dimension rated 1-10 by expert judgment"`
       - `mainEntity` as an `ItemList` with `itemListOrder: "https://schema.org/ItemListOrderDescending"`, `numberOfItems`, and `itemListElement` mapping sorted languages to `ListItem` entries with `position`, `name`, and `url` (absolute: `https://patrykgolabek.dev/beauty-index/${lang.id}/`)
     - Render via `<script type="application/ld+json" set:html={JSON.stringify(schema)} />`
  </action>
  <verify>Run `npx astro check` -- no type errors. Visually confirm BeautyIndexJsonLd.astro exists with correct structure.</verify>
  <done>Header.astro has 6 nav links with Beauty Index between Blog and Projects. BeautyIndexJsonLd.astro component exists and compiles without errors.</done>
</task>

<task type="auto">
  <name>Task 2: Add breadcrumbs, structured data, and accessible chart alternatives to all Beauty Index pages</name>
  <files>src/pages/beauty-index/index.astro, src/pages/beauty-index/[slug].astro, src/pages/beauty-index/code/index.astro</files>
  <action>
  Import `BreadcrumbJsonLd` and `BeautyIndexJsonLd` (overview only) into the 3 Beauty Index page templates. Also import `DIMENSIONS` from `../../lib/beauty-index/dimensions` where needed for sr-only data.

  **Overview page (`src/pages/beauty-index/index.astro`):**
  1. Add imports: `BreadcrumbJsonLd`, `BeautyIndexJsonLd`, `DIMENSIONS`
  2. Inside `<Layout>`, before the hero section, add:
     - `<BreadcrumbJsonLd crumbs={[{ name: "Home", url: "https://patrykgolabek.dev/" }, { name: "Beauty Index", url: "https://patrykgolabek.dev/beauty-index/" }]} />`
     - `<BeautyIndexJsonLd languages={sorted} />`
  3. Add visual breadcrumb nav above the h1 in the hero section:
     ```
     <nav aria-label="Breadcrumb" class="text-sm text-[var(--color-text-secondary)] mb-4">
       <ol class="flex items-center gap-1 justify-center">
         <li><a href="/" class="hover:text-[var(--color-accent)] transition-colors">Home</a></li>
         <li aria-hidden="true" class="mx-1">/</li>
         <li aria-current="page">Beauty Index</li>
       </ol>
     </nav>
     ```
  4. Enhance the RankingBarChart's aria-label. The bar chart is rendered inside a `<div>` wrapper. Add a more descriptive `aria-label` on that wrapper or add it to the RankingBarChart component call context. The simplest approach: wrap the chart in a div with `role="img"` and a descriptive `aria-label`:
     ```
     <div role="img" aria-label={`Bar chart ranking 25 programming languages by total beauty score, from ${sorted[0].name} at ${totalScore(sorted[0])} to ${sorted[sorted.length - 1].name} at ${totalScore(sorted[sorted.length - 1])}`}>
       <RankingBarChart languages={sorted} />
     </div>
     ```
     Do NOT add a separate sr-only data table for the bar chart -- the ScoringTable immediately below already provides this data in accessible table format (per research recommendation).

  **Language detail page (`src/pages/beauty-index/[slug].astro`):**
  1. Add imports: `BreadcrumbJsonLd`, `DIMENSIONS`
  2. Inside `<Layout>`, before the `<article>`, add:
     - BreadcrumbJsonLd with 3-level hierarchy: Home > Beauty Index > {language.name}
     - Use absolute URLs: `https://patrykgolabek.dev/`, `https://patrykgolabek.dev/beauty-index/`, `https://patrykgolabek.dev/beauty-index/${language.id}/`
  3. Add visual breadcrumb nav at the start of the `<article>`, before the header:
     ```
     <nav aria-label="Breadcrumb" class="text-sm text-[var(--color-text-secondary)] mb-4">
       <ol class="flex items-center gap-1">
         <li><a href="/" class="hover:text-[var(--color-accent)] transition-colors">Home</a></li>
         <li aria-hidden="true" class="mx-1">/</li>
         <li><a href="/beauty-index/" class="hover:text-[var(--color-accent)] transition-colors">Beauty Index</a></li>
         <li aria-hidden="true" class="mx-1">/</li>
         <li aria-current="page">{language.name}</li>
       </ol>
     </nav>
     ```
  4. Add sr-only accessible data for the radar chart. Immediately after the `<RadarChart>` + `<ShareControls>` div, add a visually hidden description list:
     ```
     <div class="sr-only">
       <dl>
         {DIMENSIONS.map((dim) => (
           <>
             <dt>{dim.name}</dt>
             <dd>{language[dim.key]} out of 10</dd>
           </>
         ))}
         <dt>Total</dt>
         <dd>{total} out of 60</dd>
       </dl>
     </div>
     ```
     Note: Tailwind's `sr-only` class is already available in the project.

  **Code comparison page (`src/pages/beauty-index/code/index.astro`):**
  1. Add import: `BreadcrumbJsonLd`
  2. Inside `<Layout>`, before the hero section, add:
     - BreadcrumbJsonLd with 3-level hierarchy: Home > Beauty Index > Code Comparison
     - Use absolute URLs
  3. Add visual breadcrumb nav above the h1 in the hero section:
     ```
     <nav aria-label="Breadcrumb" class="text-sm text-[var(--color-text-secondary)] mb-4">
       <ol class="flex items-center gap-1 justify-center">
         <li><a href="/" class="hover:text-[var(--color-accent)] transition-colors">Home</a></li>
         <li aria-hidden="true" class="mx-1">/</li>
         <li><a href="/beauty-index/" class="hover:text-[var(--color-accent)] transition-colors">Beauty Index</a></li>
         <li aria-hidden="true" class="mx-1">/</li>
         <li aria-current="page">Code Comparison</li>
       </ol>
     </nav>
     ```
  </action>
  <verify>Run `npx astro build` -- zero errors. Inspect generated HTML for `/beauty-index/` and confirm JSON-LD script tags for Dataset/ItemList and BreadcrumbList are present. Confirm visual breadcrumbs render. Confirm sr-only dl elements exist in language detail page HTML.</verify>
  <done>All 3 Beauty Index page templates have BreadcrumbJsonLd, visual breadcrumbs, and the overview has BeautyIndexJsonLd. Language detail pages have sr-only radar chart data. Overview page has descriptive bar chart aria-label.</done>
</task>

<task type="auto">
  <name>Task 3: Build and verify sitemap includes all Beauty Index URLs</name>
  <files></files>
  <action>
  Run `npx astro build` and then verify the sitemap output:

  1. Run `npx astro build`
  2. Check the generated sitemap file(s) in `dist/` for Beauty Index URLs:
     - `grep "beauty-index" dist/sitemap-*.xml`
  3. Verify these URLs are present:
     - `https://patrykgolabek.dev/beauty-index/` (overview)
     - `https://patrykgolabek.dev/beauty-index/code/` (code comparison)
     - At least 25 language URLs like `https://patrykgolabek.dev/beauty-index/haskell/`
  4. Verify NO duplicate entries exist for any Beauty Index URL
  5. Do NOT add any entries to `customPages` in astro.config.mjs -- the `@astrojs/sitemap` integration auto-discovers all static routes

  This is a verification-only task. If sitemap verification passes, the task is complete. If any Beauty Index URLs are missing (which should not happen since they are statically generated), investigate the build output.
  </action>
  <verify>The command `grep -c "beauty-index" dist/sitemap-*.xml` returns 27 (25 languages + overview + code comparison). No duplicates.</verify>
  <done>All 27 Beauty Index URLs appear in the sitemap. No manual sitemap configuration was needed.</done>
</task>

</tasks>

<verification>
- `npx astro build` completes with zero errors
- Header navigation shows 6 links including "Beauty Index"
- Generated HTML for `/beauty-index/` contains:
  - `<script type="application/ld+json">` with `"@type": "Dataset"`
  - `<script type="application/ld+json">` with `"@type": "BreadcrumbList"`
  - Visual breadcrumb `<nav aria-label="Breadcrumb">`
- Generated HTML for `/beauty-index/python/` contains BreadcrumbList JSON-LD and sr-only dl
- Sitemap includes all 27 Beauty Index URLs
</verification>

<success_criteria>
- Beauty Index appears in site navigation between Blog and Projects
- Dataset/ItemList JSON-LD renders on overview page with all 25 languages
- BreadcrumbList JSON-LD renders on all 3 page types with correct hierarchy
- Visual breadcrumbs visible on all Beauty Index pages
- Screen reader accessible data alternatives exist for radar charts on detail pages
- All Beauty Index URLs present in sitemap (27 total)
</success_criteria>

<output>
After completion, create `.planning/phases/21-seo-launch-readiness/21-01-SUMMARY.md`
</output>
