---
phase: 21-seo-launch-readiness
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/pages/index.astro
  - src/data/blog/building-kubernetes-observability-stack.mdx
  - src/components/beauty-index/ScoringTable.astro
autonomous: true
requirements: [SEO-04, SEO-07]

must_haves:
  truths:
    - "Homepage contains a visible link to the Beauty Index section"
    - "At least 2 blog posts link to Beauty Index pages (the-beauty-index.mdx already counts as 1)"
    - "ScoringTable sort headers are keyboard-accessible via button elements"
    - "Active sort column has aria-sort attribute (ascending or descending)"
    - "Sort changes are announced via aria-live region"
  artifacts:
    - path: "src/pages/index.astro"
      provides: "Beauty Index callout section on homepage"
      contains: "beauty-index"
    - path: "src/data/blog/building-kubernetes-observability-stack.mdx"
      provides: "Cross-link to Beauty Index from existing blog post"
      contains: "beauty-index"
    - path: "src/components/beauty-index/ScoringTable.astro"
      provides: "Accessible sort with button elements, aria-sort, and live region"
      contains: "aria-sort"
  key_links:
    - from: "src/pages/index.astro"
      to: "/beauty-index/"
      via: "anchor tag in Beauty Index callout section"
      pattern: "href.*beauty-index"
    - from: "src/data/blog/building-kubernetes-observability-stack.mdx"
      to: "/beauty-index/"
      via: "inline markdown link"
      pattern: "beauty-index"
    - from: "src/components/beauty-index/ScoringTable.astro"
      to: "aria-live region"
      via: "JavaScript sort handler updating live region text"
      pattern: "aria-live.*polite"
---

<objective>
Add internal cross-links from the homepage and an existing blog post to Beauty Index pages, and fix keyboard accessibility for the ScoringTable sort functionality.

Purpose: Strengthen internal linking for SEO (homepage and blog linking to Beauty Index), and ensure WCAG 2.1 AA compliance for the scoring table's sort controls (keyboard navigation, screen reader announcements).
Output: Homepage Beauty Index section, blog post cross-link, accessible ScoringTable with button-based sort headers.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-seo-launch-readiness/21-RESEARCH.md
@src/pages/index.astro
@src/data/blog/building-kubernetes-observability-stack.mdx
@src/components/beauty-index/ScoringTable.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Beauty Index cross-links to homepage and blog post</name>
  <files>src/pages/index.astro, src/data/blog/building-kubernetes-observability-stack.mdx</files>
  <action>
  **Homepage (`src/pages/index.astro`):**
  Add a Beauty Index callout section between the "What I Build" section and the gradient divider that precedes "Latest Writing". This is a new `<section>` element that highlights the Beauty Index as the site's distinctive content pillar.

  Insert after the closing `</section>` of "What I Build" (line ~152) and before the first `<div class="gradient-divider">` (line ~154):

  ```astro
  {/* Beauty Index Callout */}
  <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-8" data-reveal>
    <a href="/beauty-index/" class="block card-hover p-6 rounded-lg border border-[var(--color-border)]" data-tilt>
      <div class="flex flex-col sm:flex-row sm:items-center gap-4">
        <div class="flex-1">
          <h3 class="text-lg font-heading font-bold">The Beauty Index</h3>
          <p class="text-sm text-[var(--color-text-secondary)] mt-2">
            25 programming languages ranked across 6 aesthetic dimensions. From Haskell's mathematical purity to COBOL's industrial grit.
          </p>
        </div>
        <span class="text-[var(--color-accent)] text-sm font-medium whitespace-nowrap">
          Explore rankings &rarr;
        </span>
      </div>
    </a>
  </section>
  ```

  **Blog post (`src/data/blog/building-kubernetes-observability-stack.mdx`):**
  Add a "Related" callout at the end of the blog post (before the final closing). Append this after the last content section:

  ```mdx

  ---

  **Related:** Interested in how programming languages compare on aesthetics and code beauty? Check out the [Beauty Index](/beauty-index/) where 25 languages are scored across 6 dimensions -- from visual geometry to conceptual integrity.
  ```

  This gives us 2 blog posts linking to Beauty Index: `the-beauty-index.mdx` (already exists from Phase 20) and `building-kubernetes-observability-stack.mdx` (added here).
  </action>
  <verify>Run `npx astro build` -- zero errors. Inspect generated HTML for homepage to confirm Beauty Index section exists with link to `/beauty-index/`. Inspect generated blog post HTML for cross-link.</verify>
  <done>Homepage contains a Beauty Index callout section with link. building-kubernetes-observability-stack blog post contains a cross-link to /beauty-index/. Combined with the-beauty-index.mdx, that is 2 blog posts linking to Beauty Index.</done>
</task>

<task type="auto">
  <name>Task 2: Make ScoringTable sort keyboard-accessible with ARIA attributes</name>
  <files>src/components/beauty-index/ScoringTable.astro</files>
  <action>
  Refactor `ScoringTable.astro` to make the sort functionality keyboard-accessible per WCAG 2.1 AA and Adrian Roselli's sortable table pattern.

  **HTML changes (thead section):**
  1. Replace each `<th>` that has `data-sort` with a `<th scope="col">` containing a `<button>` element. Move the `data-sort` and `data-type` attributes to the button. Remove `cursor-pointer select-none` from `<th>` (the button handles interactivity). The button gets the sort styling classes instead.

  Example for the Rank column (currently the default sort-desc):
  ```html
  <th scope="col">
    <button
      type="button"
      class="sort-btn inline-flex items-center gap-0.5 px-2 py-2 w-full text-left cursor-pointer select-none bg-transparent border-none font-inherit text-inherit"
      data-sort="rank"
      data-type="number"
    >
      Rank<span class="sort-indicator" aria-hidden="true"></span>
    </button>
  </th>
  ```

  For the default sorted column (Rank, descending), add `aria-sort="descending"` to its `<th>`:
  ```html
  <th scope="col" aria-sort="descending">
  ```

  Do the same transformation for ALL sortable `<th>` elements: Language, each dimension (using `dim.symbol` with `title={dim.name}` on the button), and Total. Only the Rank column gets the initial `aria-sort="descending"` since it's the default sort. Other `<th>` elements do NOT get `aria-sort` (omit entirely per best practice -- do not use `aria-sort="none"`).

  2. Add a visually hidden live region after the `</table>` closing tag, inside the overflow wrapper:
  ```html
  <div id="sort-status" class="sr-only" aria-live="polite" aria-atomic="true"></div>
  ```

  **CSS changes:**
  Update the style selectors to target `.sort-btn` descendants instead of `th` directly:
  ```css
  .sort-btn .sort-indicator::after {
    content: '';
    display: inline-block;
    margin-left: 4px;
    opacity: 0.3;
  }
  th.sort-asc .sort-btn .sort-indicator::after {
    content: '\25B2';
    opacity: 1;
  }
  th.sort-desc .sort-btn .sort-indicator::after {
    content: '\25BC';
    opacity: 1;
  }
  ```

  Also add focus styles for the sort buttons:
  ```css
  .sort-btn:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: -2px;
    border-radius: 4px;
  }
  ```

  **JavaScript changes:**
  Update the inline `<script>` to:
  1. Query `button[data-sort]` instead of `th[data-sort]`
  2. On sort, find the parent `<th>` via `button.closest('th')`
  3. Clear `aria-sort` from ALL `<th>` elements (use `removeAttribute`)
  4. Set `aria-sort` on the active `<th>` to `"ascending"` or `"descending"`
  5. Keep the existing sort-asc/sort-desc class toggling on the `<th>` (for CSS indicator styling)
  6. After sorting, update the live region:
     ```javascript
     const liveRegion = document.getElementById('sort-status');
     if (liveRegion) {
       const label = button.getAttribute('title') || button.textContent?.trim() || key;
       liveRegion.textContent = `Table sorted by ${label}, ${newDir === 'asc' ? 'ascending' : 'descending'}`;
     }
     ```

  The button approach means sort headers are:
  - Focusable via Tab key (buttons are natively focusable)
  - Activatable via Enter/Space (native button behavior)
  - Announced by screen readers as buttons with labels
  - Show focus indicators when navigated via keyboard
  </action>
  <verify>Run `npx astro build` -- zero errors. Inspect generated HTML for the scoring table: each `<th>` should contain a `<button>` with `data-sort`, the Rank th should have `aria-sort="descending"`, and a `div#sort-status` with `aria-live="polite"` should exist after the table.</verify>
  <done>ScoringTable headers use button elements for sort triggers. Active sort column has aria-sort attribute. Sort changes announced via aria-live region. Focus-visible styles applied to sort buttons. Keyboard users can Tab to sort controls and activate with Enter/Space.</done>
</task>

</tasks>

<verification>
- `npx astro build` completes with zero errors
- Homepage HTML contains a link to `/beauty-index/` in the callout section
- Blog post `building-kubernetes-observability-stack` HTML contains a link to `/beauty-index/`
- ScoringTable generated HTML contains `<button>` elements inside `<th>` headers
- ScoringTable has `aria-sort="descending"` on the Rank column th
- A `div#sort-status` with `aria-live="polite"` exists after the table
</verification>

<success_criteria>
- Homepage has a visible Beauty Index callout section with link
- 2 blog posts link to Beauty Index (the-beauty-index.mdx + building-kubernetes-observability-stack.mdx)
- ScoringTable sort is fully keyboard-accessible (Tab + Enter/Space)
- Active sort state communicated via aria-sort attribute
- Sort changes announced to screen readers via live region
</success_criteria>

<output>
After completion, create `.planning/phases/21-seo-launch-readiness/21-02-SUMMARY.md`
</output>
