---
phase: 01-project-scaffold-deployment-pipeline
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - astro.config.mjs
  - tsconfig.json
  - src/pages/index.astro
  - src/layouts/Layout.astro
  - public/CNAME
  - public/robots.txt
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Running `npm run build` in the project root produces a `dist/` directory with static HTML"
    - "The generated dist/ contains a CNAME file with 'patrykgolabek.dev'"
    - "The generated dist/ contains a robots.txt pointing to sitemap-index.xml"
    - "astro.config.mjs has site set to 'https://patrykgolabek.dev' and output set to 'static'"
  artifacts:
    - path: "package.json"
      provides: "Astro project definition with dependencies"
      contains: "astro"
    - path: "astro.config.mjs"
      provides: "Astro configuration with site URL and static output"
      contains: "patrykgolabek.dev"
    - path: "src/pages/index.astro"
      provides: "Minimal homepage that proves the site renders"
    - path: "public/CNAME"
      provides: "Custom domain persistence across GitHub Pages deploys"
      contains: "patrykgolabek.dev"
    - path: "public/robots.txt"
      provides: "Search engine crawl directives"
      contains: "sitemap-index.xml"
    - path: ".gitignore"
      provides: "Prevents node_modules and dist from being committed"
      contains: "node_modules"
  key_links:
    - from: "astro.config.mjs"
      to: "package.json"
      via: "astro dependency"
      pattern: "defineConfig"
    - from: "public/CNAME"
      to: "dist/CNAME"
      via: "Astro copies public/ to dist/ at build time"
---

<objective>
Scaffold a fresh Astro project from scratch with all configuration needed for GitHub Pages deployment at patrykgolabek.dev.

Purpose: Establish the foundational Astro project that all subsequent phases build upon. The project must build cleanly and include the custom domain CNAME and robots.txt that persist across deployments.

Output: A buildable Astro project with package.json, astro.config.mjs, minimal index page, CNAME, robots.txt, and .gitignore.
</objective>

<execution_context>
@/Users/patrykattc/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrykattc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Astro project and configure for GitHub Pages</name>
  <files>
    package.json
    astro.config.mjs
    tsconfig.json
    src/pages/index.astro
    src/layouts/Layout.astro
    .gitignore
  </files>
  <action>
Create the Astro project FROM SCRATCH (no starter template, no `npm create astro`). This means manually creating each file:

1. **package.json** — Create with:
   - `name`: `patrykgolabek-dev`
   - `type`: `module`
   - `scripts`: `dev` (`astro dev`), `build` (`astro build`), `preview` (`astro preview`)
   - `dependencies`: `astro` (latest stable, currently ^5.x)
   - Do NOT add @astrojs/sitemap, @astrojs/rss, @astrojs/mdx yet — those come in later phases

2. **astro.config.mjs** — Create with:
   ```js
   import { defineConfig } from 'astro/config';

   export default defineConfig({
     site: 'https://patrykgolabek.dev',
     output: 'static',
   });
   ```
   - `site` MUST be `'https://patrykgolabek.dev'` (requirement INFRA-04)
   - `output` MUST be `'static'` (requirement INFRA-04)
   - Do NOT set `base` — user-level GitHub Pages site needs no base path

3. **tsconfig.json** — Create with Astro's recommended config:
   ```json
   {
     "extends": "astro/tsconfigs/strict"
   }
   ```

4. **src/layouts/Layout.astro** — Create a minimal HTML layout:
   - Full HTML5 document with `<!DOCTYPE html>`, `<html lang="en">`, `<head>`, `<body>`
   - Accept `title` prop (string)
   - Include `<meta charset="utf-8">`, `<meta name="viewport">`, `<title>` from prop
   - Use `<slot />` for body content

5. **src/pages/index.astro** — Create a minimal homepage:
   - Import and use the Layout component with title "Patryk Golabek — Cloud-Native Software Architect"
   - Display an `<h1>` with the same title text
   - Add a short `<p>` paragraph: "Portfolio coming soon. Built with Astro, deployed on GitHub Pages."
   - This is intentionally minimal — content comes in Phase 4

6. **.gitignore** — Create with:
   ```
   node_modules/
   dist/
   .astro/
   .DS_Store
   ```

7. Run `npm install` to generate package-lock.json and install dependencies.

8. Run `npm run build` to verify the project builds successfully.

IMPORTANT: Do NOT use `npm create astro@latest` or any interactive scaffold command. Create all files manually for full control.
  </action>
  <verify>
Run `npm run build` from the project root. Verify:
- Exit code is 0
- `dist/index.html` exists and contains "Patryk Golabek"
- `astro.config.mjs` contains `site: 'https://patrykgolabek.dev'`
- `astro.config.mjs` contains `output: 'static'`
  </verify>
  <done>
Astro project builds successfully with `npm run build`. The dist/ directory contains index.html. The astro.config.mjs has site and output configured per INFRA-04.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add CNAME, robots.txt for GitHub Pages custom domain</name>
  <files>
    public/CNAME
    public/robots.txt
  </files>
  <action>
Create the public/ directory files that Astro copies verbatim to dist/:

1. **public/CNAME** — Single line, no trailing newline:
   ```
   patrykgolabek.dev
   ```
   This file is CRITICAL — without it, GitHub Pages loses the custom domain on every deployment (requirement INFRA-02).

2. **public/robots.txt** — Standard crawl directives:
   ```
   User-agent: *
   Allow: /
   Sitemap: https://patrykgolabek.dev/sitemap-index.xml
   ```
   Note: Astro's @astrojs/sitemap generates `sitemap-index.xml` (not `sitemap.xml`). Point to this even though the sitemap integration isn't installed yet — it will be added in Phase 5.

3. Run `npm run build` again to verify both files appear in dist/.
  </action>
  <verify>
Run `npm run build` and confirm:
- `dist/CNAME` exists and contains exactly `patrykgolabek.dev`
- `dist/robots.txt` exists and contains `sitemap-index.xml`
  </verify>
  <done>
public/CNAME contains `patrykgolabek.dev` and public/robots.txt points to sitemap-index.xml. Both are copied to dist/ on build, satisfying INFRA-02.
  </done>
</task>

</tasks>

<verification>
Run these checks to verify the plan is complete:

1. `npm run build` exits with code 0
2. `dist/index.html` exists and contains page content
3. `dist/CNAME` contains `patrykgolabek.dev`
4. `dist/robots.txt` contains `sitemap-index.xml`
5. `grep -q "patrykgolabek.dev" astro.config.mjs` succeeds
6. `grep -q "'static'" astro.config.mjs` succeeds
7. `.gitignore` excludes node_modules/, dist/, .astro/
</verification>

<success_criteria>
- Astro project builds cleanly with `npm run build`
- astro.config.mjs has `site: 'https://patrykgolabek.dev'` and `output: 'static'` (INFRA-04)
- public/CNAME persists custom domain across deploys (INFRA-02)
- public/robots.txt ready for search engines
- Project is ready for GitHub Actions workflow (Plan 02)
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-scaffold-deployment-pipeline/01-01-SUMMARY.md`
</output>
