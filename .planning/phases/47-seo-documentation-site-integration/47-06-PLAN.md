---
phase: 47-seo-documentation-site-integration
plan: 06
type: execute
wave: 4
depends_on: ["47-03", "47-04", "47-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Full site builds without errors"
    - "67 rule pages generated in build output"
    - "Tool page, rule pages, blog post, and homepage all render correctly"
    - "All bidirectional links are functional (tool -> rules, rules -> tool, rules -> blog, blog -> rules)"
    - "JSON-LD structured data present on tool page"
    - "OG image renders at /open-graph/tools/k8s-analyzer.png"
    - "LLMs.txt includes K8s Manifest Analyzer entry"
    - "Sitemap includes tool page, rule pages, and blog post"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete build succeeds and perform UAT on all Phase 47 deliverables: 67 rule pages, tool page SEO, blog post, homepage integration, LLMs.txt, and sitemap inclusion.

Purpose: Final quality gate before marking Phase 47 and v1.7 complete.
Output: Verified build + UAT results.
</objective>

<execution_context>
@/Users/patrykattc/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrykattc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Full build verification</name>
  <files></files>
  <action>
Run the complete Astro build and verify:

1. `npm run build` completes without errors
2. Check build output for 67 rule pages: `ls dist/tools/k8s-analyzer/rules/ | wc -l` should show 67 directories
3. Check OG image was generated: `ls dist/open-graph/tools/k8s-analyzer.png` exists
4. Check blog post was built: `ls dist/blog/kubernetes-manifest-best-practices/` exists
5. Check sitemap includes K8s analyzer pages: `grep -c 'k8s-analyzer' dist/sitemap-0.xml` should return a count > 0 (tool page + 67 rule pages = 68+ entries)
6. Check LLMs.txt: `grep 'Kubernetes Manifest Analyzer' dist/llms.txt` should return the entry

If build fails, diagnose and fix the issue. Common failure modes:
- Type errors in new files (run `npx tsc --noEmit` first)
- Missing imports in [code].astro
- MDX compilation errors in blog post
- allDocumentedK8sRules not exporting 67 items
  </action>
  <verify>
`npm run build` exits with code 0. All build artifacts exist as described.
  </verify>
  <done>Full build succeeds with all 67 rule pages, OG image, blog post, and sitemap entries generated.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 47 deliverables: 67 rule documentation pages at /tools/k8s-analyzer/rules/[code]/, SoftwareApplication JSON-LD on tool page, OG image for social sharing, companion blog post with ~20 rule cross-links, homepage 3-tool card grid, and LLMs.txt integration.
  </what-built>
  <how-to-verify>
Run `npm run preview` and verify:

1. **Tool page** at http://localhost:4321/tools/k8s-analyzer/:
   - Page renders with the K8s Analyzer React component
   - Aside section shows links to rule documentation and blog post
   - View page source: confirm `<script type="application/ld+json">` contains "SoftwareApplication"
   - View page source: confirm og:image meta tag points to /open-graph/tools/k8s-analyzer.png

2. **Rule pages** -- check a few samples:
   - http://localhost:4321/tools/k8s-analyzer/rules/ka-c001/ (security with PSS Baseline tag + CIS ref)
   - http://localhost:4321/tools/k8s-analyzer/rules/ka-c002/ (security with PSS Restricted tag + CIS ref)
   - http://localhost:4321/tools/k8s-analyzer/rules/ka-s001/ (schema rule)
   - http://localhost:4321/tools/k8s-analyzer/rules/ka-r001/ (reliability rule)
   - http://localhost:4321/tools/k8s-analyzer/rules/ka-x001/ (cross-resource rule)
   - Each page: breadcrumb trail, severity/category badges, explanation, before/after code, related rules, footer links

3. **Blog post** at http://localhost:4321/blog/kubernetes-manifest-best-practices/:
   - Post renders with correct formatting
   - ~20 rule links are clickable and navigate to correct rule pages
   - Tool page link works

4. **Homepage** at http://localhost:4321/:
   - Tools section shows 3 cards in a responsive grid
   - K8s Manifest Analyzer card links to /tools/k8s-analyzer/

5. **OG image** at http://localhost:4321/open-graph/tools/k8s-analyzer.png:
   - Image renders (1200x630) with K8s-themed content

6. **LLMs.txt** at http://localhost:4321/llms.txt:
   - Contains "Kubernetes Manifest Analyzer" entry with URL, Rules, Blog fields

7. **QA-01: Lighthouse performance** (automated check):
   Run `npx lighthouse http://localhost:4321/tools/k8s-analyzer/ --output=json --chrome-flags="--headless" --quiet` and verify Performance, Accessibility, Best Practices, and SEO scores are all 90+. Also spot-check a rule page: `npx lighthouse http://localhost:4321/tools/k8s-analyzer/rules/ka-c001/ --output=json --chrome-flags="--headless" --quiet` -- scores 90+.

8. **QA-02: WCAG 2.1 AA accessibility**:
   - Tab through the tool page and 2 rule pages using only keyboard -- all interactive elements (links, buttons, code blocks) must be reachable and have visible focus indicators
   - Verify no Lighthouse accessibility violations flagged (score from step 7 should be 90+)
   - Check rule page headings follow h1 > h2 > h3 hierarchy (no skipped levels)

9. **QA-03: Responsive layout**:
   - Open http://localhost:4321/tools/k8s-analyzer/ at mobile viewport (375x667) -- no horizontal scroll, content stacks vertically
   - Open a rule page at tablet viewport (768x1024) -- layout adjusts, code blocks don't overflow
   - Open homepage at mobile viewport -- 3-tool card grid collapses to single column
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
1. Full build completes without errors
2. All 67 rule pages exist in build output
3. OG image exists in build output
4. Blog post exists in build output
5. Sitemap includes K8s analyzer pages
6. LLMs.txt includes K8s analyzer entry
7. Human verification confirms visual quality and functional links
</verification>

<success_criteria>
Complete Phase 47 passes build verification and human UAT. All requirements (DOCS-01 through DOCS-04, SITE-01 through SITE-09, CONTENT-01, CONTENT-02) are met and verified.
</success_criteria>

<output>
After completion, create `.planning/phases/47-seo-documentation-site-integration/47-06-SUMMARY.md`
</output>
