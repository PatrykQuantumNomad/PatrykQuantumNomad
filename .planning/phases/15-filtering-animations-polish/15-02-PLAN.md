---
phase: 15-filtering-animations-polish
plan: 02
type: execute
wave: 2
depends_on: ["15-01"]
files_modified:
  - src/styles/global.css
  - src/components/animations/FloatingOrbs.astro
  - src/components/ProjectCard.astro
autonomous: true

must_haves:
  truths:
    - "Mouse cursor creates a radial gradient glow that follows movement across card surfaces"
    - "Glow color matches the card's category tint (violet for AI, blue for K8s, emerald for Platform, amber for Security)"
    - "Floating orbs appear behind each category section with category-tinted colors and scroll parallax"
    - "CTA buttons (Source, Live Site) pull toward cursor on hover approach"
    - "All new animations are disabled when prefers-reduced-motion is enabled"
    - "Mouse glow does not appear on touch devices"
  artifacts:
    - path: "src/styles/global.css"
      provides: "Mouse-tracking glow CSS via ::after pseudo-element, touch device safeguard, reduced-motion rules"
      contains: "data-card-item.*::after"
    - path: "src/components/animations/FloatingOrbs.astro"
      provides: "Category section orb configurations for ai-ml, kubernetes, platform, security"
      contains: "ai-ml"
    - path: "src/components/ProjectCard.astro"
      provides: "data-magnetic attribute on CTA buttons"
      contains: "data-magnetic"
  key_links:
    - from: "src/styles/global.css"
      to: "src/pages/projects/index.astro"
      via: "[data-card-item]::after CSS targets cards rendered in projects page"
      pattern: "data-card-item.*::after"
    - from: "src/components/animations/FloatingOrbs.astro"
      to: "src/pages/projects/index.astro"
      via: "ORB_CONFIG entries match data-section-bg attributes on category wrappers"
      pattern: "data-section-bg"
    - from: "src/components/ProjectCard.astro"
      to: "src/components/animations/MagneticButton.astro"
      via: "data-magnetic attribute on CTA links consumed by MagneticButton init"
      pattern: "data-magnetic"
---

<objective>
Add interactive animations to the projects page: mouse-tracking gradient glow on cards, floating parallax orbs behind category sections, and magnetic pull on CTA buttons.

Purpose: Create a premium, interactive feel that demonstrates frontend craft -- the portfolio page itself becomes a showcase of animation skill. All effects respect reduced-motion and touch device constraints.
Output: Updated global CSS with glow effect, extended FloatingOrbs config, ProjectCard with magnetic CTAs.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-filtering-animations-polish/15-RESEARCH.md
@.planning/phases/15-filtering-animations-polish/15-01-SUMMARY.md
@src/styles/global.css
@src/components/animations/FloatingOrbs.astro
@src/components/animations/MagneticButton.astro
@src/components/ProjectCard.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add mouse-tracking gradient glow CSS and mousemove script</name>
  <files>
    src/styles/global.css
    src/pages/projects/index.astro
  </files>
  <action>
**Add mouse-tracking glow CSS to `src/styles/global.css`:**

Add after the `.card-hover:hover` block (around line 213), before the filter-tab section added in Plan 01:

```css
/* --- Mouse-Tracking Card Glow --- */
[data-card-item]::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    300px circle at calc(var(--mouse-x, -300) * 1px) calc(var(--mouse-y, -300) * 1px),
    var(--category-glow, var(--color-accent-glow)),
    transparent 70%
  );
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 1;
  border-radius: inherit;
}

[data-card-item]:hover::after {
  opacity: 0.5;
}

/* Ensure card content sits above glow overlay */
[data-card-item] > * {
  position: relative;
  z-index: 2;
}

@media (pointer: coarse) {
  [data-card-item]::after {
    display: none;
  }
}
```

NOTE: `[data-card-item]` already has `position: relative` via the card-hover class and `overflow: hidden` is NOT needed (the glow uses `inset: 0` so it stays within bounds). However, verify that ProjectCard's root element has the card-hover class which provides the transition context. The glow uses `var(--category-glow)` which is already set as inline style on each card from Phase 14.

**Add reduced-motion rule** to the existing `@media (prefers-reduced-motion: reduce)` block at the bottom of global.css:
```css
  [data-card-item]::after {
    transition: none;
  }
```

**Add mousemove script to `src/pages/projects/index.astro`:**

In the existing inline `<script>` (added in Plan 01), add a `initCardGlow()` function:

```typescript
function initCardGlow() {
  if (window.matchMedia('(pointer: coarse)').matches) return;
  if (REDUCED_MOTION) return;

  document.querySelectorAll<HTMLElement>('[data-card-item]').forEach(card => {
    card.addEventListener('mousemove', (e) => {
      const rect = card.getBoundingClientRect();
      card.style.setProperty('--mouse-x', String(e.clientX - rect.left));
      card.style.setProperty('--mouse-y', String(e.clientY - rect.top));
    });
  });
}
```

Call `initCardGlow()` inside the existing `astro:page-load` handler alongside `initProjectFilter()`.
  </action>
  <verify>
Run `npx astro build` -- must pass. Grep global.css for `[data-card-item]::after` (should find the rule). Grep for `pointer: coarse` in the CSS (should find the safety net media query). Grep the built JS for `--mouse-x` (should find the mousemove handler).
  </verify>
  <done>
Mouse-tracking radial gradient glow follows cursor across card surfaces using CSS custom properties. Glow inherits category tint color from existing --category-glow inline style. Effect disabled on touch devices (pointer: coarse) and when reduced-motion is preferred. Build passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Extend FloatingOrbs config and add data-magnetic to CTA buttons</name>
  <files>
    src/components/animations/FloatingOrbs.astro
    src/components/ProjectCard.astro
  </files>
  <action>
**Extend `src/components/animations/FloatingOrbs.astro`:**

Add 4 new entries to the `ORB_CONFIG` object (after the existing `cta` entry):

```typescript
'ai-ml': [
  { x: '15%', y: '25%', size: 350, color: 'rgba(139, 92, 246, 0.08)', opacity: 0.06, parallaxY: -50 },
  { x: '80%', y: '65%', size: 280, color: 'rgba(139, 92, 246, 0.06)', opacity: 0.04, parallaxY: -35 },
],
'kubernetes': [
  { x: '75%', y: '20%', size: 380, color: 'rgba(59, 130, 246, 0.08)', opacity: 0.06, parallaxY: -55 },
  { x: '10%', y: '70%', size: 260, color: 'rgba(59, 130, 246, 0.06)', opacity: 0.04, parallaxY: -30 },
],
'platform': [
  { x: '20%', y: '30%', size: 320, color: 'rgba(16, 185, 129, 0.08)', opacity: 0.06, parallaxY: -45 },
  { x: '70%', y: '55%', size: 240, color: 'rgba(16, 185, 129, 0.06)', opacity: 0.04, parallaxY: -25 },
],
'security': [
  { x: '80%', y: '15%', size: 400, color: 'rgba(245, 158, 11, 0.08)', opacity: 0.07, parallaxY: -60 },
  { x: '15%', y: '60%', size: 300, color: 'rgba(245, 158, 11, 0.05)', opacity: 0.04, parallaxY: -40 },
],
```

The orb colors match the category glow colors from ProjectCard's categoryMeta (violet for AI, blue for K8s, emerald for Platform, amber for Security). The category section wrappers in projects/index.astro already have `data-section-bg={slug}` and `style="position: relative;"` from Plan 01, so FloatingOrbs will automatically pick them up.

The existing `.section-orb` CSS in global.css already uses `position: absolute` and the existing `@media (prefers-reduced-motion: reduce)` block already hides `.section-orb { display: none; }`. No additional CSS needed.

**Add `data-magnetic` to CTA buttons in `src/components/ProjectCard.astro`:**

In the `hasLiveUrl` branch (the `<div>` variant), add `data-magnetic` attribute to both CTA `<a>` links:
1. The "Source" link (around line 100-110) -- add `data-magnetic` to the `<a>` tag
2. The "Live Site" link (around line 111-123) -- add `data-magnetic` to the `<a>` tag

The existing `MagneticButton.astro` component (already loaded in Layout.astro) will automatically target these elements via `[data-magnetic]`. It already respects `pointer: coarse` and `prefers-reduced-motion: reduce`.

NOTE: The no-liveUrl branch (the `<a>` wrapper variant) does NOT have separate CTA buttons -- the entire card is the link. Do not add data-magnetic to the card wrapper, only to explicit CTA button links.
  </action>
  <verify>
Run `npx astro build` -- must pass. Grep FloatingOrbs.astro for `'ai-ml'` (should find the new config entry). Grep the built HTML for `data-magnetic` (should find instances on CTA buttons). Count `data-section-bg` in the built projects page HTML (should find 4 category sections).
  </verify>
  <done>
FloatingOrbs has 4 new category-tinted orb configurations that activate on the projects page category sections via existing data-section-bg infrastructure. CTA buttons (Source, Live Site) on cards with liveUrl have data-magnetic for magnetic hover pull via existing MagneticButton component. All effects respect existing reduced-motion and touch device checks. Build passes.
  </done>
</task>

</tasks>

<verification>
1. `npx astro build` passes with 0 errors
2. Mouse-tracking glow CSS (`[data-card-item]::after`) exists in global.css
3. Touch device safeguard (`@media (pointer: coarse)`) disables glow on mobile
4. FloatingOrbs.astro has `ai-ml`, `kubernetes`, `platform`, `security` configs
5. ProjectCard.astro has `data-magnetic` on CTA links
6. Reduced-motion block includes `[data-card-item]::after { transition: none; }`
7. Existing `.section-orb { display: none; }` in reduced-motion covers floating orbs
8. MagneticButton.astro already checks `pointer: coarse` and `prefers-reduced-motion`
</verification>

<success_criteria>
- Mouse cursor creates category-tinted radial glow that tracks across card surfaces on desktop
- Floating parallax orbs appear behind category sections with scroll-linked opacity and movement
- CTA buttons magnetically pull toward cursor on hover
- All effects disabled for reduced-motion users (CSS transitions: none, orbs hidden, magnetic skipped)
- All effects disabled for touch devices (coarse pointer check)
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/15-filtering-animations-polish/15-02-SUMMARY.md`
</output>
