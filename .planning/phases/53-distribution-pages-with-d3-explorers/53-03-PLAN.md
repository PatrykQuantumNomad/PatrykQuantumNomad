---
phase: 53-distribution-pages-with-d3-explorers
plan: 03
type: execute
wave: 3
depends_on: ["53-02"]
files_modified:
  - src/pages/eda/distributions/index.astro
autonomous: false
requirements: [DIST-19]

must_haves:
  truths:
    - "Distribution landing page at /eda/distributions/ displays a grid with all 19 distribution thumbnails"
    - "Each thumbnail links to its corresponding /eda/distributions/{slug}/ page"
    - "D3 bundle loads only on distribution pages, not on non-distribution EDA pages"
    - "All 19 distribution pages render correctly with interactive explorers"
  artifacts:
    - path: "src/pages/eda/distributions/index.astro"
      provides: "Landing page with browsable grid of 19 distributions with PDF shape thumbnails"
      contains: "getCollection"
  key_links:
    - from: "src/pages/eda/distributions/index.astro"
      to: "src/lib/eda/svg-generators/distribution-curve.ts"
      via: "generateDistributionCurve for thumbnail previews"
      pattern: "generateDistributionCurve"
    - from: "src/pages/eda/distributions/index.astro"
      to: "src/lib/eda/routes.ts"
      via: "distributionUrl for linking to detail pages"
      pattern: "distributionUrl"
---

<objective>
Create the distribution landing page at /eda/distributions/ with a browsable thumbnail grid and verify the complete Phase 53 deliverable: all 19 pages + D3 isolation + interactive explorers.

Purpose: The landing page provides discoverability for all 19 distributions (DIST-19). The visual verification confirms the interactive D3 explorers work correctly across distributions, including discrete and special-case types.

Output: Landing page at /eda/distributions/ with thumbnail grid, plus verified end-to-end Phase 53 functionality.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/53-distribution-pages-with-d3-explorers/53-RESEARCH.md
@.planning/phases/53-distribution-pages-with-d3-explorers/53-01-SUMMARY.md
@.planning/phases/53-distribution-pages-with-d3-explorers/53-02-SUMMARY.md
@src/pages/eda/distributions/[slug].astro
@src/components/eda/DistributionExplorer.tsx
@src/lib/eda/svg-generators/distribution-curve.ts
@src/lib/eda/routes.ts
@src/data/eda/distributions.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create distribution landing page with browsable thumbnail grid</name>
  <files>src/pages/eda/distributions/index.astro</files>
  <action>
Create `src/pages/eda/distributions/index.astro` following the established landing page pattern.

**Layout:**
- Use EDALayout with title "Probability Distributions | EDA Visual Encyclopedia" and a descriptive meta description
- BreadcrumbJsonLd: Home > EDA > Distributions
- EdaBreadcrumb: category="Distributions" (no techniqueName -- this is the category index)
- Header section: h1 "Probability Distributions", introductory paragraph explaining what distribution pages offer (interactive parameter explorers, PDF/CDF visualization)

**Grid:**
- Responsive grid: `grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4`
- For each distribution in edaDistributions collection:
  1. Compute default parameters: `Object.fromEntries(dist.data.parameters.map(p => [p.name, p.default]))`
  2. Generate thumbnail SVG: `generateDistributionCurve({ type: 'pdf', distribution: dist.data.id, params: defaultParams, config: { width: 200, height: 140, margin: { top: 10, right: 10, bottom: 20, left: 25 } } })`
  3. Render as a card linking to `distributionUrl(dist.data.slug)`:
     - Thumbnail SVG in a container div with `set:html`
     - Distribution title below the thumbnail
     - Subtle hover effect: `hover:bg-[var(--color-accent)]/5 transition-colors rounded-lg p-3`
     - Role="img" + aria-label on the thumbnail container

**Sorting:** Display distributions in the order they appear in distributions.json (which follows NIST section order).

**No category filtering** on this page (unlike the future /eda/ landing page which will have category pills). This is just the distributions category index.

**SEO:** Use descriptive h1, meta description mentioning "interactive parameter explorers" and "19 probability distributions", and breadcrumb JSON-LD.

**Imports:**
- `getCollection` from 'astro:content'
- `EDALayout` from layouts
- `EdaBreadcrumb` from components
- `BreadcrumbJsonLd` from components
- `generateDistributionCurve` from svg-generators
- `distributionUrl` from routes
  </action>
  <verify>
    <automated>cd /Users/patrykattc/work/git/PatrykQuantumNomad && npm run build 2>&1 | tail -5 && ls dist/eda/distributions/index.html && grep -c 'href="/eda/distributions/' dist/eda/distributions/index.html && grep -c '<svg' dist/eda/distributions/index.html</automated>
    <manual>Landing page exists with 19 distribution links and 19 SVG thumbnails</manual>
  </verify>
  <done>Landing page at /eda/distributions/ renders with 19 distribution cards showing PDF shape thumbnails, each linking to the detail page. Page has breadcrumbs, JSON-LD, and proper SEO metadata.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual verification of distribution pages and D3 explorers</name>
  <what-built>
Complete Phase 53 deliverable: 19 distribution pages with static SVG fallbacks, interactive D3 parameter explorers (sliders + dual PDF/CDF charts), KaTeX formulas, and a landing page with thumbnail grid.
  </what-built>
  <how-to-verify>
1. Run `npm run dev` and visit http://localhost:4321/eda/distributions/
2. Verify the landing page shows a grid of 19 distribution thumbnail cards
3. Click "Normal Distribution" -- verify:
   a. Static SVG fallback is visible (PDF + CDF curves)
   b. Scroll to the explorer -- D3 interactive charts load (two charts appear)
   c. Drag the mu slider -- PDF curve shifts left/right in real time
   d. Drag the sigma slider -- PDF curve widens/narrows in real time
   e. CDF curve updates correspondingly
4. Navigate to /eda/distributions/binomial/ -- verify:
   a. PMF chart shows vertical bar-stems (not smooth curve)
   b. CDF chart shows step function
   c. Sliders for n and p work, bars update
5. Navigate to /eda/distributions/tukey-lambda/ -- verify:
   a. Chart renders without NaN or blank
   b. Lambda slider at 0 shows logistic-like curve (not blank/broken)
6. Navigate to /eda/distributions/cauchy/ -- verify:
   a. Chart shows distinctive heavy-tailed bell shape
   b. Peak is not clipped or exploding
7. Visit a non-distribution EDA page (e.g., /eda/techniques/histogram/) -- open DevTools Network tab, confirm no D3 chunks load
8. Return to /eda/distributions/normal/ -- confirm no console errors, no duplicate chart elements
  </how-to-verify>
  <resume-signal>Type "approved" or describe any issues</resume-signal>
</task>

</tasks>

<verification>
- Landing page at /eda/distributions/ shows 19 distribution cards with thumbnails
- All 19 distribution detail pages accessible from landing page links
- D3 explorer loads via client:visible on distribution pages
- Parameter sliders produce real-time PDF+CDF updates
- Discrete distributions (binomial, poisson) show bar-stem PMF + step CDF
- D3 bundle does NOT load on non-distribution EDA pages
- No console errors during navigation
- Build produces correct page count (19 distributions + 1 landing = 20 new pages)
</verification>

<success_criteria>
- /eda/distributions/ renders browsable grid with 19 PDF shape thumbnails
- All 19 distribution pages have interactive D3 explorers with working sliders
- D3 isolation confirmed (no D3 on non-distribution pages)
- Human verification approved
- DIST-19 requirement satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/53-distribution-pages-with-d3-explorers/53-03-SUMMARY.md`
</output>
