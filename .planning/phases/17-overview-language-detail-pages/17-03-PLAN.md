---
phase: 17-overview-language-detail-pages
plan: 03
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - src/pages/beauty-index/[slug].astro
autonomous: true
requirements: [LANG-01, LANG-02, LANG-03, LANG-04, LANG-05, LANG-06]

must_haves:
  truths:
    - "Visiting /beauty-index/rust/ (or any of the 25 language slugs) renders a detail page"
    - "Each detail page shows the language's radar chart at full size with 6-dimension score breakdown"
    - "Each detail page shows the tier badge and total score prominently"
    - "Each detail page displays the character sketch narrative"
    - "Each detail page shows a syntax-highlighted signature code snippet"
    - "Each detail page has previous/next navigation to adjacent languages and back-to-overview"
    - "All 25 language slugs generate valid static pages via getStaticPaths"
  artifacts:
    - path: "src/pages/beauty-index/[slug].astro"
      provides: "Dynamic route generating 25 language detail pages"
      min_lines: 60
      contains: "getStaticPaths"
  key_links:
    - from: "src/pages/beauty-index/[slug].astro"
      to: "astro:content"
      via: "getCollection('languages') in getStaticPaths"
      pattern: "getCollection.*languages"
    - from: "src/pages/beauty-index/[slug].astro"
      to: "src/components/beauty-index/RadarChart.astro"
      via: "RadarChart component with size=300"
      pattern: "RadarChart"
    - from: "src/pages/beauty-index/[slug].astro"
      to: "src/components/beauty-index/ScoreBreakdown.astro"
      via: "ScoreBreakdown component for dimension details"
      pattern: "ScoreBreakdown"
    - from: "src/pages/beauty-index/[slug].astro"
      to: "src/data/beauty-index/snippets.ts"
      via: "getSnippet() for code display"
      pattern: "getSnippet"
    - from: "src/pages/beauty-index/[slug].astro"
      to: "src/components/beauty-index/LanguageNav.astro"
      via: "LanguageNav for prev/next navigation"
      pattern: "LanguageNav"
    - from: "src/pages/beauty-index/[slug].astro"
      to: "astro:components"
      via: "Code component for syntax highlighting"
      pattern: "Code.*astro:components"
---

<objective>
Create the dynamic language detail pages at /beauty-index/[slug]/ for all 25 languages using getStaticPaths, rendering radar charts, score breakdowns, character sketches, code snippets, and navigation.

Purpose: These are the deep-dive pages -- each language gets a full profile with its radar chart, scores, personality description, and signature code.
Output: One dynamic route file that generates 25 static pages.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-overview-language-detail-pages/17-01-SUMMARY.md
@.planning/phases/17-overview-language-detail-pages/17-RESEARCH.md
@src/lib/beauty-index/schema.ts
@src/lib/beauty-index/tiers.ts
@src/lib/beauty-index/dimensions.ts
@src/components/beauty-index/RadarChart.astro
@src/components/beauty-index/ScoreBreakdown.astro
@src/components/beauty-index/TierBadge.astro
@src/components/beauty-index/LanguageNav.astro
@src/data/beauty-index/snippets.ts
@src/pages/blog/[slug].astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create language detail page with getStaticPaths</name>
  <files>src/pages/beauty-index/[slug].astro</files>
  <action>
Create `src/pages/beauty-index/[slug].astro` for per-language detail pages.

**Imports (frontmatter):**
- `getCollection` from `astro:content`
- `Code` from `astro:components`
- `Layout` from `../../layouts/Layout.astro`
- `RadarChart` from `../../components/beauty-index/RadarChart.astro`
- `ScoreBreakdown` from `../../components/beauty-index/ScoreBreakdown.astro`
- `TierBadge` from `../../components/beauty-index/TierBadge.astro`
- `LanguageNav` from `../../components/beauty-index/LanguageNav.astro`
- `totalScore` from `../../lib/beauty-index/schema`
- `getSnippet` from `../../data/beauty-index/snippets`

**getStaticPaths function:**
```typescript
export async function getStaticPaths() {
  const languages = await getCollection('languages');
  const sorted = [...languages]
    .map((entry) => entry.data)
    .sort((a, b) => totalScore(b) - totalScore(a));

  return sorted.map((lang, index) => ({
    params: { slug: lang.id },
    props: {
      language: lang,
      prev: index > 0 ? { id: sorted[index - 1].id, name: sorted[index - 1].name } : null,
      next: index < sorted.length - 1 ? { id: sorted[index + 1].id, name: sorted[index + 1].name } : null,
      rank: index + 1,
    },
  }));
}
```

CRITICAL: Use `lang.id` (from `entry.data.id`) as the slug param, NOT `entry.id` (which is auto-incremented "0", "1", "2"...). This is the most common pitfall with file() loader collections.

**Props destructuring:**
```typescript
const { language, prev, next, rank } = Astro.props;
const snippet = getSnippet(language.id);
const total = totalScore(language);
```

**Layout wrapper:**
Use `<Layout>` with:
- `title={language.name + " â€” The Beauty Index | Patryk Golabek"}`
- `description={language.characterSketch}`

**Page structure (single article, max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16):**

1. **Header area** -- flex row on desktop, stacked on mobile.
   - Left side: Language name as `<h1>` in `text-3xl sm:text-4xl font-heading font-bold`, followed by `<TierBadge tier={language.tier} size="lg" />` and rank/total display ("Rank #{rank} -- {total}/60 points" in `text-[var(--color-text-secondary)]`).

2. **Chart + Scores row** -- `grid grid-cols-1 md:grid-cols-2 gap-8 mt-10`.
   - Left column: `<RadarChart language={language} size={300} />` centered.
   - Right column: `<ScoreBreakdown language={language} />`.

3. **Character Sketch section** -- `mt-12`.
   - Heading: "Character" in `text-xl font-heading font-bold mb-3`.
   - Paragraph: `{language.characterSketch}` in `text-[var(--color-text-secondary)] leading-relaxed text-lg`. Apply `prose` class from @tailwindcss/typography if it looks better, but the sketch is just 2-3 sentences so plain paragraph styling may be cleaner.

4. **Code Snippet section** -- `mt-12`, only render if `snippet` exists.
   - Heading: "Signature Code" in `text-xl font-heading font-bold mb-1`.
   - Subheading: `{snippet.label}` in `text-sm text-[var(--color-text-secondary)] mb-4`.
   - Code block: `<Code code={snippet.code} lang={snippet.lang} />` wrapped in `<div class="rounded-xl overflow-hidden border border-[var(--color-border)]">`.
   - The `<Code />` component from `astro:components` handles syntax highlighting at build time via Shiki. It does NOT produce Expressive Code features (no copy button, no tabs) -- this is expected and desired for a short signature snippet.

5. **Navigation** -- `<LanguageNav prev={prev} next={next} />` at the bottom.

**Styling notes:**
- Use CSS custom properties for all colors (var(--color-*)) per project conventions.
- The page should feel like a "profile card" for the language.
- No dark mode specific styles (deferred per project decision).
- No structured data / JSON-LD (Phase 21).
  </action>
  <verify>Run `npx astro build 2>&1 | tail -30` and confirm 25 language pages are generated (look for "beauty-index" in the output). Verify a specific page: `ls dist/beauty-index/rust/index.html 2>/dev/null && echo "exists" || echo "missing"`. Run `npx astro check 2>&1 | tail -20` for TypeScript validation. Count generated pages: `ls dist/beauty-index/*/index.html 2>/dev/null | wc -l` should be 26 (25 languages + 1 overview).</verify>
  <done>All 25 language slugs generate static pages. Each page displays: (1) language name with tier badge and rank, (2) radar chart with score breakdown, (3) character sketch narrative, (4) syntax-highlighted code snippet, (5) previous/next/overview navigation. Pages use Layout for consistent site chrome and SEO metadata.</done>
</task>

</tasks>

<verification>
- `npx astro build` succeeds and generates 25 language detail pages plus the overview
- /beauty-index/rust/index.html exists with radar chart SVG, score breakdown, snippet, and navigation
- /beauty-index/haskell/index.html exists (spot check second language)
- /beauty-index/cobol/index.html exists (spot check last-ranked language -- should have no "next" link)
- All pages use `entry.data.id` as slug (not auto-incremented entry.id)
- Previous/next navigation follows total score descending order
- Code snippets render with syntax highlighting via `<Code />` component
</verification>

<success_criteria>
- 25 static pages generated at /beauty-index/{slug}/ for all language IDs
- Each page shows radar chart (size=300), score breakdown, tier badge, total score, rank
- Each page shows character sketch narrative text
- Each page shows syntax-highlighted code snippet (if available)
- Each page has prev/next navigation to adjacent languages by score rank
- `npx astro build` passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/17-overview-language-detail-pages/17-03-SUMMARY.md`
</output>
