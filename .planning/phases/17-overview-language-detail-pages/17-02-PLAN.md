---
phase: 17-overview-language-detail-pages
plan: 02
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - src/pages/beauty-index/index.astro
autonomous: true
requirements: [OVER-01, OVER-02, OVER-03, OVER-04, OVER-05]

must_haves:
  truths:
    - "Visiting /beauty-index/ displays a hero section, ranking bar chart, sortable scoring table, and tier-grouped radar thumbnail grid"
    - "Clicking any column header in the scoring table re-sorts the table by that dimension"
    - "Languages are visually grouped into 4 tiers (Beautiful, Handsome, Practical, Workhorses) with color-coded sections"
    - "Each radar chart thumbnail in the grid links to /beauty-index/{lang.id}/"
    - "The page is responsive across mobile, tablet, and desktop viewports"
  artifacts:
    - path: "src/pages/beauty-index/index.astro"
      provides: "Beauty Index overview page at /beauty-index/"
      min_lines: 50
      contains: "getCollection"
  key_links:
    - from: "src/pages/beauty-index/index.astro"
      to: "src/components/beauty-index/RankingBarChart.astro"
      via: "component import and render"
      pattern: "RankingBarChart"
    - from: "src/pages/beauty-index/index.astro"
      to: "src/components/beauty-index/ScoringTable.astro"
      via: "component import and render"
      pattern: "ScoringTable"
    - from: "src/pages/beauty-index/index.astro"
      to: "src/components/beauty-index/LanguageGrid.astro"
      via: "component import and render"
      pattern: "LanguageGrid"
    - from: "src/pages/beauty-index/index.astro"
      to: "astro:content"
      via: "getCollection('languages') for data"
      pattern: "getCollection.*languages"
---

<objective>
Create the Beauty Index overview page at /beauty-index/ that assembles the ranking bar chart, sortable scoring table, and tier-grouped radar thumbnail grid into a single cohesive page.

Purpose: This is the main entry point for the Beauty Index -- users land here to see the full ranking and browse into individual language pages.
Output: One page file that becomes the /beauty-index/ route.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-overview-language-detail-pages/17-01-SUMMARY.md
@.planning/phases/17-overview-language-detail-pages/17-RESEARCH.md
@src/lib/beauty-index/schema.ts
@src/lib/beauty-index/tiers.ts
@src/lib/beauty-index/dimensions.ts
@src/components/beauty-index/RankingBarChart.astro
@src/components/beauty-index/ScoringTable.astro
@src/components/beauty-index/LanguageGrid.astro
@src/layouts/Layout.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create the Beauty Index overview page</name>
  <files>src/pages/beauty-index/index.astro</files>
  <action>
Create `src/pages/beauty-index/index.astro` as the overview page.

**Imports (frontmatter):**
- `getCollection` from `astro:content`
- `Layout` from `../../layouts/Layout.astro`
- `RankingBarChart` from `../../components/beauty-index/RankingBarChart.astro`
- `ScoringTable` from `../../components/beauty-index/ScoringTable.astro`
- `LanguageGrid` from `../../components/beauty-index/LanguageGrid.astro`
- `totalScore` from `../../lib/beauty-index/schema`

**Data loading (frontmatter):**
```typescript
const languages = await getCollection('languages');
const allData = languages.map((entry) => entry.data);
const sorted = [...allData].sort((a, b) => totalScore(b) - totalScore(a));
```

**Layout wrapper:**
Use `<Layout>` with props:
- `title="The Beauty Index | Patryk Golabek"`
- `description="Ranking 25 programming languages across 6 aesthetic dimensions. From Haskell's mathematical purity to COBOL's industrial grit â€” every language has a beauty score."`

**Page structure inside Layout (4 sections, in this order):**

1. **Hero Section** -- Centered, max-w-4xl mx-auto, py-16 (top) / py-12 (bottom before chart).
   - Large heading: "The Beauty Index" in `text-4xl sm:text-5xl font-heading font-bold`.
   - Subtitle paragraph: 1-2 sentences explaining the concept -- something like "Ranking 25 programming languages across 6 aesthetic dimensions. Beauty is subjective; this index is deliberately opinionated." Style: `text-lg text-[var(--color-text-secondary)] mt-4 max-w-2xl mx-auto text-center`.

2. **Ranking Bar Chart Section** -- `max-w-6xl mx-auto px-4 sm:px-6 lg:px-8`.
   - Section heading: "Rankings" in `text-2xl font-heading font-bold mb-6`.
   - Wrap `<RankingBarChart languages={sorted} />` in `<div class="overflow-x-auto">` for mobile scroll.

3. **Scoring Table Section** -- `max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-16`.
   - Section heading: "Score Breakdown" in `text-2xl font-heading font-bold mb-2`.
   - Brief instruction: "Click any column header to sort" in `text-sm text-[var(--color-text-secondary)] mb-6`.
   - Render `<ScoringTable languages={sorted} />`.

4. **Radar Grid Section** -- `max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 mt-16 pb-16`.
   - Section heading: "Language Profiles" in `text-2xl font-heading font-bold mb-6`.
   - Render `<LanguageGrid languages={sorted} />`.

**Do NOT include:**
- BreadcrumbJsonLd or any structured data (Phase 21 handles SEO)
- Navigation links in the header (Phase 21 handles nav integration)
- Dark mode specific styles (deferred per project decision)

**Delete test pages:** Remove `src/pages/beauty-index/test/radar.astro` and `src/pages/beauty-index/test/ranking.astro` since the real pages now exist and the test pages served their purpose in Phase 16.
  </action>
  <verify>Run `npx astro build 2>&1 | tail -20` and confirm the build succeeds with a /beauty-index/ route generated. Run `npx astro dev &` briefly and `curl -s http://localhost:4321/beauty-index/ | head -50` to confirm HTML renders (or just verify the build output). Check that test pages are removed: `ls src/pages/beauty-index/test/ 2>&1` should fail.</verify>
  <done>Visiting /beauty-index/ displays: (1) hero with title and subtitle, (2) ranking bar chart in an overflow-scroll wrapper, (3) sortable scoring table with click-to-sort instruction, (4) tier-grouped radar chart thumbnail grid with links to language detail pages. The page is responsive and uses the site Layout for consistent header/footer/SEO.</done>
</task>

</tasks>

<verification>
- `npx astro build` succeeds and includes /beauty-index/index.html in output
- The page imports and renders RankingBarChart, ScoringTable, and LanguageGrid
- All 25 languages appear in both the scoring table and the radar grid
- Test pages from Phase 16 are removed
- Page uses Layout with title and description for SEO
</verification>

<success_criteria>
- /beauty-index/ renders a complete overview page with 4 sections (hero, bar chart, table, grid)
- Scoring table is sortable by clicking column headers
- Radar grid shows 25 thumbnails grouped by tier, each linking to detail page
- Page responsive on mobile (overflow-x-auto on chart, grid collapses)
- `npx astro build` passes
</success_criteria>

<output>
After completion, create `.planning/phases/17-overview-language-detail-pages/17-02-SUMMARY.md`
</output>
