---
phase: 25-content-rule-documentation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/data/blog/dockerfile-best-practices.mdx
  - src/pages/tools/dockerfile-analyzer/index.astro
autonomous: true
requirements: [BLOG-01, BLOG-02]

must_haves:
  truths:
    - "Visiting /blog/ shows the Dockerfile best practices blog post in the listing"
    - "The blog post contains Dockerfile best practices organized by category with expert explanations"
    - "The blog post includes a tool architecture deep-dive section explaining the browser-based approach"
    - "The blog post links to /tools/dockerfile-analyzer/ and at least 5 rule documentation pages"
    - "The tool page links back to the blog post"
  artifacts:
    - path: "src/data/blog/dockerfile-best-practices.mdx"
      provides: "Companion blog post covering Dockerfile best practices and tool architecture"
      contains: "dockerfile-analyzer"
    - path: "src/pages/tools/dockerfile-analyzer/index.astro"
      provides: "Updated tool page with blog post back-link"
      contains: "dockerfile-best-practices"
  key_links:
    - from: "src/data/blog/dockerfile-best-practices.mdx"
      to: "/tools/dockerfile-analyzer/"
      via: "inline markdown link in blog content"
      pattern: "/tools/dockerfile-analyzer/"
    - from: "src/data/blog/dockerfile-best-practices.mdx"
      to: "/tools/dockerfile-analyzer/rules/"
      via: "inline markdown links to 5+ rule pages"
      pattern: "/tools/dockerfile-analyzer/rules/"
    - from: "src/pages/tools/dockerfile-analyzer/index.astro"
      to: "/blog/dockerfile-best-practices/"
      via: "back-link section added to tool page"
      pattern: "dockerfile-best-practices"
---

<objective>
Write a companion blog post covering Dockerfile best practices and tool architecture, then add bidirectional cross-links between the blog post and the tool page.

Purpose: The blog post creates an additional high-value SEO page, establishes the author as a Dockerfile/Kubernetes expert, drives traffic to the analyzer tool, and creates bidirectional linking between content types. This follows the exact same pattern as Phase 20 (Beauty Index blog post + cross-links).

Output: One MDX blog post at /blog/dockerfile-best-practices/ and an updated tool page with a blog link.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/25-content-rule-documentation/25-RESEARCH.md
@src/data/blog/the-beauty-index.mdx
@src/content.config.ts
@src/pages/tools/dockerfile-analyzer/index.astro
@src/components/blog/TldrSummary.astro
@src/components/blog/KeyTakeaway.astro
@src/components/blog/Callout.astro
@src/components/blog/OpeningStatement.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write the Dockerfile best practices companion blog post</name>
  <files>src/data/blog/dockerfile-best-practices.mdx</files>
  <action>
Create `src/data/blog/dockerfile-best-practices.mdx` following the exact pattern of existing blog posts.

**Frontmatter (must match content.config.ts schema exactly):**
```yaml
---
title: "39 Dockerfile Best Practices From a Kubernetes Architect"
description: "A production-tested guide to writing secure, efficient, and maintainable Dockerfiles. Each rule explained with real-world consequences and fix examples. Try the free browser-based analyzer."
publishedDate: 2026-02-20
tags: ["docker", "kubernetes", "devops", "cloud-native", "security", "containers"]
draft: false
---
```

**Content structure (2000+ words, expert editorial voice, first person):**

Import blog components at top:
```mdx
import OpeningStatement from '../../components/blog/OpeningStatement.astro';
import TldrSummary from '../../components/blog/TldrSummary.astro';
import KeyTakeaway from '../../components/blog/KeyTakeaway.astro';
import Callout from '../../components/blog/Callout.astro';
```

**1. Opening Statement** (using `<OpeningStatement>` component):
Hook about how most Dockerfiles in production have preventable issues. Author perspective: 17+ years cloud-native, pre-1.0 Kubernetes adopter. Motivation for building the analyzer.

**2. TL;DR Summary** (using `<TldrSummary>` component):
- 39 rules across 5 categories: Security, Efficiency, Maintainability, Reliability, Best Practice
- Scoring: 0-100 with letter grades, category-weighted
- 100% client-side -- your Dockerfile never leaves your browser
- Link to: [Try the Dockerfile Analyzer](/tools/dockerfile-analyzer/)
- Based on Hadolint DL codes + custom PG rules from production experience

**3. Why Your Dockerfile Matters More Than You Think** (h2):
Brief section on how Dockerfiles are often an afterthought but affect security surface, image size, build time, and production reliability. Expert tone -- draw from Kubernetes production experience.

**4. Security Rules: The Non-Negotiables** (h2):
Cover 3-4 key security rules with explanations. Link to specific rule pages:
- [DL3006: Always tag image versions](/tools/dockerfile-analyzer/rules/dl3006/) -- explain :latest danger
- [PG001: No secrets in ENV/ARG](/tools/dockerfile-analyzer/rules/pg001/) -- explain BuildKit secrets
- [DL3002: Don't run as root](/tools/dockerfile-analyzer/rules/dl3002/) -- explain least-privilege
- [PG003: Don't COPY sensitive files](/tools/dockerfile-analyzer/rules/pg003/) -- explain .dockerignore

Use `dockerfile` fenced code blocks for examples (Expressive Code handles highlighting).

**5. Efficiency Rules: Smaller, Faster Builds** (h2):
Cover 2-3 key efficiency rules:
- [DL3059: Consolidate RUN instructions](/tools/dockerfile-analyzer/rules/dl3059/) -- layer reduction
- [DL3009: Remove apt lists](/tools/dockerfile-analyzer/rules/dl3009/) -- image size
- Brief mention of pip --no-cache-dir, apt --no-install-recommends

**6. Maintainability, Reliability, and Best Practices** (h2):
Brief overview of remaining categories with 1-2 examples each. Mention:
- [DL3025: Use JSON format for CMD/ENTRYPOINT](/tools/dockerfile-analyzer/rules/dl3025/)
- [DL4003: Multiple CMD instructions](/tools/dockerfile-analyzer/rules/dl4003/)

**7. How the Analyzer Works: A Browser-Based Approach** (h2) -- ARCHITECTURE DEEP-DIVE:
This section fulfills the "tool architecture deep-dive" requirement from BLOG-01. Cover:
- Why browser-based: privacy (code never leaves browser), zero backend cost, instant results
- Tech stack: CodeMirror 6 for the editor, dockerfile-ast for parsing (21 KB gzipped), React islands in Astro
- Scoring algorithm: category-weighted (Security 30%, Efficiency 25%, etc.), diminishing returns to avoid double-penalizing
- Rule engine: modular one-file-per-rule architecture, AST-based checks (not regex)
- Link to the tool: [Try it yourself](/tools/dockerfile-analyzer/)

Use a `<KeyTakeaway>` component for: "The analyzer runs entirely in your browser. Your Dockerfile never touches a server."

**8. Closing paragraph:**
Invitation to try the analyzer, contribute feedback, and explore individual rule documentation pages. Final CTA link to `/tools/dockerfile-analyzer/`.

**Cross-link requirements (BLOG-02 forward links):**
The blog post MUST link to:
- `/tools/dockerfile-analyzer/` (at least 2 times -- TL;DR and closing)
- At least 5 rule documentation pages (DL3006, PG001, DL3002, PG003, DL3059, DL3009, DL3025, DL4003 are good candidates -- use at least 5 of these)
All links use trailing slashes and lowercase rule IDs.

**Word count target:** 2000-2500 words. Not padding -- each section should have substantive expert content.
  </action>
  <verify>
Run `npx astro build 2>&1 | tail -20` and confirm build succeeds.

Then verify blog post appears in listing: `grep -c "dockerfile-best-practices" dist/blog/index.html` returns at least 1.

Verify cross-links: `grep -c "/tools/dockerfile-analyzer/" dist/blog/dockerfile-best-practices/index.html` returns at least 2. `grep -c "/tools/dockerfile-analyzer/rules/" dist/blog/dockerfile-best-practices/index.html` returns at least 5.
  </verify>
  <done>
Blog post at /blog/dockerfile-best-practices/ is live, appears in blog listing, contains 2000+ words covering Dockerfile best practices by category and a tool architecture deep-dive section, and links to the tool page (2+ times) and at least 5 rule documentation pages.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add blog post back-link to the tool page</name>
  <files>src/pages/tools/dockerfile-analyzer/index.astro</files>
  <action>
Read `src/pages/tools/dockerfile-analyzer/index.astro` and add a blog post back-link section.

Add an `<aside>` after the `<DockerfileAnalyzer>` component (still inside the `<section>`), before the closing `</section>` tag:

```html
<aside class="mt-8 p-4 rounded-lg border border-[var(--color-border)]">
  <p class="text-sm text-[var(--color-text-secondary)]">
    Want to learn the rules in depth? Read the
    <a href="/blog/dockerfile-best-practices/" class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] transition-colors font-medium">
      companion guide: 39 Dockerfile Best Practices
    </a>
    or browse
    <a href="/tools/dockerfile-analyzer/rules/dl3006/" class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] transition-colors font-medium">
      individual rule documentation
    </a>.
  </p>
</aside>
```

This completes BLOG-02 back-link requirement (tool page -> blog post).
  </action>
  <verify>
Run `npx astro build 2>&1 | tail -5` -- build succeeds.
`grep "dockerfile-best-practices" dist/tools/dockerfile-analyzer/index.html` shows the back-link is present.
  </verify>
  <done>
Tool page at /tools/dockerfile-analyzer/ contains a back-link to the blog post at /blog/dockerfile-best-practices/ and a link to rule documentation, completing the bidirectional cross-linking requirement.
  </done>
</task>

</tasks>

<verification>
1. `npx astro build` succeeds without errors
2. Blog post appears at /blog/dockerfile-best-practices/ in the build output
3. Blog post appears in /blog/ listing page
4. Blog post links to /tools/dockerfile-analyzer/ at least twice
5. Blog post links to at least 5 individual rule pages
6. Tool page links back to the blog post
7. All cross-links use trailing slashes and lowercase
</verification>

<success_criteria>
- Blog post at /blog/dockerfile-best-practices/ with 2000+ words
- Post covers Dockerfile best practices by category + tool architecture deep-dive
- Blog post forward-links to tool page (2+) and 5+ rule pages
- Tool page back-links to blog post
- Build completes without errors
- Blog post appears in /blog/ listing
</success_criteria>

<output>
After completion, create `.planning/phases/25-content-rule-documentation/25-02-SUMMARY.md`
</output>
