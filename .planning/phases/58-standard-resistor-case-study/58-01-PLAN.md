---
phase: 58-standard-resistor-case-study
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/data/eda/datasets.ts
  - src/components/eda/StandardResistorPlots.astro
  - src/components/eda/CaseStudyDataset.astro
autonomous: true

must_haves:
  truths:
    - "standardResistor array in datasets.ts contains exactly 1000 number values matching NIST DZIUBA1.DAT"
    - "DATASET_SOURCES.standardResistor entry exists with name DZIUBA1.DAT, correct NIST URL, and n=1000"
    - "StandardResistorPlots.astro renders all 7 plot types (4-plot, run-sequence, lag, histogram, probability, autocorrelation, spectral) using existing SVG generators"
    - "CaseStudyDataset.astro maps 'standard-resistor' slug to the standardResistor dataset with responseVariable 'Resistance (ohms)'"
  artifacts:
    - path: "src/data/eda/datasets.ts"
      provides: "standardResistor number[] array (1000 values) and DATASET_SOURCES entry"
      contains: "export const standardResistor"
    - path: "src/components/eda/StandardResistorPlots.astro"
      provides: "Build-time SVG plot generator for Standard Resistor case study"
      contains: "import { standardResistor }"
    - path: "src/components/eda/CaseStudyDataset.astro"
      provides: "Dataset access panel mapping for standard-resistor slug"
      contains: "'standard-resistor'"
  key_links:
    - from: "src/components/eda/StandardResistorPlots.astro"
      to: "src/data/eda/datasets.ts"
      via: "named import of standardResistor array"
      pattern: "import.*standardResistor.*from.*datasets"
    - from: "src/components/eda/StandardResistorPlots.astro"
      to: "src/lib/eda/svg-generators/index.ts"
      via: "named imports of all 7 SVG generators"
      pattern: "import.*generate4Plot.*generateLinePlot"
    - from: "src/components/eda/CaseStudyDataset.astro"
      to: "src/data/eda/datasets.ts"
      via: "named import of standardResistor for CASE_STUDY_MAP"
      pattern: "standardResistor"
---

<objective>
Add the DZIUBA1.DAT dataset (1000 standard resistor observations) to datasets.ts, create the StandardResistorPlots.astro component that renders all 7 plot types, and register the dataset in CaseStudyDataset.astro.

Purpose: Provides the data infrastructure and plot rendering that the MDX content page (Plan 58-02) depends on.
Output: Populated dataset array, working Plots component, and dataset panel registration.
</objective>

<execution_context>
@/Users/patrykattc/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrykattc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/58-standard-resistor-case-study/58-RESEARCH.md

# Template files (use as exact patterns)
@src/data/eda/datasets.ts
@src/components/eda/FilterTransmittancePlots.astro
@src/components/eda/FatigueLifePlots.astro
@src/components/eda/CaseStudyDataset.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add standardResistor dataset array and DATASET_SOURCES entry to datasets.ts</name>
  <files>src/data/eda/datasets.ts</files>
  <action>
Add two things to `src/data/eda/datasets.ts`:

**1. Dataset array** — Add before the `DATASET_SOURCES` object (after the ceramicStrength array, around line 1084):

```typescript
// ---------------------------------------------------------------------------
// 10. Standard Resistor — NIST DZIUBA1.DAT (verbatim, n=1000)
//     Source: Ron Dziuba, NIST, 1980-1985
//     Standard resistor measurements over 5 years
//     Case Study: Section 1.4.2.7
//     @see https://www.itl.nist.gov/div898/handbook/datasets/DZIUBA1.DAT
// ---------------------------------------------------------------------------
export const standardResistor: number[] = [
  // 1000 values, 10 per line, 4 decimal places
  // ...
];
```

Populate the array by fetching the NIST DZIUBA1.DAT file from https://www.itl.nist.gov/div898/handbook/datasets/DZIUBA1.DAT. The file has a header section followed by 4 columns: month, day, year, resistance. Extract ONLY the 4th column (resistance values). The format is `number[]` with values like 27.8680, 27.8929, etc. Use 10 values per line for consistency with existing datasets (normalRandom, uniformRandom, timeSeries all use 10 per line).

**2. DATASET_SOURCES entry** — Add to the DATASET_SOURCES object (after the ceramicStrength entry, before the closing `} as const`):

```typescript
standardResistor: {
  name: 'DZIUBA1.DAT',
  nistUrl: 'https://www.itl.nist.gov/div898/handbook/datasets/DZIUBA1.DAT',
  description: 'Ron Dziuba, NIST, standard resistor measurements (1980-1985)',
  nistDescription: 'Standard Resistor case study. Ron Dziuba, NIST. Response variable = resistance (ohms). Measurements taken over a 5-year period (1980-1985) to study long-term drift and seasonal effects on a standard resistor. Number of observations = 1000.',
  n: 1000,
},
```

**Verification of array correctness:**
After populating, verify in a Node.js snippet or build step that:
- `standardResistor.length === 1000`
- The mean is approximately 28.01634 (within rounding tolerance)
- The min is approximately 27.828 and max approximately 28.115

These NIST-verified values confirm the data was transcribed correctly.
  </action>
  <verify>
Run a quick Node.js check:
```bash
node -e "
const m = require('./src/data/eda/datasets.ts');
// If TypeScript, use: npx tsx -e '...'
"
```
Or verify via Astro build: `npx astro check` or `npm run build` should not error on datasets.ts.

Also verify array length:
```bash
grep -c '27\.\|28\.' src/data/eda/datasets.ts
```
(should show ~1000 lines containing resistor values in the new array section)
  </verify>
  <done>
- `standardResistor` is exported from datasets.ts as a `number[]` with exactly 1000 elements
- `DATASET_SOURCES.standardResistor` exists with name='DZIUBA1.DAT', nistUrl pointing to NIST, n=1000
- Summary statistics from the array match NIST: mean ~28.01634, min ~27.828, max ~28.115
  </done>
</task>

<task type="auto">
  <name>Task 2: Create StandardResistorPlots.astro and register in CaseStudyDataset.astro</name>
  <files>
    src/components/eda/StandardResistorPlots.astro
    src/components/eda/CaseStudyDataset.astro
  </files>
  <action>
**1. Create `src/components/eda/StandardResistorPlots.astro`** following the FilterTransmittancePlots.astro pattern exactly:

```astro
---
/**
 * StandardResistorPlots — Build-time SVG plot generator for the Standard Resistor case study.
 * Accepts a `type` prop to select which plot to render.
 * All SVG is generated at build time — zero client-side JS.
 */
import PlotFigure from './PlotFigure.astro';
import { standardResistor } from '../../data/eda/datasets';
import {
  generate4Plot,
  generateLinePlot,
  generateLagPlot,
  generateHistogram,
  generateProbabilityPlot,
  generateAutocorrelationPlot,
  generateSpectralPlot,
} from '../../lib/eda/svg-generators/index';

type PlotType =
  | '4-plot' | 'run-sequence' | 'lag' | 'histogram' | 'probability'
  | 'autocorrelation' | 'spectral';

interface Props {
  type: PlotType;
  caption?: string;
}

const { type, caption } = Astro.props;

const singleConfig = {
  width: 720,
  height: 450,
  margin: { top: 35, right: 20, bottom: 45, left: 55 },
};

const compositeConfig = {
  width: 720,
  height: 540,
};

let svg = '';

switch (type) {
  case '4-plot':
    svg = generate4Plot(standardResistor, compositeConfig);
    break;
  case 'run-sequence':
    svg = generateLinePlot({
      data: standardResistor,
      mode: 'run-sequence',
      config: singleConfig,
      title: 'Run Sequence Plot',
      xLabel: 'Observation',
      yLabel: 'Resistance (ohms)',
    });
    break;
  case 'lag':
    svg = generateLagPlot({
      data: standardResistor,
      lag: 1,
      config: singleConfig,
      title: 'Lag Plot (k = 1)',
    });
    break;
  case 'histogram':
    svg = generateHistogram({
      data: standardResistor,
      showKDE: true,
      config: singleConfig,
      title: 'Histogram',
      xLabel: 'Resistance (ohms)',
      yLabel: 'Frequency',
    });
    break;
  case 'probability':
    svg = generateProbabilityPlot({
      data: standardResistor,
      type: 'normal',
      config: singleConfig,
      title: 'Normal Probability Plot',
    });
    break;
  case 'autocorrelation':
    svg = generateAutocorrelationPlot({
      data: standardResistor,
      maxLag: 50,
      config: singleConfig,
      title: 'Autocorrelation Plot',
      xLabel: 'Lag',
      yLabel: 'Autocorrelation',
    });
    break;
  case 'spectral':
    svg = generateSpectralPlot({
      data: standardResistor,
      config: singleConfig,
      title: 'Spectral Plot',
    });
    break;
}
```

**Default captions** — write captions that describe the Standard Resistor dataset behavior specifically:
- `4-plot`: Four-plot diagnostic layout. Run sequence shows upward drift over 1000 observations, lag plot shows extreme linear correlation.
- `run-sequence`: Run sequence plot of 1000 resistor measurements showing persistent upward drift over the 5-year measurement period (1980-1985), with seasonal variation visible as periodic fluctuations.
- `lag`: Lag-1 plot showing a tight linear cluster along the diagonal (r1 = 0.97), indicating extreme autocorrelation from slowly drifting measurements.
- `histogram`: Histogram with KDE overlay. Because the data are severely autocorrelated, the shape reflects drift structure rather than a meaningful distribution.
- `probability`: Normal probability plot. Interpretation is not meaningful because the randomness assumption is violated.
- `autocorrelation`: Autocorrelation plot showing extreme positive autocorrelation persisting to high lags — consistent with long-term drift and seasonal effects in the measurement process.
- `spectral`: Spectral plot showing dominant low-frequency content, consistent with the long-term drift and seasonal variation visible in the run sequence plot.

Use the same `const figCaption = caption ?? defaultCaptions[type];` pattern and `<PlotFigure svg={svg} caption={figCaption} />` output.

**2. Register in CaseStudyDataset.astro:**

Add `standardResistor` to the existing named import at the top of the file (line 7-19):
```typescript
import {
  normalRandom,
  uniformRandom,
  timeSeries,
  beamDeflections,
  randomWalk,
  cryothermometry,
  filterTransmittance,
  fatigueLife,
  ceramicStrength,
  standardResistor,  // ADD THIS
  DATASET_SOURCES,
  type CeramicStrengthObs,
} from '../../data/eda/datasets';
```

Add to CASE_STUDY_MAP (after `'ceramic-strength'` entry):
```typescript
'standard-resistor': {
  kind: 'single',
  key: 'standardResistor',
  values: standardResistor,
  responseVariable: 'Resistance (ohms)',
},
```
  </action>
  <verify>
Run the Astro build to confirm no import errors:
```bash
npm run build 2>&1 | head -50
```
The build should not fail on StandardResistorPlots.astro or CaseStudyDataset.astro imports. If no MDX page references the Plots component yet, the component itself won't be rendered but the imports should resolve without error.
  </verify>
  <done>
- StandardResistorPlots.astro exists with 7 plot types matching the FilterTransmittancePlots pattern
- CaseStudyDataset.astro imports standardResistor and maps 'standard-resistor' slug
- No build errors from the new/modified files
  </done>
</task>

</tasks>

<verification>
1. `standardResistor.length === 1000` (verified programmatically)
2. Summary statistics match NIST: mean ~28.01634, std dev ~0.06349, min ~27.828, max ~28.115
3. StandardResistorPlots.astro has all 7 switch cases and domain-specific default captions
4. CaseStudyDataset.astro has 'standard-resistor' entry in CASE_STUDY_MAP
5. `npm run build` completes without errors
</verification>

<success_criteria>
- RSTR-01 is satisfied: DZIUBA1.DAT data (1000 observations) exists in datasets.ts with DATASET_SOURCES entry
- RSTR-02 is satisfied: StandardResistorPlots.astro component renders all required plot types
- RSTR-04 is partially satisfied: CaseStudyDataset.astro registration is complete (MDX page and cross-references in Plan 58-02)
</success_criteria>

<output>
After completion, create `.planning/phases/58-standard-resistor-case-study/58-01-SUMMARY.md`
</output>
