---
phase: 40-og-images-blog-post-polish
plan: 02
type: execute
wave: 2
depends_on: ["40-01"]
files_modified:
  - src/data/blog/docker-compose-best-practices.mdx
  - src/pages/tools/compose-validator/index.astro
autonomous: true
requirements: [CONTENT-01, CONTENT-02]

must_haves:
  truths:
    - "Visiting /blog/docker-compose-best-practices/ renders a full blog post about Docker Compose best practices with 2000-3000 words"
    - "The blog post contains inline links to /tools/compose-validator/ and individual rule pages like /tools/compose-validator/rules/cv-c001/"
    - "The blog post ends with a CTA section linking to the Compose Validator tool"
    - "The compose-validator tool page aside links to /blog/docker-compose-best-practices/"
    - "The blog post has an auto-generated OG image via the existing catch-all route"
  artifacts:
    - path: "src/data/blog/docker-compose-best-practices.mdx"
      provides: "Companion blog post covering Docker Compose best practices and tool architecture"
      min_lines: 250
    - path: "src/pages/tools/compose-validator/index.astro"
      provides: "Tool page with companion blog post aside link"
      contains: "docker-compose-best-practices"
  key_links:
    - from: "src/data/blog/docker-compose-best-practices.mdx"
      to: "/tools/compose-validator/"
      via: "inline markdown links and CTA section"
      pattern: "\\(/tools/compose-validator/\\)"
    - from: "src/data/blog/docker-compose-best-practices.mdx"
      to: "/tools/compose-validator/rules/"
      via: "inline links to individual rule pages"
      pattern: "\\(/tools/compose-validator/rules/cv-"
    - from: "src/pages/tools/compose-validator/index.astro"
      to: "/blog/docker-compose-best-practices/"
      via: "aside link to companion blog post"
      pattern: "href.*blog/docker-compose-best-practices"
---

<objective>
Write a companion blog post covering Docker Compose best practices and tool architecture, then add bidirectional cross-links between the blog post and the Compose Validator tool page -- completing the SEO content loop that drives traffic between editorial content and the interactive tool.

Purpose: The blog post provides editorial context, SEO value (long-tail keyword coverage), and a natural discovery path for the tool. Bidirectional cross-links strengthen both pages' search ranking through internal link equity.
Output: MDX blog post at /blog/docker-compose-best-practices/ and updated tool page aside with blog link.
</objective>

<execution_context>
@/Users/patrykattc/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrykattc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/40-og-images-blog-post-polish/40-RESEARCH.md
@.planning/phases/40-og-images-blog-post-polish/40-01-SUMMARY.md

# Pattern references -- read these for exact structure and tone
@src/data/blog/dockerfile-best-practices.mdx
@src/pages/tools/compose-validator/index.astro
@src/pages/tools/dockerfile-analyzer/index.astro
@src/content.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write companion blog post docker-compose-best-practices.mdx</name>
  <files>
    src/data/blog/docker-compose-best-practices.mdx
  </files>
  <action>
1. Read `src/data/blog/dockerfile-best-practices.mdx` thoroughly -- this is the exact template for structure, tone, word count (~2500 words, ~308 lines), component usage, and cross-linking pattern.

2. Create `src/data/blog/docker-compose-best-practices.mdx` with:

**Frontmatter:**
```yaml
---
title: "Docker Compose Best Practices From a Kubernetes Architect"
description: "A production-tested guide to writing secure, efficient Docker Compose files. 52 rules explained with real-world consequences and fix examples. Try the free browser-based validator."
publishedDate: 2026-02-23
tags: ["docker", "docker-compose", "kubernetes", "devops", "cloud-native", "security", "containers"]
draft: false
---
```

Tags overlap with dockerfile-best-practices.mdx tags (docker, kubernetes, devops, cloud-native, security, containers) plus "docker-compose" -- this maximizes tag-based related post cross-linking between the two blog posts.

No coverImage (matching dockerfile-best-practices.mdx pattern -- skip per research recommendation).

**Component imports** (same as dockerfile-best-practices.mdx):
```
import OpeningStatement from '../../components/blog/OpeningStatement.astro';
import TldrSummary from '../../components/blog/TldrSummary.astro';
import KeyTakeaway from '../../components/blog/KeyTakeaway.astro';
import Callout from '../../components/blog/Callout.astro';
```

**Content structure** (mirror dockerfile-best-practices.mdx structure):

a. `<OpeningStatement>` -- Bold opener about Docker Compose files in production having preventable issues.

b. Opening paragraphs -- Context about 17+ years experience, Kubernetes background, why compose files matter for local dev and CI. Include early inline link: "I turned them into a [validator you can run right now](/tools/compose-validator/)."

c. `<TldrSummary>` -- Bullet summary: 52 rules, 5 categories, 0-100 scoring, client-side privacy, dependency graph. Include tool link.

d. **"## Why Your Docker Compose File Matters"** -- Why compose files are critical infrastructure. Brief coverage of how bad compose files cause production incidents.

e. **"## Security Rules: The Non-Negotiables"** -- Cover 2-3 key security rules with before/after YAML code blocks:
   - Privileged mode (`privileged: true`) -- link to [CV-C001](/tools/compose-validator/rules/cv-c001/)
   - Docker socket mount -- link to [CV-C002](/tools/compose-validator/rules/cv-c002/)
   - Secrets in environment variables -- link to [CV-C008](/tools/compose-validator/rules/cv-c008/)
   Include `<KeyTakeaway>` after security section.

f. **"## Semantic Rules: Catching What Humans Miss"** -- Cover 2-3 semantic rules:
   - Port conflicts [CV-M001](/tools/compose-validator/rules/cv-m001/)
   - Circular dependencies [CV-M002](/tools/compose-validator/rules/cv-m002/)
   - Undefined network/volume references [CV-M003](/tools/compose-validator/rules/cv-m003/) or similar

g. **"## Best Practice Rules: Production Readiness"** -- Cover 2-3 best practice rules:
   - Missing healthchecks [CV-B001](/tools/compose-validator/rules/cv-b001/)
   - Resource limits [CV-B003](/tools/compose-validator/rules/cv-b003/)
   - Restart policies [CV-B002](/tools/compose-validator/rules/cv-b002/)

h. **"## Schema Rules: Structural Correctness"** -- Brief coverage of schema validation against compose-spec. Mention ajv validation catches structural errors before semantic analysis.

i. **"## How the Validator Works"** -- Brief architecture overview: YAML 1.1 parser, Ajv schema validation, rule engine with 52 rules, category-weighted scoring, dependency graph. Use `<Callout>` for the "runs entirely in your browser" privacy angle.

j. **"## Start Validating"** -- CTA section with prominent link to [Docker Compose Validator](/tools/compose-validator/). Mention it is free, private, and instant. Encourage pasting docker-compose.yml and following rule documentation links for detailed fix guidance.

**Tone:** First person, confident, production-experienced. Match the voice of dockerfile-best-practices.mdx exactly. Use "I" not "we". Reference real-world consequences of each violation.

**Word count target:** 2000-3000 words (matching dockerfile-best-practices.mdx at ~2500).

**Code blocks:** Use ```yaml fenced code blocks for before/after YAML examples. Keep examples short (5-10 lines each) and focused on the specific rule being discussed.

**Rule links:** Link to specific rule pages using the format `[CV-C001](/tools/compose-validator/rules/cv-c001/)` (lowercase slug). Include at least 8-10 individual rule page links throughout the post.
  </action>
  <verify>
Run `npm run build` and confirm:
- Build succeeds without errors
- `dist/blog/docker-compose-best-practices/index.html` exists
- The page contains links to `/tools/compose-validator/` (at least 3 occurrences)
- The page contains links to individual rule pages (at least 5 occurrences of `/tools/compose-validator/rules/`)
- `dist/open-graph/blog/docker-compose-best-practices.png` exists (auto-generated by catch-all OG route)
- The blog post appears in the sitemap
  </verify>
  <done>
A 2000-3000 word MDX blog post exists at /blog/docker-compose-best-practices/ with expert-voice coverage of Docker Compose best practices organized by rule category, before/after YAML examples, 8+ links to individual rule documentation pages, and a CTA linking to the Compose Validator tool. The blog post auto-gets an OG image, structured data, and related posts via the existing blog infrastructure.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add bidirectional cross-links on tool page aside</name>
  <files>
    src/pages/tools/compose-validator/index.astro
  </files>
  <action>
1. Read `src/pages/tools/compose-validator/index.astro` (after Plan 01 has modified it with ogImage prop) and `src/pages/tools/dockerfile-analyzer/index.astro` (to see the blog aside pattern).

2. Update the existing aside section in `compose-validator/index.astro` to add a companion blog post link. The Phase 39 summary confirms an aside already exists linking to rule documentation. Modify it to also link to the blog post, following the Dockerfile Analyzer aside pattern:

```astro
<aside class="mt-8 p-4 rounded-lg border border-[var(--color-border)]">
  <p class="text-sm text-[var(--color-text-secondary)]">
    Want to learn the rules in depth? Read the
    <a href="/blog/docker-compose-best-practices/" class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] transition-colors font-medium">
      companion guide: Docker Compose Best Practices
    </a>
    or browse
    <a href="/tools/compose-validator/rules/cv-c001/" class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] transition-colors font-medium">
      individual rule documentation
    </a>.
  </p>
</aside>
```

The key change: add the "companion guide" link BEFORE the existing "individual rule documentation" link, matching the Dockerfile Analyzer aside pattern. The slug MUST match the blog post filename exactly: `docker-compose-best-practices` (not `compose-best-practices`).

3. Do NOT change the ogImage prop, Layout props, JSON-LD, or any other part of the page -- only the aside content.
  </action>
  <verify>
Run `npm run build` and confirm:
- Build succeeds without errors
- `dist/tools/compose-validator/index.html` contains `href="/blog/docker-compose-best-practices/"` in the aside
- `dist/tools/compose-validator/index.html` still contains `href="/tools/compose-validator/rules/cv-c001/"` in the aside
- Both links are present in the same aside element
  </verify>
  <done>
The Compose Validator tool page aside links to both the companion blog post and individual rule documentation. Combined with the inline tool links in the blog post (Task 1), bidirectional cross-linking is complete: blog post links to tool page, and tool page links back to blog post. Manual Lighthouse audit on /tools/compose-validator/ confirms Performance >= 90 and no new WCAG violations introduced by the OG image or blog cross-link changes.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `/blog/docker-compose-best-practices/` page exists with 2000+ words of expert content
3. Blog post contains 3+ links to `/tools/compose-validator/` and 5+ links to individual rule pages
4. Blog post auto-gets OG image at `/open-graph/blog/docker-compose-best-practices.png`
5. Tool page aside links to `/blog/docker-compose-best-practices/`
6. Tool page aside still links to rule documentation
7. Blog post appears in sitemap
8. Related posts computed correctly (tag overlap with dockerfile-best-practices)
9. Manual Lighthouse audit on /tools/compose-validator/ confirms Performance >= 90 and no new WCAG 2.1 AA violations
</verification>

<success_criteria>
- A companion blog post provides editorial context and SEO value for the Docker Compose Validator
- Bidirectional cross-links create a content loop between blog post and tool page
- The blog post follows the established pattern from dockerfile-best-practices.mdx in structure, tone, and quality
- All new pages auto-integrate with existing infrastructure (OG images, structured data, sitemap, related posts)
</success_criteria>

<output>
After completion, create `.planning/phases/40-og-images-blog-post-polish/40-02-SUMMARY.md`
</output>
