---
phase: 39-tool-page-site-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ComposeValidatorJsonLd.astro
  - src/pages/tools/compose-validator/index.astro
  - src/pages/tools/index.astro
  - src/pages/index.astro
autonomous: true
requirements:
  - SITE-01
  - SITE-02
  - SITE-03
  - SITE-04
  - SITE-05
  - SITE-06

must_haves:
  truths:
    - "The tools page shows a Compose Validator card alongside the Dockerfile Analyzer card"
    - "The homepage Tools section displays a Compose Validator callout card"
    - "The compose-validator page has SoftwareApplication JSON-LD structured data in the page source"
    - "The compose-validator page has BreadcrumbList JSON-LD structured data in the page source"
    - "The compose-validator page has an aside linking to rule documentation"
    - "The header Tools link highlights when on /tools/compose-validator/"
    - "All 53 compose-validator URLs appear in the sitemap"
  artifacts:
    - path: "src/components/ComposeValidatorJsonLd.astro"
      provides: "SoftwareApplication JSON-LD for Compose Validator"
      contains: "SoftwareApplication"
    - path: "src/pages/tools/compose-validator/index.astro"
      provides: "Enhanced tool page with JSON-LD, breadcrumbs, aside"
      contains: "ComposeValidatorJsonLd"
    - path: "src/pages/tools/index.astro"
      provides: "Tools landing with Compose Validator card"
      contains: "compose-validator"
    - path: "src/pages/index.astro"
      provides: "Homepage with Compose Validator callout"
      contains: "compose-validator"
  key_links:
    - from: "src/pages/tools/compose-validator/index.astro"
      to: "src/components/ComposeValidatorJsonLd.astro"
      via: "Astro component import"
      pattern: "import ComposeValidatorJsonLd"
    - from: "src/pages/tools/compose-validator/index.astro"
      to: "src/components/BreadcrumbJsonLd.astro"
      via: "Astro component import"
      pattern: "import BreadcrumbJsonLd"
    - from: "src/pages/tools/index.astro"
      to: "/tools/compose-validator/"
      via: "anchor href"
      pattern: "href=./tools/compose-validator/."
    - from: "src/pages/index.astro"
      to: "/tools/compose-validator/"
      via: "anchor href"
      pattern: "href=./tools/compose-validator/."
---

<objective>
Integrate the Docker Compose Validator into all site discovery surfaces: tools page card, homepage callout, JSON-LD structured data, breadcrumb navigation, and sitemap verification.

Purpose: Make the Compose Validator discoverable from every entry point -- the tools landing page, the homepage, and search engines via structured data and sitemap.
Output: ComposeValidatorJsonLd.astro component, enhanced compose-validator/index.astro with JSON-LD + breadcrumbs + aside, tools page with 2-card grid, homepage with Compose Validator callout.
</objective>

<execution_context>
@/Users/patrykattc/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrykattc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/39-tool-page-site-integration/39-RESEARCH.md

@src/components/DockerfileAnalyzerJsonLd.astro
@src/components/BreadcrumbJsonLd.astro
@src/pages/tools/dockerfile-analyzer/index.astro
@src/pages/tools/compose-validator/index.astro
@src/pages/tools/index.astro
@src/pages/index.astro
@src/components/Header.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ComposeValidatorJsonLd and enhance compose-validator page</name>
  <files>
    src/components/ComposeValidatorJsonLd.astro
    src/pages/tools/compose-validator/index.astro
  </files>
  <action>
1. Create `src/components/ComposeValidatorJsonLd.astro` following the exact pattern of `DockerfileAnalyzerJsonLd.astro`:
   - `@type`: "SoftwareApplication"
   - `name`: "Docker Compose Validator"
   - `description`: "Free browser-based Docker Compose validator and best-practice analyzer. 52 rules across schema, semantic, security, best-practice, and style categories. Scored by a Kubernetes architect with 17+ years of experience."
   - `url`: "https://patrykgolabek.dev/tools/compose-validator/"
   - `applicationCategory`: "DeveloperApplication"
   - `operatingSystem`: "Web Browser"
   - `softwareVersion`: "1.0"
   - `featureList`: 8 items (52 rules across 5 categories, category-weighted scoring, inline annotations, dependency graph, 100% client-side, YAML highlighting, shareable URLs, badge PNG download)
   - `offers`: free ($0 USD)
   - `author`: Person @id reference
   - `isPartOf`: WebSite @id reference
   - Use `set:html={JSON.stringify(schema)}` in the script tag (same as Dockerfile pattern)

2. Update `src/pages/tools/compose-validator/index.astro`:
   - Add imports for `ComposeValidatorJsonLd` and `BreadcrumbJsonLd`
   - Add an aside after the ComposeValidator React island with a link to rule documentation: "Want to learn the rules in depth? Browse individual rule documentation for all 52 validation rules." Link to `/tools/compose-validator/rules/cv-c001/` (same pattern as Dockerfile Analyzer's aside linking to `/tools/dockerfile-analyzer/rules/dl3006/`)
   - Add `<ComposeValidatorJsonLd />` after the closing section tag (before closing Layout)
   - Add `<BreadcrumbJsonLd crumbs={[...]}` with 3 crumbs: Home, Tools, Compose Validator (use hard-coded absolute URLs matching the DockerfileAnalyzer pattern: `https://patrykgolabek.dev/`, `https://patrykgolabek.dev/tools/`, `https://patrykgolabek.dev/tools/compose-validator/`)
   - Do NOT modify the existing Layout title or description (already good)
   - Do NOT touch rules/[code].astro (already has BreadcrumbJsonLd from Phase 38)
  </action>
  <verify>
Run `npm run build` and verify:
1. `grep -l "SoftwareApplication" dist/tools/compose-validator/index.html` finds the file
2. `grep -l "BreadcrumbList" dist/tools/compose-validator/index.html` finds the file
3. `grep "individual rule documentation" dist/tools/compose-validator/index.html` confirms aside exists
4. No build errors
  </verify>
  <done>
The compose-validator page contains SoftwareApplication JSON-LD, BreadcrumbList JSON-LD, and an aside linking to rule documentation. The ComposeValidatorJsonLd.astro component exists and follows the DockerfileAnalyzerJsonLd pattern exactly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add tools page card, homepage callout, and verify sitemap</name>
  <files>
    src/pages/tools/index.astro
    src/pages/index.astro
  </files>
  <action>
1. Update `src/pages/tools/index.astro`:
   - Update the meta description to mention both tools: "Free browser-based developer tools by a Kubernetes architect. Dockerfile analysis, Docker Compose validation, security analysis, and more. 100% client-side -- your code never leaves your device."
   - Add a Compose Validator card inside the existing `grid` div, AFTER the Dockerfile Analyzer card. Follow the identical card pattern (anchor with `card-hover`, icon, h2 title with `group-hover`, `meta-mono` subtitle "Free Browser Tool", description paragraph, pill tag list). Use a document-with-checkmark SVG icon (the `M10.125 2.25h-4.5...` path from the research). Pill tags: "52-rule engine", "Scoring & grades", "Dependency graph", "Share links". Description: "Validate your docker-compose.yml against 52 rules across schema, security, semantic, best-practice, and style categories. Interactive dependency graph with cycle detection."
   - The grid is `sm:grid-cols-2` with 2 cards now -- perfectly balanced. Do NOT add Database Compass (user removed it intentionally in commit 222e677).

2. Update `src/pages/index.astro`:
   - Find the Tools section (the `{/* Tools Section */}` comment around line 209). Inside the existing `grid` div that contains the Dockerfile Analyzer card, add a second card for the Compose Validator AFTER the Dockerfile Analyzer card.
   - Follow the identical homepage card pattern: anchor with `card-hover`, article element, `meta-mono` "Free Browser Tool" label, h3 title "Docker Compose Validator", description "Validate docker-compose.yml files against 52 rules across security, semantic, and best-practice categories. Dependency graph, scoring, and shareable results. 100% client-side.", "Try it" arrow link.
   - The grid is `sm:grid-cols-2` -- with 2 cards it fills perfectly.

3. SITE-01 verification: The header already has `{ href: '/tools/', label: 'Tools' }` at position 5. The `isActive` logic uses `startsWith(link.href)` so `/tools/compose-validator/` correctly highlights "Tools" in the nav. No header changes needed -- this matches the Dockerfile Analyzer pattern exactly.

4. SITE-06 verification: After build, verify sitemap contains compose-validator URLs. `@astrojs/sitemap` auto-includes all static pages so all 53 URLs (1 main + 52 rules) should already be present. Run: `grep -c "compose-validator" dist/sitemap-0.xml` and confirm count is 53.
  </action>
  <verify>
Run `npm run build` and verify:
1. `grep "compose-validator" dist/tools/index.html` shows the card link
2. `grep "Docker Compose Validator" dist/index.html` shows the homepage callout
3. `grep -c "compose-validator" dist/sitemap-0.xml` returns 53
4. No build errors
  </verify>
  <done>
The tools page shows 2 cards (Dockerfile Analyzer + Compose Validator) in a balanced 2-column grid. The homepage Tools section has a Compose Validator callout card. All 53 compose-validator URLs appear in the sitemap. The header "Tools" nav link correctly highlights for compose-validator pages.
  </done>
</task>

</tasks>

<verification>
1. Build succeeds: `npm run build` completes without errors
2. JSON-LD on tool page: `grep "SoftwareApplication" dist/tools/compose-validator/index.html` finds structured data
3. Breadcrumbs on tool page: `grep "BreadcrumbList" dist/tools/compose-validator/index.html` finds breadcrumb JSON-LD
4. Tools page card: `grep "compose-validator" dist/tools/index.html` confirms card link exists
5. Homepage callout: `grep "Docker Compose Validator" dist/index.html` confirms callout exists
6. Sitemap completeness: `grep -c "compose-validator" dist/sitemap-0.xml` returns 53 (1 main + 52 rules)
7. Rule pages untouched: `grep "BreadcrumbList" dist/tools/compose-validator/rules/cv-c001/index.html` still has breadcrumbs from Phase 38
8. No Database Compass on tools page: `grep -c "db-compass" dist/tools/index.html` returns 0
</verification>

<success_criteria>
- ComposeValidatorJsonLd.astro exists with SoftwareApplication schema
- compose-validator/index.astro has JSON-LD, BreadcrumbJsonLd, and rule docs aside
- tools/index.astro shows Dockerfile Analyzer + Compose Validator cards (2-column grid)
- Homepage index.astro has Compose Validator callout in Tools section
- Tools page meta description mentions both tools
- All 53 compose-validator URLs in sitemap
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/39-tool-page-site-integration/39-01-SUMMARY.md`
</output>
