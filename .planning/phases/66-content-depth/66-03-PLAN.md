---
phase: 66-content-depth
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/eda/technique-content/comparison.ts
  - src/lib/eda/technique-content/regression.ts
  - src/lib/eda/technique-content/combined-diagnostic.ts
autonomous: true
requirements: [QUES-01, QUES-02, IMPT-01, IMPT-02, DEFN-01, CASE-01, CASE-02, CASE-03, EXMP-01, EXMP-02]

must_haves:
  truths:
    - "All 4 comparison technique pages display Questions, Importance, and Expanded Definition sections"
    - "All 3 regression technique pages display Questions, Importance, and Expanded Definition sections"
    - "All 3 combined-diagnostic technique pages display Questions, Importance, and Expanded Definition sections"
    - "block-plot, scatter-plot, 6-plot, ppcc-plot, weibull-plot, and 4-plot show case study pill links"
    - "scatter-plot (Tier B) shows 12 interpretive variant captions via examples array"
  artifacts:
    - path: "src/lib/eda/technique-content/comparison.ts"
      provides: "questions, importance, definitionExpanded, caseStudySlugs for 4 techniques"
      contains: "questions:"
    - path: "src/lib/eda/technique-content/regression.ts"
      provides: "questions, importance, definitionExpanded, caseStudySlugs, examples for 3 techniques"
      contains: "questions:"
    - path: "src/lib/eda/technique-content/combined-diagnostic.ts"
      provides: "questions, importance, definitionExpanded, caseStudySlugs, examples for 3 techniques"
      contains: "questions:"
  key_links:
    - from: "combined-diagnostic.ts 4-plot caseStudySlugs"
      to: "src/data/eda/pages/case-studies/*.mdx"
      via: "slug resolution -- 4-plot links to all 8 univariate case studies"
      pattern: "caseStudySlugs.*normal-random-numbers.*beam-deflections"
    - from: "regression.ts scatter-plot examples variantLabel"
      to: "Tier B variant renderer"
      via: "variantLabel string matching"
      pattern: "variantLabel.*Strong Positive"
---

<objective>
Populate NIST-parity prose content for 10 techniques across comparison, regression, and combined-diagnostic modules, including Tier B variant captions for scatter-plot (12 variants).

Purpose: These 10 techniques complete the full 29-technique content population. The combined-diagnostic module contains the 4-plot which links to all 8 univariate case studies, and the regression module contains scatter-plot, the most variant-rich Tier B technique (12 variants).

Output: Three content module files updated with all optional fields populated.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/66-content-depth/66-RESEARCH.md
@src/lib/eda/technique-content/types.ts
@src/lib/eda/technique-content/comparison.ts
@src/lib/eda/technique-content/regression.ts
@src/lib/eda/technique-content/combined-diagnostic.ts

<interfaces>
From src/lib/eda/technique-content/types.ts:
```typescript
export interface TechniqueContent {
  // Required fields (keep unchanged):
  definition: string;
  purpose: string;
  interpretation: string;
  assumptions: string;
  nistReference: string;

  // Optional fields to populate (Phase 66):
  questions?: string[];
  importance?: string;
  definitionExpanded?: string;
  caseStudySlugs?: string[];
  examples?: Array<{ label: string; description: string; variantLabel?: string; }>;

  // Phase 67 -- DO NOT add:
  formulas?: Array<{ label: string; tex: string; explanation: string; }>;
  pythonCode?: string;
}
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add questions, importance, definitionExpanded, and caseStudySlugs to all 10 techniques</name>
  <files>
    src/lib/eda/technique-content/comparison.ts
    src/lib/eda/technique-content/regression.ts
    src/lib/eda/technique-content/combined-diagnostic.ts
  </files>
  <action>
For each technique entry in the three files, add optional fields AFTER the existing `nistReference` field. Keep all existing required fields untouched. Do NOT add `formulas` or `pythonCode` (Phase 67).

**comparison.ts (4 techniques):**

`block-plot`:
- questions: ['Is the factor of interest significant?', 'Does the factor of interest have an effect?', 'Does the location change between levels of the primary factor?', 'Has the process improved?', 'What is the best setting (level) of the primary factor?', 'How much of an average improvement can we expect with this best setting?', 'Is there an interaction between the primary factor and one or more nuisance factors?', 'Does the effect of the primary factor change depending on the setting of some nuisance factor?', 'Are there any outliers?']
- importance: The block plot is the most information-rich graphical display for randomized block designs. It simultaneously shows treatment effects, blocking effectiveness, and potential interactions in a single figure, providing more insight than the ANOVA table alone because it reveals the pattern and consistency of effects rather than just their statistical significance.
- definitionExpanded: Each block is represented as a vertical cluster of observations on the horizontal axis. Within each block, individual data points are plotted and connected by lines to the block mean. Treatment levels may be distinguished by color or symbol. The vertical axis shows the response. Parallel connecting lines across blocks indicate consistent treatment effects (no interaction), while crossing lines indicate block-by-treatment interaction.
- caseStudySlugs: ['ceramic-strength']

`mean-plot`:
- questions: ['Are there any shifts in location?', 'What is the magnitude of the shifts in location?', 'Is there a distinct pattern in the shifts in location?']
- importance: The mean plot is the most direct visual tool for detecting location effects in designed experiments. It provides immediate visual answers to the central DOE question: does changing the factor setting change the average response? The magnitude of the shift relative to the grand mean indicates practical significance.
- definitionExpanded: The horizontal axis shows factor levels (categorical or ordered). The vertical axis shows the group mean for each level. A horizontal reference line at the grand mean (mean of all observations) provides a baseline for comparison. The deviation of each group mean from the grand mean line indicates the size and direction of the factor effect at that level.
- caseStudySlugs: [] -- omit field (no matching case study)

`star-plot`:
- questions: ['What variables are dominant for a given observation?', 'Which observations are most similar (are there clusters)?', 'Are there outliers?']
- importance: The star plot enables the comparison of multivariate profiles across observations in a compact, visually intuitive format. It answers the question "which variables differentiate these observations?" at a glance, making it valuable for benchmarking, quality profiling, and competitive analysis where many attributes must be compared simultaneously.
- definitionExpanded: Each observation is represented as a separate star (polygon) with p spokes radiating from a center point at equal angles (360/p degrees apart). Each spoke represents one variable, and the spoke length is proportional to the variable's value (typically scaled to 0-1 range). The tips of the spokes are connected to form a polygon. Large, regular polygons indicate uniformly high values; small polygons indicate uniformly low values; irregular shapes highlight dominant variables.
- caseStudySlugs: [] -- omit field (no matching case study)

`youden-plot`:
- questions: ['Are all labs equivalent?', 'What labs have between-lab problems (reproducibility)?', 'What labs have within-lab problems (repeatability)?', 'What labs are outliers?']
- importance: The Youden plot is the standard graphical tool for interlaboratory studies and proficiency testing. It uniquely separates between-lab systematic bias (points along the diagonal) from within-lab random variability (scatter perpendicular to the diagonal), providing targeted diagnostic information that summary statistics cannot reveal.
- definitionExpanded: Each laboratory is plotted as a single point with horizontal coordinate = result from run/sample 1 and vertical coordinate = result from run/sample 2. Vertical and horizontal reference lines are drawn at the medians of each run, dividing the plot into four quadrants. A 45-degree reference line through the median intersection highlights systematic bias. Points near this diagonal have high between-lab bias; points far from the diagonal have high within-lab variability.
- caseStudySlugs: [] -- omit field (no matching case study)

**regression.ts (3 techniques):**

`scatter-plot`:
- questions: ['Are variables X and Y related?', 'Are variables X and Y linearly related?', 'Are variables X and Y non-linearly related?', 'Does the variation in Y change depending on X?', 'Are there outliers?']
- importance: The scatter plot is the single most important graphical tool for bivariate analysis. It provides a direct, assumption-free view of the relationship between two variables, revealing the form (linear, curved, none), direction (positive, negative), strength, and any anomalies (outliers, clusters, heteroscedasticity). No regression model should be fit without first examining the scatter plot.
- definitionExpanded: Each observation is plotted as a point at coordinates (X_i, Y_i). An optional fitted regression line or LOWESS smoother highlights the central trend. The vertical scatter of points around the trend line indicates the strength of the relationship -- tight scatter means strong association, wide scatter means weak association. The shape of the point cloud reveals the functional form: an elliptical cloud suggests linearity, a curved band suggests a non-linear relationship.
- caseStudySlugs: ['beam-deflections']

`linear-plots`:
- questions: ['Are there linear relationships across groups?', 'Are the strength of the linear relationships relatively constant across the groups?']
- importance: Linear plots assess the STABILITY of a linear fit across different regions of the data. A regression can have a high overall correlation but be driven by different relationships in different subsets. Detecting this instability prevents incorrect extrapolation and identifies subgroups that may require separate models.
- definitionExpanded: The data are divided into sequential subsets (windows), and four statistics are computed for each subset: the correlation coefficient, the intercept, the slope, and the residual standard deviation. Each statistic is plotted against the subset index, creating four companion panels. Stable (flat) lines across all four panels confirm a globally consistent linear relationship. Trends or jumps in any panel indicate local departures from the global model.
- caseStudySlugs: [] -- omit field (no matching case study)

`6-plot`:
- questions: ['Are the residuals approximately normally distributed with a fixed location and scale?', 'Are there outliers?', 'Is the fit adequate?', 'Do the residuals suggest a better fit?']
- importance: The 6-plot is the comprehensive regression diagnostic: if any of the six panels shows a problem (non-linearity, non-constant variance, non-independence, non-normality), the regression model needs revision. It prevents the common mistake of reporting regression results without validating the assumptions that make those results meaningful.
- definitionExpanded: The six panels are arranged in a 2x3 grid. Top row: (1) Y and Y-hat vs X showing the fit overlay, (2) residuals vs X checking for non-linearity, (3) residuals vs Y-hat checking for heteroscedasticity. Bottom row: (4) lag plot of residuals checking for serial correlation, (5) histogram of residuals checking for symmetry and normality, (6) normal probability plot of residuals providing a sensitive normality test. Each panel tests a specific regression assumption.
- caseStudySlugs: ['standard-resistor']

**combined-diagnostic.ts (3 techniques):**

`ppcc-plot`:
- questions: ['What is the best-fit member within a distributional family?', 'Does the best-fit member provide a good fit?', 'Does this distributional family provide a good fit compared to other distributions?', 'How sensitive is the choice of the shape parameter?']
- importance: The PPCC plot provides a systematic, quantitative method for selecting the best distribution from a parametric family. Rather than subjectively comparing multiple probability plots, the PPCC plot reduces distribution selection to finding a single peak, making the process both more efficient and more reproducible.
- definitionExpanded: For each candidate shape parameter lambda, a probability plot is constructed and the correlation between the ordered data and the theoretical quantiles is computed. The resulting (lambda, correlation) pairs are plotted to form the PPCC curve. The lambda at the peak gives the best-fit shape parameter, and the height of the peak gives the goodness-of-fit measure. For the Tukey-Lambda family: lambda near 0.14 corresponds to normal, lambda near -1 corresponds to Cauchy (heavy-tailed), and large positive lambda corresponds to short-tailed (approaching uniform).
- caseStudySlugs: ['normal-random-numbers']

`weibull-plot`:
- questions: ['Do the data follow a 2-parameter Weibull distribution?', 'What is the best estimate of the shape parameter?', 'What is the best estimate of the scale parameter?']
- importance: The Weibull distribution is the standard model for reliability and failure analysis because it can represent decreasing, constant, or increasing failure rates through a single shape parameter. The Weibull plot provides simultaneous fit assessment and parameter estimation, making it the most important single tool in reliability engineering.
- definitionExpanded: The axes are linearized for the Weibull distribution using the transformation: horizontal axis = ln(t) where t is the data value, vertical axis = ln(-ln(1 - F(t))) where F(t) is the cumulative distribution function estimated by the plotting position. On these axes, data from a Weibull distribution fall on a straight line. The slope equals the shape parameter beta (beta < 1: infant mortality, beta = 1: exponential/constant hazard, beta > 1: wear-out). The scale parameter eta is read at the 63.2nd percentile (where ln(-ln(1 - 0.632)) = 0).
- caseStudySlugs: ['fatigue-life']

`4-plot`:
- questions: ['Is the process in control (statistically stable)?', 'Are there any shifts in location?', 'Are there any shifts in variation?', 'Are the data random?', 'Is there serial correlation?', 'What is a good model for the data?', 'Is the data distribution symmetric or skewed?', 'Are the data normally distributed?', 'Are there any outliers?']
- importance: The 4-plot is the universal first-step diagnostic for any univariate measurement process. It simultaneously tests all four foundational assumptions (fixed location, fixed variation, randomness, and distributional form) in a single display. If any panel shows a problem, the analyst knows immediately which assumption is violated and can choose appropriate corrective methods before proceeding with analysis.
- definitionExpanded: The four panels occupy a 2x2 grid. Upper-left: run-sequence plot (Y vs run order) tests fixed location and fixed variation. Upper-right: lag plot (Y_i vs Y_{i-1}) tests randomness and detects serial correlation. Lower-left: histogram tests distributional shape, modality, and symmetry. Lower-right: normal probability plot specifically tests for normality. Together, these four panels answer: is the process stable, is it random, and what does the distribution look like?
- caseStudySlugs: ['normal-random-numbers', 'uniform-random-numbers', 'random-walk', 'cryothermometry', 'beam-deflections', 'filter-transmittance', 'standard-resistor', 'heat-flow-meter']

**Important rules:**
- Do NOT add `formulas` or `pythonCode` fields (Phase 67)
- Do NOT modify existing required fields
- The 4-plot has 8 case study slugs -- include ALL of them (it is the universal diagnostic used in every case study)
- Omit `caseStudySlugs` entirely for mean-plot, star-plot, youden-plot, linear-plots (no matching case studies)
- Questions must match NIST research mapping exactly
- Keep the `as const` assertion on each module's export
  </action>
  <verify>
Run `npx astro build 2>&1 | tail -20` and confirm zero errors. Verify content added: `grep -c "questions:" src/lib/eda/technique-content/comparison.ts src/lib/eda/technique-content/regression.ts src/lib/eda/technique-content/combined-diagnostic.ts` should show 4, 3, 3 respectively. Verify 4-plot has 8 case study slugs: `grep -A10 "4-plot" src/lib/eda/technique-content/combined-diagnostic.ts | grep -c "'" | head -1` (check manually that 8 slugs present).
  </verify>
  <done>All 10 techniques across comparison.ts, regression.ts, and combined-diagnostic.ts have questions, importance, definitionExpanded, and caseStudySlugs (where applicable) populated. Build passes cleanly.</done>
</task>

<task type="auto">
  <name>Task 2: Add scatter-plot Tier B variant captions (12) and Tier A examples for block-plot, 6-plot, and 4-plot</name>
  <files>
    src/lib/eda/technique-content/regression.ts
    src/lib/eda/technique-content/comparison.ts
    src/lib/eda/technique-content/combined-diagnostic.ts
  </files>
  <action>
Add `examples` arrays to Tier B and Tier A techniques. Tier B examples have `variantLabel` matching the renderer exactly. Tier A examples have `label` and `description` only.

**scatter-plot (Tier B -- 12 variants) in regression.ts:**
```typescript
examples: [
  {
    label: 'Strong Positive Correlation',
    description: 'Points form a tight band rising from lower-left to upper-right. As X increases, Y increases proportionally. The correlation coefficient is close to +1. A linear model is appropriate.',
    variantLabel: 'Strong Positive',
  },
  {
    label: 'Strong Negative Correlation',
    description: 'Points form a tight band falling from upper-left to lower-right. As X increases, Y decreases proportionally. The correlation coefficient is close to -1. A linear model with negative slope is appropriate.',
    variantLabel: 'Strong Negative',
  },
  {
    label: 'Weak Positive Correlation',
    description: 'Points show a general upward trend but with considerable scatter around the trend line. The correlation coefficient is moderate (0.3-0.6). The relationship exists but other factors contribute substantially to the variability in Y.',
    variantLabel: 'Weak Positive',
  },
  {
    label: 'No Correlation',
    description: 'Points form a structureless circular or rectangular cloud with no discernible trend. The correlation coefficient is near zero. X provides no information about Y, and a regression model would not be useful.',
    variantLabel: 'No Correlation',
  },
  {
    label: 'Quadratic Relationship',
    description: 'Points follow a U-shaped or inverted-U curve. The linear correlation may be near zero despite a strong relationship existing. A quadratic model (Y = a + bX + cX^2) or polynomial regression is needed.',
    variantLabel: 'Quadratic',
  },
  {
    label: 'Exponential Relationship',
    description: 'Points follow an exponential curve with Y increasing (or decreasing) at an accelerating rate. A log transformation of Y or an exponential model is needed. The linear correlation underestimates the true strength of the relationship.',
    variantLabel: 'Exponential',
  },
  {
    label: 'Heteroscedastic',
    description: 'The vertical spread of points increases (or decreases) systematically as X increases, forming a fan or trumpet shape. This non-constant variance violates a key regression assumption and may require weighted regression or a variance-stabilizing transformation.',
    variantLabel: 'Heteroscedastic',
  },
  {
    label: 'Clustered',
    description: 'Points form two or more distinct groups separated by gaps, rather than a continuous distribution. This suggests the data come from different subpopulations or operating conditions. Each cluster may have its own regression relationship.',
    variantLabel: 'Clustered',
  },
  {
    label: 'With Outliers',
    description: 'Most points follow a clear pattern, but one or more points lie far from the main body. These outliers may be influential observations that distort the regression fit. They should be investigated for measurement errors or genuine extreme conditions.',
    variantLabel: 'With Outliers',
  },
  {
    label: 'Fan-Shaped',
    description: 'Points spread out in a fan pattern with variability increasing proportionally to the mean. This is a specific form of heteroscedasticity common in measurement data where the standard deviation is proportional to the magnitude. A log-log transformation often stabilizes the variance.',
    variantLabel: 'Fan-shaped',
  },
  {
    label: 'Sinusoidal',
    description: 'Points follow a sine-wave pattern, indicating a periodic relationship between X and Y. A linear or polynomial model is inadequate; a trigonometric model (Y = a + b*sin(cX + d)) or Fourier decomposition is needed.',
    variantLabel: 'Sinusoidal',
  },
  {
    label: 'Step Function',
    description: 'Points cluster at discrete Y levels with abrupt transitions, creating a staircase pattern. This suggests a threshold or categorical mechanism underlying the relationship. A regression model is inappropriate; a classification or segmented model is needed.',
    variantLabel: 'Step Function',
  },
],
```

**block-plot (Tier A examples) in comparison.ts:**
```typescript
examples: [
  {
    label: 'Consistent Treatment Effect',
    description: 'Connecting lines across blocks are roughly parallel, indicating the treatment effect is the same regardless of the block. The factor of interest has a main effect with no interaction.',
  },
  {
    label: 'Block-by-Treatment Interaction',
    description: 'Connecting lines cross between blocks, indicating the treatment effect depends on the block. The factor of interest behaves differently under different blocking conditions, and the interaction must be modeled.',
  },
  {
    label: 'Effective Blocking',
    description: 'Large vertical separation between block means confirms that blocking captured meaningful nuisance variability. Without blocking, this variability would inflate the error term and reduce the ability to detect treatment effects.',
  },
],
```

**6-plot (Tier A examples) in regression.ts:**
```typescript
examples: [
  {
    label: 'Good Fit',
    description: 'Panel 1 shows the fit tracking the data closely. Panels 2-3 show residuals scattered randomly with no pattern. Panel 4 shows a structureless cloud. Panels 5-6 confirm approximately normal residuals. All regression assumptions are satisfied.',
  },
  {
    label: 'Non-Linear Misspecification',
    description: 'Panel 1 shows the linear fit missing a curved pattern in the data. Panels 2-3 show systematic curvature in the residuals. The model form needs to include a quadratic or higher-order term.',
  },
  {
    label: 'Non-Constant Variance',
    description: 'Panels 2-3 show a fan shape in the residuals with spread increasing for larger fitted values. This heteroscedasticity invalidates standard error estimates. A variance-stabilizing transformation or weighted regression is needed.',
  },
],
```

**4-plot (Tier A examples) in combined-diagnostic.ts:**
```typescript
examples: [
  {
    label: 'Ideal Process',
    description: 'Run-sequence plot shows a stable horizontal band. Lag plot shows a structureless cloud. Histogram is bell-shaped. Normal probability plot follows the reference line. All four assumptions are satisfied -- the process is stable, random, and normally distributed.',
  },
  {
    label: 'Trending Process',
    description: 'Run-sequence plot shows a clear upward or downward drift. Lag plot shows a tight diagonal band. Histogram may appear normal but the time-dependence makes summary statistics misleading. The trend must be modeled or removed before further analysis.',
  },
  {
    label: 'Non-Normal Process',
    description: 'Run-sequence plot and lag plot appear normal (stable, random), but the histogram is skewed and the normal probability plot curves away from the reference line. The process is in control but a normal-theory analysis would give incorrect confidence intervals.',
  },
],
```

**Important:** The scatter-plot `variantLabel` values must EXACTLY match the variant labels from the technique renderer. Cross-check with 66-RESEARCH.md: "Strong Positive", "Strong Negative", "Weak Positive", "No Correlation", "Quadratic", "Exponential", "Heteroscedastic", "Clustered", "With Outliers", "Fan-shaped", "Sinusoidal", "Step Function".
  </action>
  <verify>
Run `npx astro build 2>&1 | tail -20` and confirm zero errors. Verify Tier B count: `grep -c "variantLabel" src/lib/eda/technique-content/regression.ts` should show 12. Verify Tier A examples present: `grep -c "'Good Fit'\|'Consistent Treatment'\|'Ideal Process'" src/lib/eda/technique-content/comparison.ts src/lib/eda/technique-content/regression.ts src/lib/eda/technique-content/combined-diagnostic.ts`.
  </verify>
  <done>scatter-plot has 12 variant captions, block-plot has 3 Tier A examples, 6-plot has 3 Tier A examples, 4-plot has 3 Tier A examples. All variantLabel strings match renderer labels. Build passes cleanly.</done>
</task>

</tasks>

<verification>
1. `npx astro build` passes with zero errors
2. All 10 techniques in the 3 modules have `questions`, `importance`, `definitionExpanded` fields
3. 4 techniques have `caseStudySlugs` (block-plot, scatter-plot, 6-plot have 1 each; 4-plot has 8)
4. scatter-plot has 12 examples with variantLabel (Tier B)
5. block-plot, 6-plot, and 4-plot each have 3 Tier A examples
6. No `formulas` or `pythonCode` fields added
</verification>

<success_criteria>
- 10/29 techniques have full NIST-parity prose content (completing the full 29)
- 4 techniques have case study cross-links (including 4-plot's 8 links)
- 1 Tier B technique has 12 interpretive variant captions
- 3 Tier A techniques have pattern examples (9 total)
- Build clean with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/66-content-depth/66-03-SUMMARY.md`
</output>
