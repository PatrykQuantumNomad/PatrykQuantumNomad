---
phase: 66-content-depth
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/eda/technique-content/time-series.ts
  - src/lib/eda/technique-content/designed-experiments.ts
  - src/lib/eda/technique-content/multivariate.ts
autonomous: true
requirements: [QUES-01, QUES-02, IMPT-01, IMPT-02, DEFN-01, CASE-01, CASE-02, EXMP-01, EXMP-02]

must_haves:
  truths:
    - "All 5 time-series technique pages display Questions, Importance, and Expanded Definition sections"
    - "All 2 designed-experiments technique pages display Questions, Importance, and Expanded Definition sections"
    - "All 3 multivariate technique pages display Questions, Importance, and Expanded Definition sections"
    - "autocorrelation-plot, complex-demodulation, lag-plot, spectral-plot, and doe-plots show case study pill links"
    - "autocorrelation-plot, lag-plot, and spectral-plot (Tier B) show interpretive variant captions via examples array"
  artifacts:
    - path: "src/lib/eda/technique-content/time-series.ts"
      provides: "questions, importance, definitionExpanded, caseStudySlugs, examples for 5 techniques"
      contains: "questions:"
    - path: "src/lib/eda/technique-content/designed-experiments.ts"
      provides: "questions, importance, definitionExpanded, caseStudySlugs for 2 techniques"
      contains: "questions:"
    - path: "src/lib/eda/technique-content/multivariate.ts"
      provides: "questions, importance, definitionExpanded for 3 techniques"
      contains: "questions:"
  key_links:
    - from: "src/lib/eda/technique-content/time-series.ts"
      to: "src/lib/eda/technique-content/types.ts"
      via: "TechniqueContent interface optional fields"
      pattern: "questions.*importance.*definitionExpanded"
    - from: "time-series.ts caseStudySlugs"
      to: "src/data/eda/pages/case-studies/*.mdx"
      via: "slug resolution in [slug].astro getStaticPaths"
      pattern: "caseStudySlugs.*beam-deflections"
---

<objective>
Populate NIST-parity prose content for 10 techniques across time-series, designed-experiments, and multivariate modules.

Purpose: These 10 techniques need questions, importance, expanded definitions, case study cross-links (where applicable), and Tier B variant captions (for autocorrelation-plot, lag-plot, spectral-plot) to reach NIST content parity.

Output: Three content module files updated with all optional fields populated.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/66-content-depth/66-RESEARCH.md
@src/lib/eda/technique-content/types.ts
@src/lib/eda/technique-content/time-series.ts
@src/lib/eda/technique-content/designed-experiments.ts
@src/lib/eda/technique-content/multivariate.ts

<interfaces>
From src/lib/eda/technique-content/types.ts:
```typescript
export interface TechniqueContent {
  // Required fields (keep unchanged):
  definition: string;
  purpose: string;
  interpretation: string;
  assumptions: string;
  nistReference: string;

  // Optional fields to populate (Phase 66):
  questions?: string[];
  importance?: string;
  definitionExpanded?: string;
  formulas?: Array<{ label: string; tex: string; explanation: string; }>;  // Phase 67 -- DO NOT add
  pythonCode?: string;  // Phase 67 -- DO NOT add
  caseStudySlugs?: string[];
  examples?: Array<{ label: string; description: string; variantLabel?: string; }>;
}
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add questions, importance, definitionExpanded, and caseStudySlugs to all 10 techniques</name>
  <files>
    src/lib/eda/technique-content/time-series.ts
    src/lib/eda/technique-content/designed-experiments.ts
    src/lib/eda/technique-content/multivariate.ts
  </files>
  <action>
For each technique entry in the three files, add the following optional fields AFTER the existing `nistReference` field. Keep all existing required fields untouched. Do NOT add `formulas` or `pythonCode` (those are Phase 67).

**time-series.ts (5 techniques):**

`autocorrelation-plot`:
- questions: ['Are the data random?', 'Is an observation related to adjacent observations?', 'Is the time series white noise, sinusoidal, or autoregressive?', 'What model best fits the observed time series?', 'Is the simple constant-plus-error model valid?', 'Is the standard error formula for sample means applicable?']
- importance: Explain that randomness is the foundational assumption underlying most statistical estimation and testing. If violated, confidence intervals, control charts, and capability indices become invalid. The autocorrelation plot is the primary tool for detecting this violation.
- definitionExpanded: Describe the vertical axis as autocorrelation coefficient R_h = C_h / C_0 where C_h is the autocovariance at lag h and C_0 is the variance. The horizontal reference lines at plus/minus 2/sqrt(N) mark the 95% significance bounds under the null hypothesis of white noise. Explain that the autocorrelation at lag 0 is always 1 by definition.
- caseStudySlugs: ['beam-deflections']

`complex-demodulation`:
- questions: ['Does the amplitude change over time?', 'Are there any outliers that need to be investigated?', 'Is the amplitude different at the beginning of the series (start-up effect)?']
- importance: Explain that non-stationary cyclic components invalidate spectral analysis assumptions. Complex demodulation is the only technique that tracks time-varying amplitude and phase, making it essential for detecting when periodic behavior strengthens, weakens, or shifts timing during a process.
- definitionExpanded: Describe the two-panel display: amplitude plot (vertical = estimated amplitude of sinusoidal component vs. time) and phase plot (vertical = phase angle in degrees vs. time). Explain the demodulation process: multiply the signal by a complex exponential at the target frequency, then low-pass filter to extract the slowly varying envelope. The filter bandwidth controls the trade-off between time resolution and noise suppression.
- caseStudySlugs: ['beam-deflections']

`lag-plot`:
- questions: ['Are the data random?', 'Is there serial correlation in the data?', 'What is a suitable model for the data?', 'Are there outliers in the data?']
- importance: Explain that the lag plot provides an instant visual diagnostic for randomness that requires no distributional assumptions. A single glance reveals whether successive observations are independent, which is critical because non-independence invalidates standard error formulas, makes confidence intervals too narrow, and causes control charts to generate false alarms.
- definitionExpanded: Describe the construction: plot Y_i on horizontal axis vs Y_{i+k} on vertical axis, where k is the lag (default k=1). Each point represents two successive observations. The plot exploits the human eye's pattern recognition: random data produce a structureless cloud, while any departure from randomness produces a recognizable geometric shape.
- caseStudySlugs: ['beam-deflections']

`run-sequence-plot`:
- questions: ['Are there any shifts in location?', 'Are there any shifts in variation?', 'Are there any outliers?']
- importance: Explain that the run-sequence plot is the single most important first step in any time-ordered data analysis. If the process is not stable (fixed location, fixed variation), then summary statistics like the mean and standard deviation do not characterize a single, well-defined process. Process instability must be identified and addressed before meaningful statistical analysis can proceed.
- definitionExpanded: Describe the construction: horizontal axis = run order index (1, 2, ..., N), vertical axis = measured response value. No smoothing or modeling is applied. The plot is intentionally raw so that any patterns -- trends, shifts, cycles, or outliers -- are visible without being obscured by statistical processing. A horizontal reference line at the overall mean is often included.
- caseStudySlugs: ['filter-transmittance']

`spectral-plot`:
- questions: ['How many cyclic components are there?', 'Is there a dominant cyclic frequency?', 'If there is a dominant cyclic frequency, what is it?']
- importance: Explain that identifying the dominant frequencies in a time series is essential for understanding the underlying physical mechanism generating the data. In manufacturing, a spectral peak at a specific frequency can identify the rotating component or periodic process responsible for variation, enabling targeted corrective action rather than broad process changes.
- definitionExpanded: Describe the construction: the power spectral density is computed via the Fourier transform of the autocovariance function (or equivalently, the squared magnitude of the discrete Fourier transform of the data, suitably normalized). The horizontal axis shows frequency in cycles per observation interval, the vertical axis shows power spectral density. Sharp peaks indicate periodic components; the frequency resolution is 1/N where N is the series length.
- caseStudySlugs: ['beam-deflections']

**designed-experiments.ts (2 techniques):**

`doe-plots`:
- questions: ['Which factors are important with respect to location and scale?', 'Are there outliers?']
- importance: Explain that in designed experiments, quickly identifying which factors affect the response (and whether they affect the mean, the variability, or both) is the first analytical step. DOE plots provide this visual screening before formal ANOVA, catching issues like non-constant variance and outliers that could invalidate the analysis.
- definitionExpanded: Describe the three-panel display: (1) DOE scatter plot showing all raw data points by factor level, (2) DOE mean plot showing group means vs. factor level with a grand mean reference line, (3) DOE standard deviation plot showing group standard deviations vs. factor level with an overall standard deviation reference line. Each panel addresses a different aspect of factor effects.
- caseStudySlugs: ['ceramic-strength']

`std-deviation-plot`:
- questions: ['Are there any shifts in variation?', 'What is the magnitude of the shifts in variation?', 'Is there a distinct pattern in the shifts in variation?']
- importance: Explain that dispersion effects (factors that change process variability) are as important as location effects in quality engineering. A factor that reduces variability without shifting the mean is ideal for robust parameter design. The standard deviation plot is the primary graphical tool for detecting these dispersion effects.
- definitionExpanded: Describe the construction: horizontal axis = factor levels (categorical), vertical axis = within-group sample standard deviations. A horizontal reference line is drawn at the pooled (overall) standard deviation. Factor levels whose standard deviations differ markedly from the reference line indicate dispersion effects.
- caseStudySlugs: [] (no matching case study in the site)

NOTE: For std-deviation-plot, do NOT include caseStudySlugs since there is no matching case study. Simply omit the field entirely.

**multivariate.ts (3 techniques):**

`contour-plot`:
- questions: ['How does the response Z change as a function of X and Y?']
- importance: Explain that contour plots are the primary tool for finding optimal operating conditions in two-factor response surface studies. They answer the central question of process optimization: what combination of settings produces the best response, and how sensitive is the response to deviations from those settings.
- definitionExpanded: Describe the construction: a mathematical model (typically quadratic polynomial from response surface methodology) is evaluated on a grid of (X, Y) points. Points with equal predicted response are connected by contour lines. The spacing of contour lines indicates the gradient: closely spaced = steep change, widely spaced = flat region. Color fills between contours are optional but common. The contour plot is a 2D projection of a 3D response surface.
- caseStudySlugs: [] -- omit field entirely (no case study)

`scatterplot-matrix`:
- questions: ['Which variable pairs exhibit strong correlations?', 'Are there non-linear relationships between variable pairs?', 'Are there multivariate outliers?']
- importance: Explain that the scatterplot matrix provides a comprehensive bivariate overview of multivariate data in a single display. It is the standard first step in multivariate analysis, revealing correlation structure, non-linear relationships, clusters, and outliers that inform variable selection and modeling decisions.
- definitionExpanded: Describe the construction: for p variables, create a p x p grid where cell (i,j) contains the scatter plot of variable i vs variable j. The diagonal cells show variable names or univariate summaries. The matrix is symmetric: cell (i,j) mirrors cell (j,i). The number of panels grows as p*(p-1)/2 unique pairs.
- caseStudySlugs: [] -- omit field entirely (no case study)

`conditioning-plot`:
- questions: ['Does the bivariate relationship change across levels of the conditioning variable?', 'Is there an interaction between the primary variables and the conditioning variable?', 'Does the slope or spread change across conditioning levels?']
- importance: Explain that the conditioning plot is the most direct graphical method for detecting interactions in continuous data. It answers whether a two-variable relationship is the same everywhere or changes depending on a third variable, which is fundamental for regression modeling and process understanding.
- definitionExpanded: Describe the construction: the conditioning variable is divided into overlapping intervals (shingles). For each interval, a separate scatter plot of the two primary variables is drawn using only observations within that interval. Panels are arranged in a trellis grid ordered by the conditioning variable. The overlapping intervals ensure smooth transitions between panels.
- caseStudySlugs: [] -- omit field entirely (no case study)

**Important rules:**
- Do NOT add `formulas` or `pythonCode` fields (Phase 67)
- Do NOT modify existing required fields (definition, purpose, interpretation, assumptions, nistReference)
- Do NOT include `caseStudySlugs` for techniques with no matching case study -- simply omit the field
- Questions must be copied exactly from the NIST research mapping in 66-RESEARCH.md
- importance and definitionExpanded should be 2-4 sentences of authoritative, NIST-aligned prose
- Keep the `as const` assertion on each module's export
  </action>
  <verify>
Run `npx astro build 2>&1 | tail -20` and confirm zero errors. Then verify content was added by checking that all 10 techniques have a `questions` field: `grep -c "questions:" src/lib/eda/technique-content/time-series.ts src/lib/eda/technique-content/designed-experiments.ts src/lib/eda/technique-content/multivariate.ts` should show 5, 2, 3 respectively.
  </verify>
  <done>All 10 techniques across time-series.ts, designed-experiments.ts, and multivariate.ts have questions, importance, definitionExpanded, and caseStudySlugs (where applicable) fields populated with NIST-sourced content. Build passes cleanly.</done>
</task>

<task type="auto">
  <name>Task 2: Add Tier B variant captions and Tier A examples for time-series techniques</name>
  <files>
    src/lib/eda/technique-content/time-series.ts
  </files>
  <action>
Add `examples` arrays to the 3 Tier B time-series techniques. Each example object has `label`, `description`, and `variantLabel` (matching the variant label from the technique renderer). The `variantLabel` must EXACTLY match the variant label string used in the SVG renderer for the variant toggle to link correctly.

**autocorrelation-plot (4 variants):**
```typescript
examples: [
  {
    label: 'White Noise',
    description: 'All autocorrelation values fall within the 95% confidence bands, with no significant spikes at any lag. This is the signature of purely random data where each observation is independent of all others. The constant-plus-error model Y = c + e is appropriate.',
    variantLabel: 'White Noise',
  },
  {
    label: 'AR(1) Process',
    description: 'A large positive spike at lag 1 followed by exponentially decaying values indicates a first-order autoregressive process. Each observation depends primarily on its immediate predecessor. The decay rate reflects the strength of the serial dependence.',
    variantLabel: 'AR(1)',
  },
  {
    label: 'MA(1) Process',
    description: 'A single significant spike at lag 1 that cuts off sharply to zero at lag 2 and beyond is the hallmark of a first-order moving average process. The data have short-range dependence limited to adjacent observations.',
    variantLabel: 'MA(1)',
  },
  {
    label: 'Seasonal Pattern',
    description: 'Oscillating autocorrelation values that repeat at regular lag intervals indicate periodic behavior in the time series. The spacing of the peaks reveals the seasonal period, and the amplitude of the oscillation indicates the strength of the cyclic component.',
    variantLabel: 'Seasonal',
  },
],
```

**lag-plot (4 variants):**
```typescript
examples: [
  {
    label: 'Random Data',
    description: 'A structureless, circular cloud of points centered on the plot with no discernible pattern. This indicates that knowing the value at time i provides no information about the value at time i+1. The data satisfy the randomness assumption.',
    variantLabel: 'Random',
  },
  {
    label: 'Autoregressive',
    description: 'Points form a tight ellipse aligned along the diagonal, indicating strong positive autocorrelation. High values tend to follow high values and low values follow low values. The tighter the ellipse, the stronger the serial dependence.',
    variantLabel: 'Autoregressive',
  },
  {
    label: 'Seasonal',
    description: 'Points form a structured elliptical or circular loop pattern rather than a random cloud. The cyclic structure in the data creates a recognizable geometric shape in the lag plot that is distinct from both random scatter and linear autocorrelation.',
    variantLabel: 'Seasonal',
  },
  {
    label: 'Trend',
    description: 'Points cluster tightly along the diagonal with the cloud displaced from the center, indicating a strong trend in the data. The linear structure arises because successive values in a trending series are nearly identical, differing only by the trend increment plus noise.',
    variantLabel: 'Trend',
  },
],
```

**spectral-plot (3 variants):**
```typescript
examples: [
  {
    label: 'Single Frequency',
    description: 'A single sharp peak rises prominently above a flat noise floor, identifying one dominant periodic component in the data. The frequency of the peak can be converted to a period by taking its reciprocal. This pattern is typical of data driven by a single cyclic mechanism.',
    variantLabel: 'Single Frequency',
  },
  {
    label: 'Multiple Frequencies',
    description: 'Two or more distinct peaks appear at different frequencies, indicating that the time series contains multiple periodic components. Each peak represents an independent cyclic mechanism. The relative heights indicate which frequency contributes most to the total variance.',
    variantLabel: 'Multiple Frequencies',
  },
  {
    label: 'White Noise',
    description: 'A flat, featureless spectrum with roughly equal power at all frequencies. This is the spectral signature of purely random data with no periodic structure. The absence of peaks confirms that no cyclic model is needed.',
    variantLabel: 'White Noise',
  },
],
```

Also add an `examples` array for `run-sequence-plot` (Tier A with NIST examples -- common patterns):
```typescript
examples: [
  {
    label: 'Stable Process',
    description: 'Data points scatter randomly within a horizontal band of constant width around the mean, with no visible trends, shifts, or patterns. This indicates a process with fixed location and fixed variation, suitable for standard statistical analysis.',
  },
  {
    label: 'Location Shift',
    description: 'An abrupt jump in the level of the data partway through the sequence, where the mean before and after the shift are visibly different. Common causes include tool changes, batch changes, or environmental disturbances.',
  },
  {
    label: 'Trend',
    description: 'A gradual upward or downward drift in the data over the observation period, indicating that the process mean is not constant. This can result from tool wear, temperature drift, or material degradation.',
  },
],
```

**Important:** The `variantLabel` field must match the exact label string used in the Tier B variant rendering system. Cross-check the variant labels from 66-RESEARCH.md: autocorrelation-plot uses "White Noise", "AR(1)", "MA(1)", "Seasonal"; lag-plot uses "Random", "Autoregressive", "Seasonal", "Trend"; spectral-plot uses "Single Frequency", "Multiple Frequencies", "White Noise".
  </action>
  <verify>
Run `npx astro build 2>&1 | tail -20` and confirm zero errors. Verify examples were added: `grep -c "variantLabel" src/lib/eda/technique-content/time-series.ts` should show 11 (4 + 4 + 3). Verify run-sequence-plot has 3 examples without variantLabel: `grep -A1 "Stable Process\|Location Shift\|Trend" src/lib/eda/technique-content/time-series.ts | head -12`.
  </verify>
  <done>autocorrelation-plot has 4 variant captions, lag-plot has 4 variant captions, spectral-plot has 3 variant captions, and run-sequence-plot has 3 Tier A examples. All variantLabel strings match the renderer's variant labels. Build passes cleanly.</done>
</task>

</tasks>

<verification>
1. `npx astro build` passes with zero errors
2. All 10 techniques in the 3 modules have `questions` arrays with correct NIST-sourced questions
3. All 10 techniques have `importance` and `definitionExpanded` strings
4. 5 techniques with matching case studies have `caseStudySlugs` populated
5. 3 Tier B techniques have `examples` arrays with `variantLabel` fields
6. run-sequence-plot has Tier A examples without variantLabel
7. No `formulas` or `pythonCode` fields added (Phase 67 scope)
</verification>

<success_criteria>
- 10/29 techniques have full NIST-parity prose content (questions, importance, definitionExpanded)
- 5 techniques have case study cross-links
- 3 Tier B techniques have interpretive variant captions (11 total)
- 1 Tier A technique has pattern examples
- Build clean with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/66-content-depth/66-01-SUMMARY.md`
</output>
