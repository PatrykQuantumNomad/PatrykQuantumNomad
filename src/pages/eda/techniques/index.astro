---
/**
 * Graphical Techniques landing page — /eda/techniques/
 * Thumbnail grid of all 29 graphical techniques with build-time SVG previews.
 */
import { getCollection } from 'astro:content';
import EDALayout from '../../../layouts/EDALayout.astro';
import EdaBreadcrumb from '../../../components/eda/EdaBreadcrumb.astro';
import BreadcrumbJsonLd from '../../../components/BreadcrumbJsonLd.astro';
import EDAJsonLd from '../../../components/eda/EDAJsonLd.astro';
import { techniqueUrl } from '../../../lib/eda/routes';
import { generateThumbnail } from '../../../lib/eda/thumbnail';

const techniques = await getCollection('edaTechniques');
const graphical = techniques
  .filter((t) => t.data.category === 'graphical')
  .sort((a, b) => a.data.section.localeCompare(b.data.section, undefined, { numeric: true }));

const cards = graphical.map((t) => ({
  title: t.data.title,
  slug: t.data.slug,
  url: techniqueUrl(t.data.slug, 'graphical'),
  section: t.data.section,
  description: t.data.description,
  thumbnail: generateThumbnail(t.data.slug),
}));
---

<EDALayout
  title="Graphical Techniques | EDA Visual Encyclopedia"
  description="Browse 29 graphical techniques for Exploratory Data Analysis including histograms, scatter plots, box plots, probability plots, and more. Each page features build-time SVG visualizations and interpretation guidance."
  ogImage="/open-graph/eda/overview.png"
  ogImageAlt="Graphical Techniques — EDA Visual Encyclopedia"
>
  <BreadcrumbJsonLd crumbs={[
    { name: 'Home', url: 'https://patrykgolabek.dev/' },
    { name: 'EDA', url: 'https://patrykgolabek.dev/eda/' },
    { name: 'Graphical Techniques', url: 'https://patrykgolabek.dev/eda/techniques/' },
  ]} />
  <EDAJsonLd
    title="Graphical Techniques"
    description="Browse 29 graphical techniques for Exploratory Data Analysis including histograms, scatter plots, box plots, probability plots, and more."
    url="https://patrykgolabek.dev/eda/techniques/"
    pageType="technique"
  />

  <article class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <EdaBreadcrumb category="Graphical Techniques" />

    <header class="mb-10">
      <h1 class="text-3xl sm:text-4xl font-heading font-bold mb-4">Graphical Techniques</h1>
      <p class="text-sm text-[var(--color-text-secondary)]">NIST/SEMATECH Section 1.3.3</p>
      <p class="text-lg text-[var(--color-text-secondary)] max-w-3xl">
        29 graphical techniques for Exploratory Data Analysis — from histograms and scatter plots
        to probability plots, lag plots, and star plots. Each page includes build-time SVG
        visualizations, formulas, interpretation guidance, and NIST/SEMATECH references.
      </p>
    </header>

    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
      {cards.map((card) => (
        <a
          href={card.url}
          class="hover:bg-[var(--color-accent)]/5 transition-colors rounded-lg p-3 group"
        >
          {card.thumbnail && (
            <div
              role="img"
              aria-label={`Preview for ${card.title}`}
              class="w-full overflow-hidden"
              set:html={card.thumbnail}
            />
          )}
          <p class="mt-2 text-sm font-medium text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors text-center">
            {card.title}
          </p>
        </a>
      ))}
    </div>
  </article>
</EDALayout>
