---
/**
 * Case Studies landing page — /eda/case-studies/
 * Card grid of all 10 NIST/SEMATECH EDA case studies.
 */
import { getCollection } from 'astro:content';
import EDALayout from '../../../layouts/EDALayout.astro';
import EdaBreadcrumb from '../../../components/eda/EdaBreadcrumb.astro';
import BreadcrumbJsonLd from '../../../components/BreadcrumbJsonLd.astro';
import EDAJsonLd from '../../../components/eda/EDAJsonLd.astro';
import { caseStudyUrl } from '../../../lib/eda/routes';

const pages = await getCollection('edaPages');
const caseStudies = pages
  .filter((p) => p.data.category === 'case-studies')
  .sort((a, b) => a.data.section.localeCompare(b.data.section, undefined, { numeric: true }));

const cards = caseStudies.map((page) => {
  const slug = page.id.replace('case-studies/', '');
  return {
    title: page.data.title,
    url: caseStudyUrl(slug),
    section: page.data.section,
    description: page.data.description,
  };
});
---

<EDALayout
  title="Case Studies | EDA Visual Encyclopedia"
  description="10 worked EDA case studies from the NIST/SEMATECH Handbook — ceramic strength, heat flow meter, uniform random numbers, and more. Each applies the full 4-plot diagnostic to real-world datasets."
  ogImage="/open-graph/eda/overview.png"
  ogImageAlt="EDA Case Studies — EDA Visual Encyclopedia"
>
  <BreadcrumbJsonLd crumbs={[
    { name: 'Home', url: 'https://patrykgolabek.dev/' },
    { name: 'EDA', url: 'https://patrykgolabek.dev/eda/' },
    { name: 'Case Studies', url: 'https://patrykgolabek.dev/eda/case-studies/' },
  ]} />
  <EDAJsonLd
    title="Case Studies"
    description="10 worked EDA case studies from the NIST/SEMATECH Handbook — ceramic strength, heat flow meter, uniform random numbers, and more."
    url="https://patrykgolabek.dev/eda/case-studies/"
    pageType="case-study"
  />

  <article class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <EdaBreadcrumb category="Case Studies" />

    <header class="mb-10">
      <h1 class="text-3xl sm:text-4xl font-heading font-bold mb-4">Case Studies</h1>
      <p class="text-sm text-[var(--color-text-secondary)]">NIST/SEMATECH Section 1.4</p>
      <p class="text-lg text-[var(--color-text-secondary)] max-w-3xl">
        10 worked EDA case studies from the NIST/SEMATECH Engineering Statistics Handbook.
        Each applies the full 4-plot diagnostic and complementary techniques to real-world
        datasets, demonstrating how to assess location, variation, randomness, and distributional
        assumptions.
      </p>
    </header>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {cards.map((card) => (
        <a
          href={card.url}
          class="group rounded-lg border border-[var(--color-border)] p-5 hover:border-[var(--color-accent)] transition-colors"
        >
          <h3 class="text-base font-heading font-bold group-hover:text-[var(--color-accent)] transition-colors">
            {card.title}
          </h3>
          <p class="text-xs text-[var(--color-text-secondary)] mt-1">Section {card.section}</p>
          <p class="text-sm text-[var(--color-text-secondary)] mt-2 line-clamp-3">
            {card.description}
          </p>
        </a>
      ))}
    </div>
  </article>
</EDALayout>
