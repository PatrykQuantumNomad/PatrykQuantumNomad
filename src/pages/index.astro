---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import Layout from '../layouts/Layout.astro';
import ParticleCanvas from '../components/ParticleCanvas.astro';
import PersonJsonLd from '../components/PersonJsonLd.astro';
import FAQPageJsonLd from '../components/FAQPageJsonLd.astro';
import { siteConfig } from '../data/site';
import heroImg from '../assets/images/meandbatman.jpg';

const posts = await getCollection('blog', ({ data }) => {
  return import.meta.env.PROD ? data.draft !== true : true;
});

const latestPosts = posts
  .sort((a, b) => b.data.publishedDate.valueOf() - a.data.publishedDate.valueOf())
  .slice(0, 3);

const pageTitle = `${siteConfig.name} — ${siteConfig.roles[0]} & ${siteConfig.roles[2]}`;
const pageDescription = `Portfolio of ${siteConfig.name}, ${siteConfig.description}.`;
---

<Layout
  title={pageTitle}
  description={pageDescription}
>
  <!-- Hero Section -->
  <div class="relative" transition:persist="particle-hero">
    <ParticleCanvas />
    <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <!-- Text side -->
        <div data-parallax="hero">
          <p class="meta-mono mb-4 text-[var(--color-accent-secondary)]" data-reveal>Cloud-Native Architect &middot; Ontario, Canada</p>
          <h1
            class="text-5xl sm:text-6xl lg:text-7xl font-heading font-extrabold mb-4 leading-[0.95] tracking-[-0.03em]"
            style="opacity: 0;"
            data-animate="headline"
          >
            {siteConfig.name}
          </h1>
          <p class="text-2xl sm:text-3xl text-[var(--color-accent)] font-heading font-medium mb-6 min-h-[2rem] sm:min-h-[2.5rem] typing-glow">
            <span id="typing-role" class="typing-cursor" data-roles={JSON.stringify(siteConfig.roles)}>{siteConfig.roles[0]}</span>
          </p>
          <p class="text-lg text-[var(--color-text-secondary)] max-w-xl mb-4" data-reveal>
            {siteConfig.tagline}
          </p>
          <p class="text-sm text-[var(--color-text-secondary)] max-w-xl mb-8" data-reveal>
            Patryk Golabek is a Cloud-Native Software Architect based in Ontario, Canada, with over 17 years of production engineering experience. A pre-1.0 Kubernetes adopter and former CTO, he maintains 19+ open-source projects spanning Kubernetes platforms, AI/ML agents, and developer tools.
          </p>
          <div class="flex flex-wrap gap-4" data-reveal>
            <a
              href="/projects/"
              class="btn-primary inline-flex items-center px-6 py-3 rounded-lg bg-[var(--color-accent)] text-white font-medium hover:bg-[var(--color-accent-hover)]"
              data-magnetic
            >
              View Projects
            </a>
            <a
              href="/blog/"
              class="btn-outline inline-flex items-center px-6 py-3 rounded-lg border border-[var(--color-accent)] text-[var(--color-accent)] font-medium hover:bg-[var(--color-accent)]/10"
              data-magnetic
            >
              Read Blog
            </a>
            <a
              href="/about/"
              class="inline-flex items-center text-[var(--color-text-secondary)] hover:text-[var(--color-accent)] font-medium transition-colors"
              data-magnetic
            >
              Learn more about my background &rarr;
            </a>
          </div>
        </div>
        <!-- Photo side -->
        <div class="relative flex justify-center lg:justify-end" data-reveal>
          <div class="relative">
            <div class="hero-img-frame overflow-hidden rounded-2xl shadow-2xl max-w-md" style="aspect-ratio: 480/600;" data-tilt>
              <Image
                src={heroImg}
                alt="Patryk Golabek posing with Batman"
                width={480}
                height={600}
                class="w-full h-full object-cover"
                loading="eager"
                fetchpriority="high"
              />
            </div>
            <!-- Decorative accent -->
            <div class="absolute -bottom-4 -right-4 w-24 h-24 rounded-xl bg-[var(--color-accent)]/20 -z-10"></div>
            <div class="absolute -top-4 -left-4 w-16 h-16 rounded-lg bg-[var(--color-accent-secondary)]/20 -z-10"></div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Expertise Section -->
  <section class="relative overflow-x-clip overflow-y-visible max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16" data-section-bg="skills">
    <h2 class="text-2xl sm:text-3xl font-heading font-bold mb-8" data-word-reveal>Expertise</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">

      <!-- Cloud-Native & Kubernetes -->
      <div class="card-hover p-5 rounded-lg border border-[var(--color-border)]" data-reveal data-tilt>
        <div class="flex items-center gap-3 mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848 5.25 5.25 0 00-10.233 2.33A4.502 4.502 0 002.25 15z" />
          </svg>
          <h3 class="text-base font-heading font-bold">Cloud-Native & Kubernetes</h3>
        </div>
        <p class="text-sm text-[var(--color-text-secondary)]">
          Designing and operating production Kubernetes clusters since pre-1.0. Service meshes, GitOps, observability stacks, and multi-cloud deployments across GCP and AWS.
        </p>
      </div>

      <!-- AI/ML Systems -->
      <div class="card-hover p-5 rounded-lg border border-[var(--color-border)]" data-reveal data-tilt>
        <div class="flex items-center gap-3 mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.455 2.456L21.75 6l-1.036.259a3.375 3.375 0 00-2.455 2.456z" />
          </svg>
          <h3 class="text-base font-heading font-bold">AI/ML Systems</h3>
        </div>
        <p class="text-sm text-[var(--color-text-secondary)]">
          Building LLM agents, RAG pipelines, and intelligent automation with LangGraph, Langflow, and custom orchestration. From prototype to production-grade AI systems.
        </p>
      </div>

      <!-- Platform Engineering -->
      <div class="card-hover p-5 rounded-lg border border-[var(--color-border)]" data-reveal data-tilt>
        <div class="flex items-center gap-3 mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17l-5.1-3.03a1.5 1.5 0 01-.55-2.05l3.03-5.1a1.5 1.5 0 012.05-.55l5.1 3.03a1.5 1.5 0 01.55 2.05l-3.03 5.1a1.5 1.5 0 01-2.05.55zM20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m8.25 3v6.75m0 0l-3-3m3 3l3-3" />
          </svg>
          <h3 class="text-base font-heading font-bold">Platform Engineering</h3>
        </div>
        <p class="text-sm text-[var(--color-text-secondary)]">
          Infrastructure as Code with Terraform and Terragrunt. CI/CD pipelines, DevSecOps practices, and developer experience tooling that keeps teams moving fast.
        </p>
      </div>

      <!-- Full-Stack Development -->
      <div class="card-hover p-5 rounded-lg border border-[var(--color-border)]" data-reveal data-tilt>
        <div class="flex items-center gap-3 mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 shrink-0 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5" />
          </svg>
          <h3 class="text-base font-heading font-bold">Full-Stack Development</h3>
        </div>
        <p class="text-sm text-[var(--color-text-secondary)]">
          Python, Java, TypeScript. React, Angular, Next.js. APIs, microservices, and data pipelines — end-to-end delivery from frontend to backend.
        </p>
      </div>

    </div>
  </section>

  {/* Content Pillars Section */}
  <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <h2 class="text-2xl sm:text-3xl font-heading font-bold mb-8" data-word-reveal>Reference Guides</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <a href="/beauty-index/" class="block card-hover rounded-lg border border-[var(--color-border)] no-underline overflow-hidden" data-reveal data-tilt>
        <article>
          <div class="bg-[var(--color-surface-alt)] px-6 pt-6 pb-4 flex justify-center">
            <img
              src="/images/beauty-index-golden-ratio-light.svg"
              alt="Golden ratio spiral representing the six aesthetic dimensions"
              width="400"
              height="148"
              class="max-w-full h-auto"
              loading="lazy"
            />
          </div>
          <div class="p-6 pt-4">
            <p class="meta-mono text-[var(--color-accent)]">2026 Edition</p>
            <h3 class="text-lg font-heading font-bold text-[var(--color-text-primary)] mt-2">The Beauty Index</h3>
            <p class="text-sm text-[var(--color-text-secondary)] mt-2">
              25 programming languages ranked across 6 aesthetic dimensions. From Haskell's mathematical purity to PHP's industrial grit.
            </p>
            <span class="inline-block mt-4 text-sm font-medium text-[var(--color-accent)]">Explore rankings &rarr;</span>
          </div>
        </article>
      </a>
      <a href="/db-compass/" class="block card-hover rounded-lg border border-[var(--color-border)] no-underline overflow-hidden" data-reveal data-tilt>
        <article>
          <div class="bg-[var(--color-surface-alt)] px-6 pt-6 pb-4 flex justify-center">
            <img
              src="/images/database-compass-hero.svg"
              alt="Compass rose with radar overlays surrounded by database model icons"
              width="280"
              height="233"
              class="max-w-full h-auto"
              loading="lazy"
            />
          </div>
          <div class="p-6 pt-4">
            <p class="meta-mono text-[var(--color-accent)]">2026 Edition</p>
            <h3 class="text-lg font-heading font-bold text-[var(--color-text-primary)] mt-2">Database Compass</h3>
            <p class="text-sm text-[var(--color-text-secondary)] mt-2">
              Compare 12 database models across 8 dimensions. From key-value simplicity to multi-model complexity.
            </p>
            <span class="inline-block mt-4 text-sm font-medium text-[var(--color-accent)]">Explore models &rarr;</span>
          </div>
        </article>
      </a>
    </div>
  </section>

  {/* Tools Section */}
  <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-8">
    <h2 class="text-2xl sm:text-3xl font-heading font-bold mb-8" data-word-reveal>Tools</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <a href="/tools/dockerfile-analyzer/" class="block card-hover p-6 rounded-lg border border-[var(--color-border)] no-underline" data-reveal data-tilt>
        <article>
          <p class="meta-mono text-[var(--color-accent)]">Free Browser Tool</p>
          <h3 class="text-lg font-heading font-bold text-[var(--color-text-primary)] mt-2">Dockerfile Analyzer</h3>
          <p class="text-sm text-[var(--color-text-secondary)] mt-2">
            Paste your Dockerfile, get instant best-practice feedback. Dozens of rules across security, efficiency, and maintainability. 100% client-side.
          </p>
          <span class="inline-block mt-4 text-sm font-medium text-[var(--color-accent)]">Try it &rarr;</span>
        </article>
      </a>
      <a href="/tools/compose-validator/" class="block card-hover p-6 rounded-lg border border-[var(--color-border)] no-underline" data-reveal data-tilt>
        <article>
          <p class="meta-mono text-[var(--color-accent)]">Free Browser Tool</p>
          <h3 class="text-lg font-heading font-bold text-[var(--color-text-primary)] mt-2">Docker Compose Validator</h3>
          <p class="text-sm text-[var(--color-text-secondary)] mt-2">
            Validate docker-compose.yml files against 52 rules across security, semantic,
            and best-practice categories. Dependency graph, scoring, and shareable results. 100% client-side.
          </p>
          <span class="inline-block mt-4 text-sm font-medium text-[var(--color-accent)]">Try it &rarr;</span>
        </article>
      </a>
    </div>
  </section>

  <div class="gradient-divider max-w-6xl mx-auto" data-divider-reveal aria-hidden="true"></div>

  <!-- Latest Blog Posts Section -->
  <section class="relative overflow-x-clip overflow-y-visible max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16" data-section-bg="writing">
    <h2 class="text-2xl sm:text-3xl font-heading font-bold mb-8" data-word-reveal>Latest Writing</h2>
    {latestPosts.length > 0 ? (
      <div class="space-y-6">
        {latestPosts.map((post) => {
          const isExternal = !!post.data.externalUrl;
          const href = isExternal ? post.data.externalUrl : `/blog/${post.id}/`;
          return (
            <a
              href={href}
              class="block card-hover p-6 rounded-lg border border-[var(--color-border)] no-underline"
              {...isExternal && { target: "_blank", rel: "noopener noreferrer" }}
              data-reveal
              data-tilt
            >
              <article>
                <h3 class="text-lg font-heading font-bold text-[var(--color-text-primary)] group-hover:text-[var(--color-accent)] transition-colors">
                  {post.data.title}
                </h3>
                <p class="meta-mono mt-2">
                  <time datetime={post.data.publishedDate.toISOString()}>
                    {post.data.publishedDate.toLocaleDateString('en-CA', { year: 'numeric', month: 'long', day: 'numeric', timeZone: 'UTC' })}
                  </time>
                  {post.data.source && (
                    <span class="text-xs px-2 py-0.5 rounded-full bg-[var(--color-accent)]/10 text-[var(--color-accent)]">
                      on {post.data.source}
                    </span>
                  )}
                  {isExternal && (
                    <svg xmlns="http://www.w3.org/2000/svg" class="inline w-4 h-4 text-[var(--color-text-secondary)] ml-1" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M4.25 5.5a.75.75 0 00-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0112.75 17h-8.5A2.25 2.25 0 012 14.75v-8.5A2.25 2.25 0 014.25 4h5a.75.75 0 010 1.5h-5zm7.25-.75a.75.75 0 01.75-.75h3.5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0V6.31l-5.47 5.47a.75.75 0 01-1.06-1.06l5.47-5.47H12.25a.75.75 0 01-.75-.75z" clip-rule="evenodd" />
                    </svg>
                  )}
                </p>
                <p class="text-sm text-[var(--color-text-secondary)] mt-2">
                  {post.data.description}
                </p>
              </article>
            </a>
          );
        })}
      </div>
    ) : (
      <p class="text-[var(--color-text-secondary)]">No posts yet. Check back soon!</p>
    )}
    <div class="mt-8" data-reveal>
      <a
        href="/blog/"
        class="text-[var(--color-accent)] hover:text-[var(--color-accent-hover)] font-medium transition-colors"
      >
        View all posts &rarr;
      </a>
    </div>
  </section>

  <div class="gradient-divider max-w-6xl mx-auto" data-divider-reveal aria-hidden="true"></div>

  <!-- Contact CTA Section -->
  <section class="relative overflow-x-clip overflow-y-visible max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16" data-section-bg="cta" data-reveal>
    <h2 class="text-2xl sm:text-3xl font-heading font-bold mb-4" data-word-reveal>Interested in working together?</h2>
    <p class="text-[var(--color-text-secondary)] mb-8 max-w-2xl">
      I'm actively looking for my next role in cloud-native architecture, AI/ML systems, or engineering leadership. Whether you're hiring, want to collaborate on open source, or just want to talk frontend, backend, DevOps, programming languages, or anything software — I'd love to hear from you.
    </p>
    <div class="flex flex-wrap gap-4">
      <a
        href="mailto:pgolabek@gmail.com"
        class="btn-primary inline-flex items-center px-6 py-3 rounded-lg bg-[var(--color-accent)] text-white font-medium hover:bg-[var(--color-accent-hover)]"
        data-magnetic
      >
        Get in Touch
      </a>
      <a
        href="https://x.com/QuantumMentat"
        target="_blank"
        rel="me noopener noreferrer"
        class="btn-outline inline-flex items-center px-6 py-3 rounded-lg border border-[var(--color-accent)] text-[var(--color-accent)] font-medium hover:bg-[var(--color-accent)]/10"
        data-magnetic
      >
        <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
        </svg>
        Follow on X
      </a>
    </div>
  </section>

  <PersonJsonLd />
  <FAQPageJsonLd items={[
    {
      question: "Who is Patryk Golabek?",
      answer: "Patryk Golabek is a Cloud-Native Software Architect based in Ontario, Canada, with over 17 years of production engineering experience. He is a pre-1.0 Kubernetes adopter and former CTO who specializes in Kubernetes platforms, AI/ML systems, platform engineering, and DevSecOps."
    },
    {
      question: "What does Patryk Golabek specialize in?",
      answer: "Patryk specializes in cloud-native architecture and Kubernetes (pre-1.0 adopter), AI/ML systems including LLM agents and RAG pipelines, platform engineering with Terraform and GitOps, and full-stack development with Python, Java, TypeScript, React, and Next.js."
    },
    {
      question: "Where can I find Patryk Golabek's open-source projects?",
      answer: "Patryk maintains 19+ open-source projects on GitHub at github.com/PatrykQuantumNomad, spanning the Kubert Kubernetes Platform, AI agents and LLM tools, and standalone developer utilities like the Dockerfile Analyzer and JobFlow."
    },
  ]} />
</Layout>

<style>
  .typing-cursor::after {
    content: '|';
    animation: blink 0.8s step-end infinite;
    color: var(--color-accent);
  }
  @keyframes blink {
    50% { opacity: 0; }
  }
</style>
