---
import type { Category } from '../data/projects';

interface Props {
  name: string;
  category: Category;
}

const { name, category } = Astro.props;

const colors: Record<Category, { primary: string; secondary: string; bg1: string; bg2: string }> = {
  'Kubert Kubernetes Platform': { primary: '#3b82f6', secondary: '#06b6d4', bg1: 'rgba(59,130,246,0.12)', bg2: 'rgba(6,182,212,0.06)' },
  'AI & Intelligent Agents':    { primary: '#8b5cf6', secondary: '#ec4899', bg1: 'rgba(139,92,246,0.10)', bg2: 'rgba(236,72,153,0.05)' },
  'Open Source Tools':           { primary: '#10b981', secondary: '#006d6d', bg1: 'rgba(16,185,129,0.10)', bg2: 'rgba(0,109,109,0.05)' },
};

const c = colors[category];
---

<svg class="absolute inset-0 w-full h-full" viewBox="0 0 400 160" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
  {/* Gradient background */}
  <defs>
    <linearGradient id={`bg-${name}`} x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color={c.primary} stop-opacity="0.10" />
      <stop offset="100%" stop-color={c.secondary} stop-opacity="0.05" />
    </linearGradient>
  </defs>
  <rect width="400" height="160" fill={`url(#bg-${name})`} />

  {/* Subtle decorative circles */}
  <circle cx="340" cy="30" r="50" fill={c.primary} opacity="0.03" />
  <circle cx="60" cy="130" r="40" fill={c.secondary} opacity="0.03" />

  {/* Per-project illustration */}
  <g transform="translate(200,80)" stroke={c.primary} fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" opacity="0.55">

    {name === 'kps-cluster-deployment' && (
      <g>
        {/* 3 hexagon cluster nodes */}
        <polygon points="0,-30 16,-22 16,-8 0,0 -16,-8 -16,-22" />
        <polygon points="-28,10 -12,18 -12,32 -28,40 -44,32 -44,18" />
        <polygon points="28,10 44,18 44,32 28,40 12,32 12,18" />
        {/* Connections */}
        <line x1="0" y1="0" x2="-28" y2="10" />
        <line x1="0" y1="0" x2="28" y2="10" />
        <line x1="-28" y1="40" x2="28" y2="40" stroke-dasharray="4 3" />
        {/* Upward arrows */}
        <line x1="0" y1="-30" x2="0" y2="-45" />
        <polyline points="-5,-40 0,-45 5,-40" />
      </g>
    )}

    {name === 'kps-infra-management' && (
      <g>
        {/* Stacked layers */}
        <rect x="-35" y="-30" width="50" height="12" rx="3" />
        <rect x="-35" y="-14" width="50" height="12" rx="3" />
        <rect x="-35" y="2" width="50" height="12" rx="3" />
        {/* Gear */}
        <circle cx="35" cy="-5" r="14" />
        <circle cx="35" cy="-5" r="6" />
        <line x1="35" y1="-19" x2="35" y2="-23" />
        <line x1="35" y1="9" x2="35" y2="13" />
        <line x1="21" y1="-5" x2="17" y2="-5" />
        <line x1="49" y1="-5" x2="53" y2="-5" />
        {/* Connection */}
        <line x1="15" y1="8" x2="21" y2="-1" stroke-dasharray="4 3" />
      </g>
    )}

    {name === 'kps-observability-package' && (
      <g>
        {/* Dashboard frame */}
        <rect x="-45" y="-35" width="90" height="60" rx="5" />
        {/* Line chart */}
        <polyline points="-35,-5 -20,-20 -5,-10 10,-25 25,-15 35,-22" stroke={c.secondary} />
        {/* Gauge */}
        <path d="-30,18 A12,12 0 0,1 -6,18" />
        <line x1="-18" y1="18" x2="-14" y2="8" />
        {/* Dots */}
        <circle cx="10" cy="15" r="2" fill={c.primary} />
        <circle cx="20" cy="15" r="2" fill={c.primary} />
        <circle cx="30" cy="15" r="2" fill={c.primary} />
        {/* Top bar */}
        <line x1="-45" y1="-25" x2="45" y2="-25" opacity="0.3" />
        <circle cx="-38" cy="-30" r="2" fill={c.primary} opacity="0.4" />
        <circle cx="-30" cy="-30" r="2" fill={c.secondary} opacity="0.4" />
      </g>
    )}

    {name === 'kps-charts' && (
      <g>
        {/* Helm wheel */}
        <circle cx="0" cy="-5" r="22" />
        <circle cx="0" cy="-5" r="8" />
        {/* Spokes */}
        <line x1="0" y1="-27" x2="0" y2="-13" />
        <line x1="0" y1="3" x2="0" y2="17" />
        <line x1="-22" y1="-5" x2="-8" y2="-5" />
        <line x1="8" y1="-5" x2="22" y2="-5" />
        <line x1="-15" y1="-20" x2="-6" y2="-11" />
        <line x1="6" y1="1" x2="15" y2="10" />
        {/* Handle pegs */}
        <circle cx="0" cy="-27" r="3" fill={c.primary} opacity="0.3" />
        <circle cx="0" cy="17" r="3" fill={c.primary} opacity="0.3" />
        <circle cx="-22" cy="-5" r="3" fill={c.primary} opacity="0.3" />
        <circle cx="22" cy="-5" r="3" fill={c.primary} opacity="0.3" />
      </g>
    )}

    {name === 'kps-basic-package' && (
      <g>
        {/* 3D stacked cubes */}
        {/* Bottom cube */}
        <rect x="-18" y="5" width="28" height="22" rx="2" />
        <line x1="-18" y1="5" x2="-8" y2="-3" />
        <line x1="10" y1="5" x2="20" y2="-3" />
        <line x1="-8" y1="-3" x2="20" y2="-3" />
        {/* Top cube */}
        <rect x="-14" y="-22" width="22" height="18" rx="2" />
        <line x1="-14" y1="-22" x2="-6" y2="-28" />
        <line x1="8" y1="-22" x2="16" y2="-28" />
        <line x1="-6" y1="-28" x2="16" y2="-28" />
        {/* Arrow between */}
        <line x1="-1" y1="5" x2="-1" y2="-4" stroke-dasharray="3 2" />
      </g>
    )}

    {name === 'kps-images' && (
      <g>
        {/* Container / Docker box */}
        <rect x="-30" y="-25" width="60" height="40" rx="4" />
        {/* Layered rectangles inside */}
        <rect x="-22" y="-17" width="18" height="10" rx="2" fill={c.primary} opacity="0.15" />
        <rect x="4" y="-17" width="18" height="10" rx="2" fill={c.primary} opacity="0.15" />
        <rect x="-22" y="-3" width="18" height="10" rx="2" fill={c.primary} opacity="0.15" />
        <rect x="4" y="-3" width="18" height="10" rx="2" fill={c.primary} opacity="0.15" />
        {/* Pipe / CI arrow */}
        <line x1="35" y1="-15" x2="35" y2="10" />
        <polyline points="30,5 35,10 40,5" />
        <circle cx="35" cy="-15" r="3" fill={c.primary} opacity="0.3" />
      </g>
    )}

    {name === 'kps-graph-agent' && (
      <g>
        {/* Knowledge graph: 5 nodes with edges */}
        <circle cx="0" cy="-20" r="7" fill={c.primary} opacity="0.15" />
        <circle cx="-30" cy="0" r="7" fill={c.primary} opacity="0.15" />
        <circle cx="30" cy="0" r="7" fill={c.primary} opacity="0.15" />
        <circle cx="-18" cy="25" r="7" fill={c.primary} opacity="0.15" />
        <circle cx="18" cy="25" r="7" fill={c.primary} opacity="0.15" />
        {/* Edges */}
        <line x1="0" y1="-13" x2="-25" y2="-3" />
        <line x1="0" y1="-13" x2="25" y2="-3" />
        <line x1="-26" y1="5" x2="-20" y2="19" />
        <line x1="26" y1="5" x2="20" y2="19" />
        <line x1="-12" y1="25" x2="12" y2="25" />
        <line x1="-25" y1="3" x2="25" y2="3" stroke-dasharray="4 3" />
        {/* Node dots */}
        <circle cx="0" cy="-20" r="3" fill={c.primary} opacity="0.5" />
        <circle cx="-30" cy="0" r="3" fill={c.primary} opacity="0.5" />
        <circle cx="30" cy="0" r="3" fill={c.primary} opacity="0.5" />
        <circle cx="-18" cy="25" r="3" fill={c.primary} opacity="0.5" />
        <circle cx="18" cy="25" r="3" fill={c.primary} opacity="0.5" />
      </g>
    )}

    {name === 'kps-assistant' && (
      <g>
        {/* Brain outline */}
        <path d="M-5,-30 C-20,-30 -25,-15 -20,-5 C-25,5 -15,15 -5,12 C0,18 10,15 15,8 C22,10 28,0 25,-10 C30,-20 20,-32 5,-30 Z" />
        {/* Chat bubble */}
        <rect x="15" y="8" width="28" height="20" rx="5" />
        <polygon points="20,28 18,35 28,28" fill={c.primary} opacity="0.1" />
        {/* Dots in bubble */}
        <circle cx="23" cy="18" r="2" fill={c.primary} opacity="0.4" />
        <circle cx="29" cy="18" r="2" fill={c.primary} opacity="0.4" />
        <circle cx="35" cy="18" r="2" fill={c.primary} opacity="0.4" />
      </g>
    )}

    {name === 'kps-assistant-support' && (
      <g>
        {/* Cloud */}
        <path d="M-20,5 A20,20 0 0,1 -10,-15 A15,15 0 0,1 15,-15 A18,18 0 0,1 25,5 Z" fill={c.primary} opacity="0.08" />
        <path d="M-20,5 A20,20 0 0,1 -10,-15 A15,15 0 0,1 15,-15 A18,18 0 0,1 25,5 Z" />
        {/* Wrench */}
        <line x1="-5" y1="10" x2="10" y2="28" />
        <circle cx="-5" cy="10" r="6" />
        <circle cx="-5" cy="10" r="2" />
        {/* Gear */}
        <circle cx="15" cy="22" r="8" />
        <circle cx="15" cy="22" r="3" />
      </g>
    )}

    {name === 'kubert-langflow' && (
      <g>
        {/* Flow diagram: 3 connected rounded rectangles */}
        <rect x="-45" y="-15" width="26" height="18" rx="4" fill={c.primary} opacity="0.1" />
        <rect x="-45" y="-15" width="26" height="18" rx="4" />
        <rect x="-8" y="-25" width="26" height="18" rx="4" fill={c.primary} opacity="0.1" />
        <rect x="-8" y="-25" width="26" height="18" rx="4" />
        <rect x="-8" y="5" width="26" height="18" rx="4" fill={c.primary} opacity="0.1" />
        <rect x="-8" y="5" width="26" height="18" rx="4" />
        <rect x="30" y="-10" width="26" height="18" rx="4" fill={c.primary} opacity="0.1" />
        <rect x="30" y="-10" width="26" height="18" rx="4" />
        {/* Arrows */}
        <line x1="-19" y1="-6" x2="-8" y2="-13" />
        <line x1="-19" y1="-6" x2="-8" y2="10" />
        <line x1="18" y1="-13" x2="30" y2="-4" />
        <line x1="18" y1="17" x2="30" y2="4" />
        {/* Arrow heads */}
        <polyline points="-12,-11 -8,-13 -10,-9" />
        <polyline points="-11,8 -8,10 -12,12" />
      </g>
    )}

    {name === 'kps-langflow' && (
      <g>
        {/* Pipeline / deploy */}
        <rect x="-40" y="-10" width="18" height="18" rx="3" />
        <rect x="-10" y="-10" width="18" height="18" rx="3" />
        <rect x="20" y="-10" width="18" height="18" rx="3" />
        {/* Arrows between */}
        <line x1="-22" y1="-1" x2="-10" y2="-1" />
        <polyline points="-14,2 -10,-1 -14,-4" />
        <line x1="8" y1="-1" x2="20" y2="-1" />
        <polyline points="16,2 20,-1 16,-4" />
        {/* Rocket icon in last box */}
        <line x1="29" y1="3" x2="29" y2="-6" />
        <polyline points="26,-3 29,-6 32,-3" />
        {/* Dots in first boxes */}
        <circle cx="-31" cy="-1" r="2" fill={c.primary} opacity="0.4" />
        <circle cx="-1" cy="-1" r="2" fill={c.primary} opacity="0.4" />
      </g>
    )}

    {name === 'tekstack-assistant-library' && (
      <g>
        {/* Code brackets */}
        <polyline points="-20,-25 -35,0 -20,25" stroke-width="2" />
        <polyline points="20,-25 35,0 20,25" stroke-width="2" />
        {/* Slash */}
        <line x1="8" y1="-20" x2="-8" y2="20" stroke-width="1.5" opacity="0.5" />
        {/* Connection dots around */}
        <circle cx="-45" cy="-10" r="3" fill={c.primary} opacity="0.3" />
        <circle cx="-45" cy="10" r="3" fill={c.primary} opacity="0.3" />
        <circle cx="45" cy="-10" r="3" fill={c.primary} opacity="0.3" />
        <circle cx="45" cy="10" r="3" fill={c.primary} opacity="0.3" />
        {/* Connecting lines */}
        <line x1="-42" y1="-10" x2="-35" y2="-5" stroke-dasharray="3 2" />
        <line x1="-42" y1="10" x2="-35" y2="5" stroke-dasharray="3 2" />
        <line x1="42" y1="-10" x2="35" y2="-5" stroke-dasharray="3 2" />
        <line x1="42" y1="10" x2="35" y2="5" stroke-dasharray="3 2" />
      </g>
    )}

    {name === 'kps-lobe-chat' && (
      <g>
        {/* 3 overlapping chat bubbles */}
        <rect x="-35" y="-20" width="28" height="22" rx="6" fill={c.primary} opacity="0.08" />
        <rect x="-35" y="-20" width="28" height="22" rx="6" />
        <rect x="-5" y="-28" width="28" height="22" rx="6" fill={c.secondary} opacity="0.08" />
        <rect x="-5" y="-28" width="28" height="22" rx="6" stroke={c.secondary} />
        <rect x="10" y="-12" width="28" height="22" rx="6" fill={c.primary} opacity="0.08" />
        <rect x="10" y="-12" width="28" height="22" rx="6" />
        {/* Tails */}
        <polygon points="-30,2 -33,10 -22,2" fill="none" />
        <polygon points="15,10 12,18 25,10" fill="none" />
        {/* Model dots */}
        <circle cx="-24" cy="-9" r="2" fill={c.primary} opacity="0.5" />
        <circle cx="8" cy="-17" r="2" fill={c.secondary} opacity="0.5" />
        <circle cx="21" cy="-1" r="2" fill={c.primary} opacity="0.5" />
      </g>
    )}

    {name === 'kubert-assistant-lite' && (
      <g>
        {/* Terminal window */}
        <rect x="-38" y="-28" width="76" height="52" rx="5" />
        {/* Title bar */}
        <line x1="-38" y1="-18" x2="38" y2="-18" opacity="0.3" />
        <circle cx="-30" cy="-23" r="2.5" fill={c.primary} opacity="0.4" />
        <circle cx="-22" cy="-23" r="2.5" fill={c.secondary} opacity="0.4" />
        <circle cx="-14" cy="-23" r="2.5" fill={c.primary} opacity="0.2" />
        {/* K8s wheel inside */}
        <circle cx="0" cy="2" r="14" opacity="0.4" />
        <circle cx="0" cy="2" r="5" opacity="0.4" />
        <line x1="0" y1="-12" x2="0" y2="-3" opacity="0.4" />
        <line x1="0" y1="7" x2="0" y2="16" opacity="0.4" />
        <line x1="-12" y1="2" x2="-5" y2="2" opacity="0.4" />
        <line x1="5" y1="2" x2="12" y2="2" opacity="0.4" />
        {/* Prompt line */}
        <line x1="-30" y1="18" x2="-22" y2="18" opacity="0.5" />
        <line x1="-18" y1="18" x2="5" y2="18" opacity="0.3" />
      </g>
    )}

    {name === 'financial-data-extractor' && (
      <g>
        {/* Document page */}
        <rect x="-35" y="-30" width="40" height="52" rx="3" />
        <line x1="-25" y1="-18" x2="-5" y2="-18" opacity="0.3" />
        <line x1="-25" y1="-10" x2="-10" y2="-10" opacity="0.3" />
        <line x1="-25" y1="-2" x2="-5" y2="-2" opacity="0.3" />
        {/* Bar chart on doc */}
        <rect x="-27" y="5" width="6" height="12" rx="1" fill={c.primary} opacity="0.2" />
        <rect x="-19" y="1" width="6" height="16" rx="1" fill={c.primary} opacity="0.3" />
        <rect x="-11" y="8" width="6" height="9" rx="1" fill={c.primary} opacity="0.2" />
        {/* Data flow arrows */}
        <line x1="10" y1="-15" x2="25" y2="-15" />
        <polyline points="21,-18 25,-15 21,-12" />
        <line x1="10" y1="0" x2="25" y2="0" />
        <polyline points="21,-3 25,0 21,3" />
        <line x1="10" y1="15" x2="25" y2="15" />
        <polyline points="21,12 25,15 21,18" />
        {/* Target */}
        <rect x="28" y="-25" width="16" height="42" rx="3" stroke-dasharray="4 3" />
      </g>
    )}

    {name === 'JobFlow' && (
      <g>
        {/* Kanban: 3 columns */}
        <rect x="-45" y="-32" width="28" height="56" rx="3" />
        <rect x="-14" y="-32" width="28" height="56" rx="3" />
        <rect x="17" y="-32" width="28" height="56" rx="3" />
        {/* Column headers */}
        <line x1="-45" y1="-22" x2="-17" y2="-22" opacity="0.3" />
        <line x1="-14" y1="-22" x2="14" y2="-22" opacity="0.3" />
        <line x1="17" y1="-22" x2="45" y2="-22" opacity="0.3" />
        {/* Cards in columns */}
        <rect x="-41" y="-18" width="20" height="10" rx="2" fill={c.primary} opacity="0.15" />
        <rect x="-41" y="-4" width="20" height="10" rx="2" fill={c.primary} opacity="0.1" />
        <rect x="-41" y="10" width="20" height="10" rx="2" fill={c.primary} opacity="0.08" />
        <rect x="-10" y="-18" width="20" height="10" rx="2" fill={c.primary} opacity="0.15" />
        <rect x="-10" y="-4" width="20" height="10" rx="2" fill={c.primary} opacity="0.1" />
        <rect x="21" y="-18" width="20" height="10" rx="2" fill={c.primary} opacity="0.15" />
        {/* Flow arrow */}
        <line x1="-15" y1="20" x2="15" y2="20" stroke-dasharray="4 3" opacity="0.4" />
        <polyline points="11,17 15,20 11,23" opacity="0.4" />
      </g>
    )}

    {name === 'networking-tools' && (
      <g>
        {/* Shield */}
        <path d="M0,-35 L25,-22 L25,5 C25,20 0,32 0,32 C0,32 -25,20 -25,5 L-25,-22 Z" fill={c.primary} opacity="0.06" />
        <path d="M0,-35 L25,-22 L25,5 C25,20 0,32 0,32 C0,32 -25,20 -25,5 L-25,-22 Z" />
        {/* Network nodes inside shield */}
        <circle cx="0" cy="-10" r="4" fill={c.primary} opacity="0.3" />
        <circle cx="-12" cy="8" r="4" fill={c.primary} opacity="0.3" />
        <circle cx="12" cy="8" r="4" fill={c.primary} opacity="0.3" />
        {/* Node connections */}
        <line x1="0" y1="-6" x2="-10" y2="5" />
        <line x1="0" y1="-6" x2="10" y2="5" />
        <line x1="-8" y1="8" x2="8" y2="8" />
      </g>
    )}

    {name === 'webinar-slack-bot' && (
      <g>
        {/* Message bubble */}
        <rect x="-35" y="-25" width="50" height="35" rx="7" fill={c.primary} opacity="0.06" />
        <rect x="-35" y="-25" width="50" height="35" rx="7" />
        <polygon points="-20,10 -25,20 -10,10" />
        {/* Slack hashtag in bubble */}
        <line x1="-18" y1="-15" x2="-18" y2="0" stroke-width="2" opacity="0.5" />
        <line x1="-8" y1="-15" x2="-8" y2="0" stroke-width="2" opacity="0.5" />
        <line x1="-22" y1="-10" x2="-4" y2="-10" stroke-width="2" opacity="0.5" />
        <line x1="-22" y1="-3" x2="-4" y2="-3" stroke-width="2" opacity="0.5" />
        {/* Bot antenna */}
        <circle cx="28" cy="-20" r="8" />
        <line x1="28" y1="-28" x2="28" y2="-35" />
        <circle cx="28" cy="-37" r="3" fill={c.primary} opacity="0.3" />
        {/* Bot eyes */}
        <circle cx="25" cy="-20" r="2" fill={c.primary} opacity="0.4" />
        <circle cx="31" cy="-20" r="2" fill={c.primary} opacity="0.4" />
        {/* Bot body */}
        <rect x="20" y="-10" width="16" height="18" rx="3" />
      </g>
    )}

  </g>
</svg>
